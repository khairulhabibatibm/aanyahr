!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{cCha:function(t,n,i){"use strict";i.r(n),i.d(n,"ReportsModule",function(){return j});var o,a=i("ofXK"),s=i("EVdn"),c=i("fXoL"),p=i("EAui"),d=i("HG93"),l=i("3Pt+"),b=i("ltvU"),u=i("ZOsW"),h=i("1kSV"),m=i("IYwT"),f=i("njyG"),g=i("XNiG"),y=((o=function(){function t(){e(this,t),this.dtOptions=[],this.dtTrigger=new g.a}return r(t,[{key:"ngOnInit",value:function(){console.log(this.headerList)}},{key:"searchReport",value:function(e){var t=this;console.log(e),void 0!==this.dtElement.dtInstance?($("#reportTable").DataTable().clear(),$("#reportTable").DataTable().destroy(),this.dtOptions.reports={data:e,dom:"Bfrtip",destroy:!0,buttons:["copy","csv","excel","print"],columns:this.headerList},setTimeout(function(){t.dtTrigger.next()},100)):(this.dtOptions.reports={data:e,dom:"Bfrtip",buttons:["copy","csv","excel","print"],columns:this.headerList},setTimeout(function(){t.dtTrigger.next()},100))}}]),t}()).\u0275fac=function(e){return new(e||o)},o.\u0275cmp=c.Fb({type:o,selectors:[["app-child-report"]],viewQuery:function(e,t){var r;1&e&&c.Nc(f.a,!0),2&e&&c.uc(r=c.cc())&&(t.dtElement=r.first)},inputs:{headerList:"headerList"},decls:2,vars:2,consts:[[1,"table-responsive"],["id","reportTable","datatable","",3,"dtTrigger","dtOptions"]],template:function(e,t){1&e&&(c.Rb(0,"div",0),c.Mb(1,"table",1),c.Qb()),2&e&&(c.yb(1),c.jc("dtTrigger",t.dtTrigger)("dtOptions",t.dtOptions.reports))},directives:[f.a],styles:[""]}),o),v=["appChild"];function R(e,t){1&e&&(c.Rb(0,"div",2),c.Rb(1,"div",3),c.Ic(2,"Loading..."),c.Qb(),c.Qb())}function I(e,t){1&e&&(c.Rb(0,"p",29),c.Ic(1,"Please select report type!"),c.Qb())}function Q(e,t){1&e&&(c.Rb(0,"button",30),c.Mb(1,"span",31),c.Ic(2," Loading... "),c.Qb())}function w(e,t){if(1&e){var r=c.Sb();c.Rb(0,"button",32),c.bc("click",function(){return c.xc(r),c.dc(2).search()}),c.Mb(1,"i",33),c.Ic(2," Search "),c.Qb()}}function T(e,t){if(1&e&&c.Mb(0,"app-child-report",34,35),2&e){var r=c.dc(2);c.jc("headerList",r.headerList)}}function L(e,t){if(1&e){var r=c.Sb();c.Rb(0,"div",4),c.Rb(1,"div",5),c.Rb(2,"div",6),c.Rb(3,"h6"),c.Ic(4,"Report"),c.Qb(),c.Qb(),c.Rb(5,"div",7),c.Rb(6,"form",8),c.Rb(7,"div",9),c.Rb(8,"div",10),c.Rb(9,"div",11),c.Rb(10,"label",12),c.Ic(11,"Report Type"),c.Qb(),c.Rb(12,"ng-select",13),c.bc("change",function(){return c.xc(r),c.dc().onChange()}),c.Qb(),c.Gc(13,I,2,0,"p",14),c.Qb(),c.Qb(),c.Rb(14,"div",10),c.Rb(15,"div",11),c.Rb(16,"label",12),c.Ic(17,"Date From"),c.Qb(),c.Rb(18,"div",15),c.Rb(19,"input",16,17),c.bc("click",function(){return c.xc(r),c.vc(20).toggle()}),c.Qb(),c.Rb(21,"div",18),c.Rb(22,"button",19),c.bc("click",function(){return c.xc(r),c.vc(20).toggle()}),c.Mb(23,"i",20),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Rb(24,"div",10),c.Rb(25,"div",11),c.Rb(26,"label",12),c.Ic(27,"Date To"),c.Qb(),c.Rb(28,"div",15),c.Rb(29,"input",21,22),c.bc("click",function(){return c.xc(r),c.vc(30).toggle()}),c.Qb(),c.Rb(31,"div",18),c.Rb(32,"button",19),c.bc("click",function(){return c.xc(r),c.vc(30).toggle()}),c.Mb(33,"i",20),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Rb(34,"div",9),c.Rb(35,"div",23),c.Rb(36,"div",11),c.Rb(37,"label",12),c.Ic(38,"Employee"),c.Qb(),c.Rb(39,"div",9),c.Rb(40,"div",23),c.Mb(41,"ng-select",24),c.Qb(),c.Rb(42,"div",25),c.Gc(43,Q,3,0,"button",26),c.Gc(44,w,3,0,"button",27),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Qb(),c.Mb(45,"hr"),c.Gc(46,T,2,1,"app-child-report",28),c.Qb(),c.Qb(),c.Qb()}if(2&e){var n=c.dc();c.yb(6),c.jc("formGroup",n.reportForm),c.yb(6),c.jc("items",n.reportList),c.yb(1),c.jc("ngIf",n.errReports),c.yb(28),c.jc("items",n.employeeList),c.yb(2),c.jc("ngIf",n.isSearch),c.yb(1),c.jc("ngIf",!n.isSearch),c.yb(2),c.jc("ngIf",n.isReport)}}var D,F,S=((D=function(){function t(r,n,i,o){e(this,t),this.permissionManagementService=r,this.reportManagementService=n,this.fb=i,this.userManagementService=o,this.reportList=[],this.headerList=[],this.employeeList=[],this.isLoading=!0,this.isSearch=!1,this.isReport=!1,this.errReports=!1,this.startDate={day:new Date(sessionStorage.getItem("s")).getDate(),month:new Date(sessionStorage.getItem("s")).getMonth()+1,year:new Date(sessionStorage.getItem("s")).getFullYear()},this.endDate={day:new Date(sessionStorage.getItem("e")).getDate(),month:new Date(sessionStorage.getItem("e")).getMonth()+1,year:new Date(sessionStorage.getItem("e")).getFullYear()},this.pipe=new a.e("en-US")}return r(t,[{key:"ngOnInit",value:function(){var e=this;this.reportForm=this.fb.group({reportID:null,dateFrom:this.startDate,dateTo:this.endDate,selectedEmployee:null}),this.permissionManagementService.reportAccess(sessionStorage.getItem("al")).subscribe(function(t){e.reportList=t,e.userManagementService.employeeView(0).subscribe(function(t){e.employeeList=Object(s.merge)([{encrypt_employee_id:0,display_name:"All"}],t),e.isLoading=!1},function(e){console.log(e.error)})},function(e){console.log(e.error)})}},{key:"onChange",value:function(){var e=this;this.headerList=[],this.isReport=!1,this.reportManagementService.reportHeader(this.reportForm.get("reportID").value).subscribe(function(t){for(var r=0;r<t.filter(function(e){return!0===e.is_view}).length;r++)e.headerList.push({data:t[r].columns,sTitle:t[r].colname});e.isReport=!0},function(e){console.log(e.error)})}},{key:"search",value:function(){var e,t=this,r=!0;this.errReports=!1,""!==this.reportForm.get("reportID").value&&null!==this.reportForm.get("reportID").value||(r=!1,this.errReports=!0),e=""===this.reportForm.get("selectedEmployee").value||null===this.reportForm.get("selectedEmployee").value?0:this.reportForm.get("selectedEmployee").value,r&&(this.isSearch=!0,this.reportManagementService.reportView(this.reportForm.get("reportID").value,this.pipe.transform(this.reportForm.get("dateFrom").value.year+"/"+this.reportForm.get("dateFrom").value.month+"/"+this.reportForm.get("dateFrom").value.day,"MM/dd/yyyy"),this.pipe.transform(this.reportForm.get("dateTo").value.year+"/"+this.reportForm.get("dateTo").value.month+"/"+this.reportForm.get("dateTo").value.day,"MM/dd/yyyy"),e).subscribe(function(e){t.childReport.searchReport(JSON.parse(e.toString())),t.isSearch=!1},function(e){console.log(e.error)}))}}]),t}()).\u0275fac=function(e){return new(e||D)(c.Lb(p.a),c.Lb(d.a),c.Lb(l.c),c.Lb(b.a))},D.\u0275cmp=c.Fb({type:D,selectors:[["app-report"]],viewQuery:function(e,t){var r;1&e&&c.Nc(v,!0),2&e&&c.uc(r=c.cc())&&(t.childReport=r.first)},decls:2,vars:2,consts:[["class","spinner-wrapper",4,"ngIf"],["class","animate__animated animate__fadeInUp",4,"ngIf"],[1,"spinner-wrapper"],[1,"spinner"],[1,"animate__animated","animate__fadeInUp"],[1,"card"],[1,"card-header"],[1,"card-body"],[3,"formGroup"],[1,"row"],[1,"col-md-4"],[1,"form-group"],[1,"control-label"],["name","industry","bindLabel","report_name","bindValue","report_id","placeholder","Select Reports","formControlName","reportID",3,"items","change"],["class","text-danger mt-1",4,"ngIf"],[1,"input-group"],["placeholder","mm/dd/yyyy","name","dp","formControlName","dateFrom","value","dateFrom","ngbDatepicker","",1,"form-control",3,"click"],["d","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-light","btn-icon","calendar",3,"click"],["data-feather","calendar","appFeatherIcon","",1,"text-secondary"],["placeholder","mm/dd/yyyy","name","dp","formControlName","dateTo","ngbDatepicker","",1,"form-control",3,"click"],["dt","ngbDatepicker"],[1,"col-md-8"],["name","Employee","bindLabel","display_name","bindValue","employee_id","placeholder","Select Employee","formControlName","selectedEmployee",3,"items"],[1,"col-md-3"],["class","btn btn-primary","type","button","disabled","",4,"ngIf"],["type","button","class","btn btn-primary btn-icon-text ",3,"click",4,"ngIf"],[3,"headerList",4,"ngIf"],[1,"text-danger","mt-1"],["type","button","disabled","",1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["type","button",1,"btn","btn-primary","btn-icon-text",3,"click"],["data-feather","search","appFeatherIcon","",1,"btn-icon-prepend"],[3,"headerList"],["appChild",""]],template:function(e,t){1&e&&(c.Gc(0,R,3,0,"div",0),c.Gc(1,L,47,7,"div",1)),2&e&&(c.jc("ngIf",t.isLoading),c.yb(1),c.jc("ngIf",!t.isLoading))},directives:[a.n,l.s,l.j,l.e,u.a,l.i,l.d,l.b,h.i,m.a,y],styles:[""]}),D),k=i("tyNb"),M=i("tyVc"),O=[{path:"",component:S,children:[{path:"",redirectTo:"report",pathMatch:"full"},{path:"report",component:S},{path:"child-report",component:y}]}],j=((F=function t(){e(this,t)}).\u0275mod=c.Jb({type:F}),F.\u0275inj=c.Ib({factory:function(e){return new(e||F)},imports:[[a.c,l.f,l.p,k.g.forChild(O),M.a,u.b,h.k,f.b]]}),F)},njyG:function(e,t,r){"use strict";r.d(t,"a",function(){return i}),r.d(t,"b",function(){return a});var n=r("fXoL"),i=function(){function e(e){this.el=e,this.dtOptions={}}return e.prototype.ngOnInit=function(){var e=this;this.dtTrigger?this.dtTrigger.subscribe(function(){e.displayTable()}):this.displayTable()},e.prototype.ngOnDestroy=function(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.dt&&this.dt.destroy(!0)},e.prototype.displayTable=function(){var e=this;this.dtInstance=new Promise(function(t,r){Promise.resolve(e.dtOptions).then(function(r){setTimeout(function(){var n={rowCallback:function(t,n,i){if(r.columns){var o=r.columns;o.filter(function(e){return e.ngPipeInstance}).forEach(function(e){var r=e.ngPipeInstance,n=o.findIndex(function(t){return t.data==e.data}),i=t.childNodes.item(n),a=$(i).text(),s=r.transform(a);$(i).text(s)})}e.dtOptions.rowCallback&&e.dtOptions.rowCallback(t,n,i)}};n=Object.assign({},r,n),e.dt=$(e.el.nativeElement).DataTable(n),t(e.dt)})})})},e.\u0275fac=function(t){return new(t||e)(n.Lb(n.l))},e.\u0275dir=n.Gb({type:e,selectors:[["","datatable",""]],inputs:{dtOptions:"dtOptions",dtTrigger:"dtTrigger"}}),e}(),o=r("ofXK"),a=function(){function e(){}return e.forRoot=function(){return{ngModule:e}},e.\u0275mod=n.Jb({type:e}),e.\u0275inj=n.Ib({factory:function(t){return new(t||e)},imports:[[o.c]]}),e}()}}])}();