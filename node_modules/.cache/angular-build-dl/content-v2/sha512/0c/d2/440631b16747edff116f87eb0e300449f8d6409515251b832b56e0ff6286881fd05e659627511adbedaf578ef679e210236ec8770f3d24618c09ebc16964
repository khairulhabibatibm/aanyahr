(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"/rOv":function(e,t,i){"use strict";i.r(t),i.d(t,"HomeModule",function(){return te});var a=i("ofXK"),n=i("njyG"),o=i("AytR"),s=i("fXoL"),c=i("J1nh"),r=i("1kSV"),d=i("xNm2"),l=i("oYuu"),b=i("mWvJ"),h=i("IYwT"),u=i("3Pt+"),f=i("ZOsW"),p=i("IvIE"),m=i("mEZC"),g=i("NvFN"),y=i("EIwK"),v=i("TEbG"),R=i("a48+"),Q=i("4rDk");let I=(()=>{class e{transform(e,t){return e.length<=0?e:e.filter(e=>e.detail_group_id===t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=s.Kb({name:"filterArray",type:e,pure:!1}),e})();const _=["calendar"],D=["filingModal"],M=["attendanceModal"],F=["payslipModal"],S=["htmlData"];function w(e,t){1&e&&(s.Rb(0,"div",5),s.Rb(1,"div",6),s.Ic(2,"Loading..."),s.Qb(),s.Qb())}function T(e,t){if(1&e){const e=s.Sb();s.Rb(0,"div",40),s.Rb(1,"button",41),s.bc("click",function(){return s.xc(e),s.dc(2).reload()}),s.Mb(2,"i",42),s.Qb(),s.Qb()}}function k(e,t){if(1&e){const e=s.Sb();s.Rb(0,"li",46),s.Rb(1,"div",9),s.Rb(2,"div",47),s.Ic(3),s.Qb(),s.Rb(4,"div",48),s.Rb(5,"a",49),s.bc("click",function(){s.xc(e);const i=t.index;return s.dc(3).view(i)}),s.Rb(6,"span",50),s.Ic(7),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb()}if(2&e){const e=t.$implicit;s.yb(3),s.Kc(" ",e.title," "),s.yb(3),s.Dc(e.backgroundColor),s.yb(1),s.Jc(e.status)}}function x(e,t){if(1&e&&(s.Rb(0,"div",43),s.Rb(1,"ul",44),s.Gc(2,k,8,5,"li",45),s.Qb(),s.Qb()),2&e){const e=s.dc(2);s.yb(2),s.jc("ngForOf",e.filingList)}}function C(e,t){if(1&e){const e=s.Sb();s.Rb(0,"div",7),s.Mb(1,"link",8),s.Rb(2,"div",9),s.Rb(3,"div",10),s.Rb(4,"div",11),s.Rb(5,"div",12),s.Rb(6,"div",13),s.Rb(7,"h6",14),s.Ic(8),s.Qb(),s.Gc(9,T,3,0,"div",15),s.Qb(),s.Qb(),s.Rb(10,"div",16),s.Gc(11,x,3,1,"div",17),s.Qb(),s.Rb(12,"div",18),s.Rb(13,"ul",19),s.Rb(14,"button",20),s.bc("click",function(){return s.xc(e),s.dc().prev()}),s.Mb(15,"i",21),s.Ic(16," Prev "),s.Qb(),s.Ic(17," \xa0 "),s.Rb(18,"button",20),s.bc("click",function(){return s.xc(e),s.dc().next()}),s.Mb(19,"i",22),s.Ic(20," Next "),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Rb(21,"div",11),s.Rb(22,"div",23),s.Rb(23,"div",24),s.Rb(24,"label",25),s.Ic(25,"Attendance"),s.Qb(),s.Rb(26,"button",26),s.bc("click",function(){return s.xc(e),s.dc().viewLogs()}),s.Ic(27,"View"),s.Qb(),s.Rb(28,"div",27),s.Rb(29,"input",28,29),s.bc("ngModelChange",function(t){return s.xc(e),s.dc().dateFrom=t})("click",function(){return s.xc(e),s.vc(30).toggle()}),s.Qb(),s.Rb(31,"div",30),s.Rb(32,"button",31),s.bc("click",function(){return s.xc(e),s.vc(30).toggle()}),s.Mb(33,"i",32),s.Qb(),s.Qb(),s.Qb(),s.Rb(34,"div",27),s.Rb(35,"input",33,34),s.bc("ngModelChange",function(t){return s.xc(e),s.dc().dateTo=t})("click",function(){return s.xc(e),s.vc(36).toggle()}),s.Qb(),s.Rb(37,"div",30),s.Rb(38,"button",31),s.bc("click",function(){return s.xc(e),s.vc(36).toggle()}),s.Mb(39,"i",32),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Rb(40,"div",24),s.Rb(41,"label",25),s.Ic(42,"Payslip"),s.Qb(),s.Rb(43,"ng-select",35),s.bc("change",function(t){return s.xc(e),s.dc().selectedPayslip(t)}),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Rb(44,"div",36),s.Rb(45,"div",11),s.Rb(46,"div",23),s.Mb(47,"full-calendar",37,38),s.Qb(),s.Qb(),s.Rb(49,"div",11),s.Rb(50,"div",23),s.Rb(51,"h6",39),s.Ic(52,"Announcement"),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb()}if(2&e){const e=s.dc();s.yb(8),s.Jc(e.appTitle),s.yb(1),s.jc("ngIf",e.isButton),s.yb(2),s.jc("ngIf",e.reloadApp),s.yb(18),s.jc("ngModel",e.dateFrom),s.yb(6),s.jc("ngModel",e.dateTo),s.yb(8),s.jc("items",e.payslipList),s.yb(4),s.jc("options",e.calendarOptions)}}function L(e,t){if(1&e&&(s.Rb(0,"div",51),s.Rb(1,"h5",52),s.Ic(2,"Attendance"),s.Qb(),s.Rb(3,"button",53),s.bc("click",function(){return t.$implicit.close("by: close icon")}),s.Rb(4,"span",54),s.Ic(5,"\xd7"),s.Qb(),s.Qb(),s.Qb(),s.Rb(6,"div",55),s.Rb(7,"div",56),s.Rb(8,"div",9),s.Rb(9,"div",57),s.Rb(10,"table",58),s.Rb(11,"thead"),s.Rb(12,"tr"),s.Rb(13,"th"),s.Ic(14,"EMPLOYEE CODE"),s.Qb(),s.Rb(15,"th"),s.Ic(16,"EMPLOYEE"),s.Qb(),s.Rb(17,"th"),s.Ic(18,"DATE"),s.Qb(),s.Rb(19,"th"),s.Ic(20,"RESTDAY"),s.Qb(),s.Rb(21,"th"),s.Ic(22,"SCHEDULE IN"),s.Qb(),s.Rb(23,"th"),s.Ic(24,"SCHEDULE OUT"),s.Qb(),s.Rb(25,"th"),s.Ic(26,"TIME IN"),s.Qb(),s.Rb(27,"th"),s.Ic(28,"TIME OUT"),s.Qb(),s.Rb(29,"th"),s.Ic(30,"RG"),s.Qb(),s.Rb(31,"th"),s.Ic(32,"TARDY"),s.Qb(),s.Rb(33,"th"),s.Ic(34,"UT"),s.Qb(),s.Rb(35,"th"),s.Ic(36,"ABSNT"),s.Qb(),s.Rb(37,"th"),s.Ic(38,"LWOP"),s.Qb(),s.Rb(39,"th"),s.Ic(40,"VL"),s.Qb(),s.Rb(41,"th"),s.Ic(42,"SL"),s.Qb(),s.Rb(43,"th"),s.Ic(44,"OTLV"),s.Qb(),s.Rb(45,"th"),s.Ic(46,"ND"),s.Qb(),s.Rb(47,"th"),s.Ic(48,"RGOT"),s.Qb(),s.Rb(49,"th"),s.Ic(50,"RGOTND"),s.Qb(),s.Rb(51,"th"),s.Ic(52,"LHOT"),s.Qb(),s.Rb(53,"th"),s.Ic(54,"LHOTND"),s.Qb(),s.Rb(55,"th"),s.Ic(56,"LHOT>8"),s.Qb(),s.Rb(57,"th"),s.Ic(58,"LHOTND>8"),s.Qb(),s.Rb(59,"th"),s.Ic(60,"LHRD"),s.Qb(),s.Rb(61,"th"),s.Ic(62,"LHRDND"),s.Qb(),s.Rb(63,"th"),s.Ic(64,"LHRD>8"),s.Qb(),s.Rb(65,"th"),s.Ic(66,"LHRDND>8"),s.Qb(),s.Rb(67,"th"),s.Ic(68,"SHOT"),s.Qb(),s.Rb(69,"th"),s.Ic(70,"SHOTND"),s.Qb(),s.Rb(71,"th"),s.Ic(72,"SHOT>8"),s.Qb(),s.Rb(73,"th"),s.Ic(74,"SHOTND>8"),s.Qb(),s.Rb(75,"th"),s.Ic(76,"SHRD"),s.Qb(),s.Rb(77,"th"),s.Ic(78,"SHRDND"),s.Qb(),s.Rb(79,"th"),s.Ic(80,"SHRD>8"),s.Qb(),s.Rb(81,"th"),s.Ic(82,"SHRDND>8"),s.Qb(),s.Rb(83,"th"),s.Ic(84,"RDOT"),s.Qb(),s.Rb(85,"th"),s.Ic(86,"RDOTND"),s.Qb(),s.Rb(87,"th"),s.Ic(88,"RDOT>8"),s.Qb(),s.Rb(89,"th"),s.Ic(90,"RDOTND>8"),s.Qb(),s.Rb(91,"th"),s.Ic(92,"DHOT"),s.Qb(),s.Rb(93,"th"),s.Ic(94,"DHOTND"),s.Qb(),s.Rb(95,"th"),s.Ic(96,"DHOT>8"),s.Qb(),s.Rb(97,"th"),s.Ic(98,"DHOTND>8"),s.Qb(),s.Rb(99,"th"),s.Ic(100,"DHRD"),s.Qb(),s.Rb(101,"th"),s.Ic(102,"DHRDND"),s.Qb(),s.Rb(103,"th"),s.Ic(104,"DHRD>8"),s.Qb(),s.Rb(105,"th"),s.Ic(106,"DHRDND>8"),s.Qb(),s.Rb(107,"th"),s.Ic(108,"REMARKS"),s.Qb(),s.Qb(),s.Qb(),s.Mb(109,"tbody"),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb()),2&e){const e=s.dc();s.yb(10),s.jc("dtOptions",e.dtOptions.generated)}}function O(e,t){if(1&e){const e=s.Sb();s.Rb(0,"div",56),s.Rb(1,"app-change-log-detail",61),s.bc("isSuccess",function(t){return s.xc(e),s.dc(2).isSuccess(t)}),s.Qb(),s.Qb()}if(2&e){const e=s.dc(2);s.yb(1),s.jc("parentDetail",e.parentDetail)("fileType",e.fileType)}}function j(e,t){if(1&e){const e=s.Sb();s.Rb(0,"div",56),s.Rb(1,"app-change-schedule-detail",61),s.bc("isSuccess",function(t){return s.xc(e),s.dc(2).isSuccess(t)}),s.Qb(),s.Qb()}if(2&e){const e=s.dc(2);s.yb(1),s.jc("parentDetail",e.parentDetail)("fileType",e.fileType)}}function P(e,t){if(1&e){const e=s.Sb();s.Rb(0,"div",56),s.Rb(1,"app-leave-detail",61),s.bc("isSuccess",function(t){return s.xc(e),s.dc(2).isSuccess(t)}),s.Qb(),s.Qb()}if(2&e){const e=s.dc(2);s.yb(1),s.jc("parentDetail",e.parentDetail)("fileType",e.fileType)}}function B(e,t){if(1&e){const e=s.Sb();s.Rb(0,"div",56),s.Rb(1,"app-official-business-detail",61),s.bc("isSuccess",function(t){return s.xc(e),s.dc(2).isSuccess(t)}),s.Qb(),s.Qb()}if(2&e){const e=s.dc(2);s.yb(1),s.jc("parentDetail",e.parentDetail)("fileType",e.fileType)}}function G(e,t){if(1&e){const e=s.Sb();s.Rb(0,"div",56),s.Rb(1,"app-overtime-detail",61),s.bc("isSuccess",function(t){return s.xc(e),s.dc(2).isSuccess(t)}),s.Qb(),s.Qb()}if(2&e){const e=s.dc(2);s.yb(1),s.jc("parentDetail",e.parentDetail)("fileType",e.fileType)}}function A(e,t){if(1&e){const e=s.Sb();s.Rb(0,"div",56),s.Rb(1,"app-offset-detail",61),s.bc("isSuccess",function(t){return s.xc(e),s.dc(2).isSuccess(t)}),s.Qb(),s.Qb()}if(2&e){const e=s.dc(2);s.yb(1),s.jc("parentDetail",e.parentDetail)("fileType",e.fileType)}}function N(e,t){if(1&e){const e=s.Sb();s.Rb(0,"div",51),s.Rb(1,"h5",52),s.Ic(2,"Employee Filing"),s.Qb(),s.Rb(3,"button",53),s.bc("click",function(){return t.$implicit.close("by: close icon")}),s.Rb(4,"span",54),s.Ic(5,"\xd7"),s.Qb(),s.Qb(),s.Qb(),s.Rb(6,"div",55),s.Rb(7,"div",9),s.Rb(8,"div",10),s.Rb(9,"div",24),s.Rb(10,"label",25),s.Ic(11,"Filing Type"),s.Qb(),s.Rb(12,"ng-select",59),s.bc("ngModelChange",function(t){return s.xc(e),s.dc().selectedFiling=t})("change",function(){return s.xc(e),s.dc().selectFiling()}),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Rb(13,"div",9),s.Gc(14,O,2,2,"div",60),s.Gc(15,j,2,2,"div",60),s.Gc(16,P,2,2,"div",60),s.Gc(17,B,2,2,"div",60),s.Gc(18,G,2,2,"div",60),s.Gc(19,A,2,2,"div",60),s.Qb(),s.Qb()}if(2&e){const e=s.dc();s.yb(12),s.jc("items",e.filingTypeList)("ngModel",e.selectedFiling),s.yb(2),s.jc("ngIf",e.isChangeLog),s.yb(1),s.jc("ngIf",e.isChangeSchedule),s.yb(1),s.jc("ngIf",e.isLeave),s.yb(1),s.jc("ngIf",e.isOfficialBusiness),s.yb(1),s.jc("ngIf",e.isOvertime),s.yb(1),s.jc("ngIf",e.isOffset)}}function V(e,t){if(1&e&&(s.Rb(0,"div",9),s.Rb(1,"div",68),s.Rb(2,"label"),s.Ic(3),s.Qb(),s.Qb(),s.Rb(4,"div",68),s.Rb(5,"p",74),s.Ic(6),s.ec(7,"number"),s.Qb(),s.Qb(),s.Qb()),2&e){const e=t.$implicit;s.yb(3),s.Jc(e.detail),s.yb(3),s.Kc("P ",s.gc(7,2,e.amount,"1.2-2"),"")}}function E(e,t){if(1&e&&(s.Rb(0,"div",9),s.Rb(1,"div",68),s.Rb(2,"label"),s.Ic(3),s.Qb(),s.Qb(),s.Rb(4,"div",68),s.Rb(5,"p",74),s.Ic(6),s.ec(7,"number"),s.Qb(),s.Qb(),s.Qb()),2&e){const e=t.$implicit;s.yb(3),s.Jc(e.detail),s.yb(3),s.Kc("P ",s.gc(7,2,e.amount,"1.2-2"),"")}}function H(e,t){if(1&e&&(s.Rb(0,"div",9),s.Rb(1,"div",68),s.Rb(2,"label"),s.Ic(3),s.Qb(),s.Qb(),s.Rb(4,"div",68),s.Rb(5,"p",74),s.Ic(6),s.ec(7,"number"),s.Qb(),s.Qb(),s.Qb()),2&e){const e=t.$implicit;s.yb(3),s.Jc(e.detail),s.yb(3),s.Kc("P ",s.gc(7,2,e.amount,"1.2-2"),"")}}function U(e,t){if(1&e&&(s.Rb(0,"div",9),s.Rb(1,"div",68),s.Rb(2,"label"),s.Ic(3),s.Qb(),s.Qb(),s.Rb(4,"div",68),s.Rb(5,"p",74),s.Ic(6),s.ec(7,"number"),s.Qb(),s.Qb(),s.Qb()),2&e){const e=t.$implicit;s.yb(3),s.Jc(e.detail),s.yb(3),s.Kc("P (",s.gc(7,2,e.amount,"1.2-2"),")")}}function Y(e,t){if(1&e&&(s.Rb(0,"div",9),s.Rb(1,"div",68),s.Rb(2,"label"),s.Ic(3),s.Qb(),s.Qb(),s.Rb(4,"div",68),s.Rb(5,"p",74),s.Ic(6),s.ec(7,"number"),s.Qb(),s.Qb(),s.Qb()),2&e){const e=t.$implicit;s.yb(3),s.Jc(e.detail),s.yb(3),s.Kc("P (",s.gc(7,2,e.amount,"1.2-2"),")")}}function J(e,t){if(1&e){const e=s.Sb();s.Rb(0,"div",51),s.Rb(1,"h5",62),s.Rb(2,"button",63),s.bc("click",function(){return s.xc(e),s.dc().openPDF()}),s.Ic(3,"Download PDF"),s.Qb(),s.Qb(),s.Rb(4,"button",53),s.bc("click",function(){return t.$implicit.close("by: close icon")}),s.Rb(5,"span",54),s.Ic(6,"\xd7"),s.Qb(),s.Qb(),s.Qb(),s.Rb(7,"div",55),s.Rb(8,"div",64),s.Mb(9,"br"),s.Rb(10,"div",56),s.Rb(11,"div",9),s.Rb(12,"div",65),s.Rb(13,"h6",66),s.Ic(14),s.Qb(),s.Qb(),s.Rb(15,"div",10),s.Mb(16,"img",67),s.Qb(),s.Qb(),s.Qb(),s.Mb(17,"hr"),s.Rb(18,"div",56),s.Rb(19,"div",9),s.Rb(20,"div",68),s.Rb(21,"div",9),s.Rb(22,"label",69),s.Ic(23,"Employee :"),s.Qb(),s.Rb(24,"label",70),s.Ic(25),s.Qb(),s.Qb(),s.Qb(),s.Rb(26,"div",68),s.Rb(27,"div",9),s.Rb(28,"label",69),s.Ic(29,"Pay Period :"),s.Qb(),s.Rb(30,"label",70),s.Ic(31),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Rb(32,"div",9),s.Rb(33,"div",68),s.Rb(34,"div",9),s.Rb(35,"label",69),s.Ic(36,"Department :"),s.Qb(),s.Rb(37,"label",70),s.Ic(38),s.Qb(),s.Qb(),s.Qb(),s.Rb(39,"div",68),s.Rb(40,"div",9),s.Rb(41,"label",69),s.Ic(42,"Payslip # :"),s.Qb(),s.Rb(43,"label",70),s.Ic(44),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Mb(45,"hr"),s.Rb(46,"div",56),s.Rb(47,"div",9),s.Rb(48,"div",71),s.Rb(49,"h6",72),s.Ic(50,"Earnings"),s.Qb(),s.Qb(),s.Rb(51,"div",71),s.Rb(52,"h6",72),s.Ic(53,"Deductions"),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Rb(54,"div",56),s.Rb(55,"div",9),s.Rb(56,"div",68),s.Rb(57,"div",73),s.Rb(58,"div",68),s.Rb(59,"h6"),s.Ic(60,"Basic Gross"),s.Qb(),s.Qb(),s.Rb(61,"div",68),s.Rb(62,"h6",74),s.Ic(63),s.ec(64,"number"),s.Qb(),s.Qb(),s.Qb(),s.Rb(65,"div",9),s.Rb(66,"div",68),s.Rb(67,"label"),s.Ic(68,"Regular ND"),s.Qb(),s.Qb(),s.Rb(69,"div",68),s.Rb(70,"p",74),s.Ic(71),s.ec(72,"number"),s.Qb(),s.Qb(),s.Qb(),s.Rb(73,"div",9),s.Rb(74,"div",68),s.Rb(75,"label"),s.Ic(76,"Absent"),s.Qb(),s.Qb(),s.Rb(77,"div",68),s.Rb(78,"p",74),s.Ic(79),s.ec(80,"number"),s.Qb(),s.Qb(),s.Qb(),s.Rb(81,"div",9),s.Rb(82,"div",68),s.Rb(83,"label"),s.Ic(84,"Late"),s.Qb(),s.Qb(),s.Rb(85,"div",68),s.Rb(86,"p",74),s.Ic(87),s.ec(88,"number"),s.Qb(),s.Qb(),s.Qb(),s.Rb(89,"div",9),s.Rb(90,"div",68),s.Rb(91,"label"),s.Ic(92,"Undertime"),s.Qb(),s.Qb(),s.Rb(93,"div",68),s.Rb(94,"p",74),s.Ic(95),s.ec(96,"number"),s.Qb(),s.Qb(),s.Qb(),s.Rb(97,"div",73),s.Rb(98,"div",68),s.Rb(99,"h6"),s.Ic(100,"Basic Salary"),s.Qb(),s.Qb(),s.Rb(101,"div",68),s.Rb(102,"h6",74),s.Ic(103),s.ec(104,"number"),s.Qb(),s.Qb(),s.Qb(),s.Rb(105,"div",75),s.Rb(106,"div",56),s.Rb(107,"h6"),s.Ic(108,"Holiday & Overtime"),s.Qb(),s.Qb(),s.Qb(),s.Gc(109,V,8,5,"div",76),s.ec(110,"filterArray"),s.Rb(111,"div",75),s.Rb(112,"div",56),s.Rb(113,"h6"),s.Ic(114,"Taxable Earnings (+)"),s.Qb(),s.Qb(),s.Qb(),s.Gc(115,E,8,5,"div",76),s.ec(116,"filterArray"),s.Rb(117,"div",75),s.Rb(118,"div",56),s.Rb(119,"h6"),s.Ic(120,"Non-Taxable Earnings (+)"),s.Qb(),s.Qb(),s.Qb(),s.Gc(121,H,8,5,"div",76),s.ec(122,"filterArray"),s.Rb(123,"div",73),s.Rb(124,"div",68),s.Rb(125,"h6"),s.Ic(126,"Gross Pay"),s.Qb(),s.Qb(),s.Rb(127,"div",68),s.Rb(128,"h6",74),s.Ic(129),s.ec(130,"number"),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Rb(131,"div",68),s.Rb(132,"div",9),s.Rb(133,"div",77),s.Rb(134,"h6"),s.Ic(135,"Government Contribution"),s.Qb(),s.Qb(),s.Qb(),s.Rb(136,"div",9),s.Rb(137,"div",68),s.Rb(138,"label"),s.Ic(139,"SSS"),s.Qb(),s.Qb(),s.Rb(140,"div",68),s.Rb(141,"p",74),s.Ic(142),s.ec(143,"number"),s.Qb(),s.Qb(),s.Qb(),s.Rb(144,"div",9),s.Rb(145,"div",68),s.Rb(146,"label"),s.Ic(147,"Pagibig"),s.Qb(),s.Qb(),s.Rb(148,"div",68),s.Rb(149,"p",74),s.Ic(150),s.ec(151,"number"),s.Qb(),s.Qb(),s.Qb(),s.Rb(152,"div",9),s.Rb(153,"div",68),s.Rb(154,"label"),s.Ic(155,"Philhealth"),s.Qb(),s.Qb(),s.Rb(156,"div",68),s.Rb(157,"p",74),s.Ic(158),s.ec(159,"number"),s.Qb(),s.Qb(),s.Qb(),s.Rb(160,"div",78),s.Rb(161,"div",68),s.Rb(162,"h6"),s.Ic(163,"Withholding Tax"),s.Qb(),s.Qb(),s.Rb(164,"div",68),s.Rb(165,"h6",74),s.Ic(166),s.ec(167,"number"),s.Qb(),s.Qb(),s.Qb(),s.Rb(168,"div",79),s.Rb(169,"div",56),s.Rb(170,"h6"),s.Ic(171,"Loan (-)"),s.Qb(),s.Qb(),s.Qb(),s.Gc(172,U,8,5,"div",76),s.ec(173,"filterArray"),s.Rb(174,"div",79),s.Rb(175,"div",56),s.Rb(176,"h6"),s.Ic(177,"Deduction (-)"),s.Qb(),s.Qb(),s.Qb(),s.Gc(178,Y,8,5,"div",76),s.ec(179,"filterArray"),s.Rb(180,"div",78),s.Rb(181,"div",68),s.Rb(182,"h6"),s.Ic(183,"Total Deduction"),s.Qb(),s.Qb(),s.Rb(184,"div",68),s.Rb(185,"h6",74),s.Ic(186),s.ec(187,"number"),s.Qb(),s.Qb(),s.Qb(),s.Rb(188,"div",73),s.Rb(189,"div",68),s.Rb(190,"h6"),s.Ic(191,"Net Pay"),s.Qb(),s.Qb(),s.Rb(192,"div",68),s.Rb(193,"h6",74),s.Ic(194),s.ec(195,"number"),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb()}if(2&e){const e=s.dc();s.yb(14),s.Jc(e.payslipHeader.company_name),s.yb(2),s.kc("src",e.url,s.zc),s.yb(9),s.Jc(e.payslipHeader.display_name),s.yb(6),s.Jc(e.payslipHeader.pay_period),s.yb(7),s.Jc(e.payslipHeader.department),s.yb(6),s.Jc(e.payslipHeader.payroll_code),s.yb(19),s.Kc("P ",s.gc(64,24,e.payslipHeader.salary_rate,"1.2-2"),""),s.yb(8),s.Kc("P ",s.gc(72,27,e.payslipHeader.regnd_ms,"1.2-2"),""),s.yb(8),s.Kc("P (",s.gc(80,30,e.payslipHeader.absent,"1.2-2"),")"),s.yb(8),s.Kc("P (",s.gc(88,33,e.payslipHeader.late,"1.2-2"),")"),s.yb(8),s.Kc("P (",s.gc(96,36,e.payslipHeader.undertime,"1.2-2"),")"),s.yb(8),s.Kc("P ",s.gc(104,39,e.payslipHeader.basic_salary,"1.2-2"),""),s.yb(6),s.jc("ngForOf",s.gc(110,42,e.payslipDetail,1)),s.yb(6),s.jc("ngForOf",s.gc(116,45,e.payslipDetail,2)),s.yb(6),s.jc("ngForOf",s.gc(122,48,e.payslipDetail,3)),s.yb(8),s.Kc("P ",s.gc(130,51,e.payslipHeader.gross_income,"1.2-2"),""),s.yb(13),s.Kc("P (",s.gc(143,54,e.payslipHeader.sss,"1.2-2"),")"),s.yb(8),s.Kc("P (",s.gc(151,57,e.payslipHeader.pagibig,"1.2-2"),")"),s.yb(8),s.Kc("P (",s.gc(159,60,e.payslipHeader.philhealth,"1.2-2"),")"),s.yb(8),s.Kc("P (",s.gc(167,63,e.payslipHeader.witholding_tax,"1.2-2"),")"),s.yb(6),s.jc("ngForOf",s.gc(173,66,e.payslipDetail,4)),s.yb(6),s.jc("ngForOf",s.gc(179,69,e.payslipDetail,5)),s.yb(8),s.Kc("P (",s.gc(187,72,e.payslipHeader.total_deduction,"1.2-2"),")"),s.yb(8),s.Kc("P ",s.gc(195,75,e.payslipHeader.net_salary,"1.2-2"),"")}}let $=(()=>{class e{constructor(e,t,i,n,s){this.attendanceManagementService=e,this.modalService=t,this.filingManagementService=i,this.payrollManagementService=n,this.timekeepingManagementService=s,this.image=o.a.exportUrl,this.payslip=o.a.crystalReport,this.isLoading=!0,this.parentDetail=[],this.isChangeLog=!1,this.isChangeSchedule=!1,this.isLeave=!1,this.isOfficialBusiness=!1,this.isOvertime=!1,this.isOffset=!1,this.filterargs={title:"hello"},this.isApprover="true"==sessionStorage.getItem("ap"),this.reloadApp=!0,this.pipe=new a.e("en-US"),this.calendarEvents=[],this.filingList=[],this.attendanceList=[],this.payslipList=[],this.payslipDetail=[],this.filingTypeList=[{id:0,description:"Change Log"},{id:1,description:"Change Schedule"},{id:2,description:"Leave"},{id:3,description:"Official Business"},{id:4,description:"Overtime"},{id:5,description:"Offset"}],this.count=0,this.fileType=0,this.startDate={day:new Date(sessionStorage.getItem("s")).getDate(),month:new Date(sessionStorage.getItem("s")).getMonth()+1,year:new Date(sessionStorage.getItem("s")).getFullYear()},this.endDate={day:new Date(sessionStorage.getItem("e")).getDate(),month:new Date(sessionStorage.getItem("e")).getMonth()+1,year:new Date(sessionStorage.getItem("e")).getFullYear()},this.dtOptions=[],this.calendarOptions={headerToolbar:{left:"prev,today,next",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},initialView:"dayGridMonth",weekends:!0,editable:!0,selectable:!0,selectMirror:!0,dayMaxEvents:!0,select:this.handleDateSelect.bind(this),eventStartEditable:!1,firstDay:1,customButtons:{prev:{text:"<",click:this.getEventsByMonthBefore.bind(this)},next:{text:">",click:this.getEventsByMonthAfter.bind(this,this)}}},this.currentEvents=[],this.payslipPDF=[]}ngOnInit(){this.isButton="true"==sessionStorage.getItem("ap")==1,this.appTitle="Application",this.dateFrom=this.startDate,this.dateTo=this.endDate,this.isLoading=!1}ngAfterViewInit(){let e=this.calendarComponent.getApi();const t=new Date(e.view.activeStart),i=new Date(e.view.activeEnd);this.attendanceManagementService.dashboardDateView(this.pipe.transform(t,"MM/dd/yyyy"),this.pipe.transform(i,"MM/dd/yyyy")).subscribe(e=>{this.calendarEvents=e,this.calendarComponent.getApi().addEventSource(this.calendarEvents),this.filingManagementService.dashboardView(0,!1).subscribe(e=>{this.filingList=e,this.payrollManagementService.payslipList(sessionStorage.getItem("u")).subscribe(e=>{this.payslipList=e},e=>{console.log(e.error)})},e=>{console.log(e.error)})},e=>{console.log(e.error)})}getEventsByMonthBefore(e,t){let i=this.calendarComponent.getApi();i.prev();const a=new Date(i.view.activeStart),n=new Date(i.view.activeEnd);this.attendanceManagementService.dashboardDateView(this.pipe.transform(a,"MM/dd/yyyy"),this.pipe.transform(n,"MM/dd/yyyy")).subscribe(e=>{i.removeAllEventSources(),i.addEventSource(e),i.render()},e=>{console.log(e.error)})}getEventsByMonthAfter(e,t){let i=this.calendarComponent.getApi();i.next();const a=new Date(i.view.activeStart),n=new Date(i.view.activeEnd);this.attendanceManagementService.dashboardDateView(this.pipe.transform(a,"MM/dd/yyyy"),this.pipe.transform(n,"MM/dd/yyyy")).subscribe(e=>{this.calendarEvents=e,i.removeAllEventSources(),i.addEventSource(e),i.render()},e=>{console.log(e.error)})}handleDateSelect(e){this.resetHidden(!1),this.selectedFiling=null,this.parentDetail.dashboardId=0,this.parentDetail.view=!1,this.parentDetail.dashboardDate=this.pipe.transform(new Date(e.startStr),"MM/dd/yyyy"),this.modalService.open(this.filingModal,{size:"xl"})}selectFiling(){switch(this.resetHidden(!1),this.selectedFiling){case 0:this.isChangeLog=!0;break;case 1:this.isChangeSchedule=!0;break;case 2:this.isLeave=!0;break;case 3:this.isOfficialBusiness=!0;break;case 4:this.isOvertime=!0;break;case 5:this.isOffset=!0}}resetHidden(e){this.isChangeLog=e,this.isChangeSchedule=e,this.isLeave=e,this.isOfficialBusiness=e,this.isOvertime=e,this.isOffset=e}isSuccess(e){if(0!==e.id){this.modalService.dismissAll();let e=this.calendarComponent.getApi();const t=new Date(e.view.activeStart),i=new Date(e.view.activeEnd);this.attendanceManagementService.dashboardDateView(this.pipe.transform(t,"MM/dd/yyyy"),this.pipe.transform(i,"MM/dd/yyyy")).subscribe(t=>{this.calendarEvents=t,e.removeAllEventSources(),e.addEventSource(t),e.render()},e=>{console.log(e.error)})}}next(){this.count++,this.filingManagementService.dashboardView(this.count,this.isApprover).subscribe(e=>{this.filingList=e},e=>{console.log(e.error)})}prev(){this.count--,this.filingManagementService.dashboardView(this.count,this.isApprover).subscribe(e=>{this.filingList=e},e=>{console.log(e.error)})}view(e){const t=this.filingList[e];switch(this.parentDetail.dashboardId=t.id,this.parentDetail.dashboardDate="",this.parentDetail.view=!this.isApprover,this.resetHidden(!1),t.module_id){case 33:this.selectedFiling=0,this.isChangeLog=!0;break;case 32:this.selectedFiling=1,this.isChangeSchedule=!0;break;case 34:this.selectedFiling=2,this.isLeave=!0;break;case 35:this.selectedFiling=3,this.isOfficialBusiness=!0;break;case 36:this.selectedFiling=4,this.isOvertime=!0;break;case 37:this.selectedFiling=5,this.isOffset=!0}this.modalService.open(this.filingModal,{size:"xl"})}reload(){this.reloadApp=!1,this.filingManagementService.dashboardView(this.count,this.isApprover).subscribe(e=>{this.appTitle=!0===this.isApprover?"Approval":"Application",this.isApprover=!0!==this.isApprover,this.filingList=e,this.reloadApp=!0},e=>{console.log(e.error)})}viewLogs(){const e=this.pipe.transform(this.dateFrom.year+"/"+this.dateFrom.month+"/"+this.dateFrom.day,"MM/dd/yyyy"),t=this.pipe.transform(this.dateTo.year+"/"+this.dateTo.month+"/"+this.dateTo.day,"MM/dd/yyyy");this.timekeepingManagementService.employeeTimekeeping(sessionStorage.getItem("u"),e,t).subscribe(e=>{this.modalService.open(this.attendanceModal,{size:"xl"}),this.attendanceList=e,this.dtOptions.generated={data:e,dom:"Bfrtip",buttons:["copy","csv","excel","print"],columns:[{data:"employee_code"},{data:"display_name"},{data:"date",render:function(e){var t=new Date(e),i=t.getMonth()+1;return(i.toString().length>1?i:"0"+i)+"/"+("0"+t.getDate()).slice(-2)+"/"+t.getFullYear()}},{data:"rest_day"},{data:"schedule_time_in"},{data:"schedule_time_out"},{data:"actual_time_in"},{data:"actual_time_out"},{data:"reg"},{data:"late"},{data:"undertime"},{data:"is_absent"},{data:"lwop_hour"},{data:"vl_hour"},{data:"sl_hour"},{data:"otherl_hour"},{data:"regnd"},{data:"ot"},{data:"otnd"},{data:"lhot"},{data:"lhotnd"},{data:"lhot_e8"},{data:"lhotnd_e8"},{data:"lhrdot"},{data:"lhrdotnd"},{data:"lhrdot_e8"},{data:"lhrdotnd_e8"},{data:"shot"},{data:"shotnd"},{data:"shot_e8"},{data:"shotnd_e8"},{data:"shrdot"},{data:"shrdotnd"},{data:"shrdot_e8"},{data:"shrdotnd_e8"},{data:"otrd"},{data:"otrdnd"},{data:"otrd_e8"},{data:"otrdnd_e8"},{data:"dhot"},{data:"dhotnd"},{data:"dhot_e8"},{data:"dhotnd_e8"},{data:"dhrdot"},{data:"dhrdotnd"},{data:"dhrdot_e8"},{data:"dhrdotnd_e8"},{data:"remarks"}]}},e=>{console.log(e.error)})}selectedPayslip(e){this.payrollManagementService.postedView("0",e.posted_payslip_id).subscribe(t=>{this.payslipHeader=t[0],this.url=this.image+this.payslipHeader.company_logo,this.payrollManagementService.payslipDetailList("0",e.posted_payslip_id).subscribe(t=>{this.payslipDetail=t,this.modalService.open(this.payslipModal,{size:"lg"}),this.payslipPDF.push({payroll_header_id:0,posted_payslip_id:e.posted_payslip_id,created_by:sessionStorage.getItem("u"),series_code:sessionStorage.getItem("sc"),employee_id:sessionStorage.getItem("u")})},e=>{console.log(e.error)})},e=>{console.log(e.error)})}openPDF(){window.location.href=this.payslip+"reportviewer.aspx?payroll_header_id="+this.payslipPDF[0].payroll_header_id+"&posted_payslip_id="+this.payslipPDF[0].posted_payslip_id+"&created_by="+this.payslipPDF[0].created_by+"&series_code="+this.payslipPDF[0].series_code+"&employee_id="+this.payslipPDF[0].employee_id}}return e.\u0275fac=function(t){return new(t||e)(s.Lb(c.a),s.Lb(r.j),s.Lb(d.a),s.Lb(l.a),s.Lb(b.a))},e.\u0275cmp=s.Fb({type:e,selectors:[["app-dashboard"]],viewQuery:function(e,t){if(1&e&&(s.Nc(_,!0),s.Nc(D,!0),s.Nc(M,!0),s.Nc(F,!0),s.Nc(S,!0),s.Nc(n.a,!0)),2&e){let e;s.uc(e=s.cc())&&(t.calendarComponent=e.first),s.uc(e=s.cc())&&(t.filingModal=e.first),s.uc(e=s.cc())&&(t.attendanceModal=e.first),s.uc(e=s.cc())&&(t.payslipModal=e.first),s.uc(e=s.cc())&&(t.htmlData=e.first),s.uc(e=s.cc())&&(t.dtElement=e.first)}},decls:8,vars:2,consts:[["class","spinner-wrapper",4,"ngIf"],["class","animate__animated animate__fadeInUp",4,"ngIf"],["attendanceModal",""],["filingModal",""],["payslipModal",""],[1,"spinner-wrapper"],[1,"spinner"],[1,"animate__animated","animate__fadeInUp"],["href",s.Mc("https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"),"rel","stylesheet"],[1,"row"],[1,"col-md-4"],[1,"card"],[1,"card-header"],[1,"d-flex","justify-content-between","align-items-baseline","mb-2"],[1,"card-title","mb-0"],["class","mb-2",4,"ngIf"],[1,"card-body","scroll"],["class","animate__animated animate__flipInY ",4,"ngIf"],[1,"card-footer"],[1,"nav","justify-content-end"],[1,"btn","btn-primary","btn-icon-text",3,"click"],["data-feather","arrow-left","appFeatherIcon","",1,"btn-icon-prepend"],["data-feather","arrow-right","appFeatherIcon","",1,"btn-icon-prepend"],[1,"card-body"],[1,"form-group"],[1,"control-label"],["type","button",1,"btn","btn-sm","btn-primary","pull-right",3,"click"],[1,"input-group"],["placeholder","mm/dd/yyyy","name","dp","value","dateFrom","ngbDatepicker","",1,"form-control",3,"ngModel","ngModelChange","click"],["d","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-light","btn-icon","calendar",3,"click"],["data-feather","calendar","appFeatherIcon","",1,"text-secondary"],["placeholder","mm/dd/yyyy","name","dp","ngbDatepicker","",1,"form-control",3,"ngModel","ngModelChange","click"],["dt","ngbDatepicker"],["bindLabel","posted_payslip_code","bindValue","posted_payslip_id","placeholder","Select Payslip",3,"items","change"],[1,"col-md-8"],[3,"options"],["calendar",""],[1,"card-title"],[1,"mb-2"],["type","button","id","dropdownMenuButton6",1,"btn","p-0","no-dropdown-toggle-icon",3,"click"],["data-feather","repeat","appFeatherIcon","",1,"icon-lg","text-muted","pb-3px"],[1,"animate__animated","animate__flipInY"],[1,"list-group","list-group-flush"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"],[1,"col-md-9"],[1,"col-md-3"],[3,"click"],[1,"badge"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-md-12"],[1,"table-responsive"],["id","modalTable","datatable","",1,"table",3,"dtOptions"],["name","Filing Type","bindLabel","description","bindValue","id","placeholder","Select Filing Type",3,"items","ngModel","ngModelChange","change"],["class","col-md-12",4,"ngIf"],[3,"parentDetail","fileType","isSuccess"],[1,"modal-title"],[1,"btn","btn-success","btn-block",3,"click"],["id","htmlData"],[1,"col-md-8","align-self-center"],[1,""],[2,"width","150px","height","100px",3,"src"],[1,"col-md-6"],[1,"col-sm-4"],[1,"col-sm-8",2,"font-weight","lighter"],[1,"col-md-6","alert","alert-fill-secondary"],[1,"text-center"],[1,"row","alert","alert-success",2,"padding-left","0","padding-right","0","padding-top","5px","padding-bottom","5px"],[1,"text-right"],[1,"row","alert","alert-info",2,"padding-left","0","padding-right","0","padding-top","5px","padding-bottom","5px"],["class","row",4,"ngFor","ngForOf"],[1,"col-md-12","alert","alert-warning",2,"padding-left","0","padding-right","0","padding-top","5px","padding-bottom","5px"],[1,"row","alert","alert-danger",2,"padding-left","0","padding-right","0","padding-top","5px","padding-bottom","5px"],[1,"row","alert","alert-warning",2,"padding-left","0","padding-right","0","padding-top","5px","padding-bottom","5px"]],template:function(e,t){1&e&&(s.Gc(0,w,3,0,"div",0),s.Gc(1,C,53,7,"div",1),s.Gc(2,L,110,1,"ng-template",null,2,s.Hc),s.Gc(4,N,20,8,"ng-template",null,3,s.Hc),s.Gc(6,J,196,78,"ng-template",null,4,s.Hc)),2&e&&(s.jc("ngIf",t.isLoading),s.yb(1),s.jc("ngIf",!t.isLoading))},directives:[a.n,h.a,r.i,u.b,u.i,u.l,f.a,p.a,a.m,n.a,m.a,g.a,y.a,v.a,R.a,Q.a],pipes:[a.f,I],styles:[".scroll[_ngcontent-%COMP%]{height:350px;overflow:scroll}.dasboard-button[_ngcontent-%COMP%]{background-color:transparent;background-repeat:no-repeat;border:none;cursor:pointer;overflow:hidden;outline:none}"]}),e})();var K=i("PN1e"),W=i("ogxq"),z=i("tyNb"),X=i("tyVc"),q=i("EDFS"),Z=i("kUHs");p.b.registerPlugins([K.a,W.a]);const ee=[{path:"",component:$}];let te=(()=>{class e{}return e.\u0275mod=s.Jb({type:e}),e.\u0275inj=s.Ib({factory:function(t){return new(t||e)},imports:[[a.c,u.f,u.p,z.g.forChild(ee),X.a,f.b,q.b.forRoot(),r.k,n.b,Z.b.forRoot(),r.g,r.d,p.b]]}),e})()},"4rDk":function(e,t,i){"use strict";i.d(t,"a",function(){return T});var a=i("ofXK"),n=i("fXoL"),o=i("PSD3"),s=i.n(o),c=i("AytR"),r=i("3Pt+"),d=i("tyNb"),l=i("xNm2"),b=i("MR3p"),h=i("1kSV"),u=i("IYwT");const f=["overtimeModal"],p=["cancelModal"];function m(e,t){1&e&&(n.Rb(0,"div",4),n.Rb(1,"div",5),n.Ic(2,"Loading..."),n.Qb(),n.Qb())}function g(e,t){1&e&&(n.Rb(0,"nav",40),n.Rb(1,"ol",41),n.Rb(2,"li",42),n.Rb(3,"a",43),n.Ic(4,"Filing"),n.Qb(),n.Qb(),n.Rb(5,"li",42),n.Rb(6,"a",44),n.Ic(7,"Offset"),n.Qb(),n.Qb(),n.Rb(8,"li",45),n.Ic(9,"Detail"),n.Qb(),n.Qb(),n.Qb())}function y(e,t){1&e&&(n.Rb(0,"p",46),n.Ic(1,"Reason is needed!"),n.Qb())}function v(e,t){if(1&e){const e=n.Sb();n.Rb(0,"div",47),n.Rb(1,"div",48),n.Rb(2,"div",49),n.Rb(3,"h6",50),n.Rb(4,"a",51),n.Mb(5,"i"),n.Ic(6),n.Qb(),n.Qb(),n.Rb(7,"p",52),n.Rb(8,"i",53),n.bc("click",function(){n.xc(e);const i=t.index;return n.dc(2).deleteDocument(i)}),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb()}if(2&e){const e=t.$implicit;n.yb(4),n.kc("href",e.url,n.zc),n.yb(1),n.Ab(e.file_class),n.yb(1),n.Jc(e.file_name)}}function R(e,t){if(1&e){const e=n.Sb();n.Rb(0,"button",58),n.bc("click",function(){return n.xc(e),n.dc(3).cancel()}),n.Mb(1,"i",59),n.Ic(2," Cancel "),n.Qb()}}function Q(e,t){if(1&e){const e=n.Sb();n.Rb(0,"button",60),n.bc("click",function(){return n.xc(e),n.dc(3).submit()}),n.Mb(1,"i",61),n.Ic(2," Save Changes "),n.Qb()}}function I(e,t){if(1&e&&(n.Rb(0,"div",54),n.Rb(1,"ul",55),n.Gc(2,R,3,0,"button",56),n.Ic(3," \xa0 "),n.Gc(4,Q,3,0,"button",57),n.Qb(),n.Qb()),2&e){const e=n.dc(2);n.yb(2),n.jc("ngIf",e.isCancel),n.yb(2),n.jc("ngIf",e.isSubmit)}}function _(e,t){if(1&e){const e=n.Sb();n.Rb(0,"tr"),n.Rb(1,"td"),n.Ic(2),n.Qb(),n.Rb(3,"td"),n.Ic(4),n.Qb(),n.Rb(5,"td"),n.Ic(6),n.Qb(),n.Rb(7,"td"),n.Ic(8),n.Qb(),n.Rb(9,"td"),n.Ic(10),n.Qb(),n.Rb(11,"td"),n.Rb(12,"button",62),n.bc("click",function(){n.xc(e);const i=t.$implicit;return n.dc(2).editOvertime(i.overtime_id)}),n.Mb(13,"i",63),n.Qb(),n.Qb(),n.Qb()}if(2&e){const e=t.$implicit;n.yb(2),n.Jc(e.overtime_code),n.yb(2),n.Jc(e.overtime_hour),n.yb(2),n.Jc(e.offset_used),n.yb(2),n.Jc(e.offset_hour),n.yb(2),n.Jc(e.balance_hour)}}function D(e,t){if(1&e){const e=n.Sb();n.Rb(0,"div",6),n.Gc(1,g,10,0,"nav",7),n.Rb(2,"div",8),n.Rb(3,"div",9),n.Rb(4,"div",10),n.Rb(5,"div",11),n.Rb(6,"h6",12),n.Ic(7,"Offset"),n.Qb(),n.Qb(),n.Rb(8,"form",13),n.Rb(9,"div",14),n.Rb(10,"div",15),n.Rb(11,"label",16),n.Ic(12,"Reason"),n.Qb(),n.Mb(13,"input",17),n.Gc(14,y,2,0,"p",18),n.Qb(),n.Rb(15,"div",8),n.Rb(16,"div",19),n.Rb(17,"div",15),n.Rb(18,"label",16),n.Ic(19,"Offset Date"),n.Qb(),n.Rb(20,"div",20),n.Rb(21,"input",21,22),n.bc("click",function(){return n.xc(e),n.vc(22).toggle()}),n.Qb(),n.Rb(23,"div",23),n.Rb(24,"button",24),n.bc("click",function(){return n.xc(e),n.vc(22).toggle()}),n.Mb(25,"i",25),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Rb(26,"div",19),n.Rb(27,"div",15),n.Rb(28,"label",16),n.Ic(29,"Offset Minutes"),n.Qb(),n.Mb(30,"input",26),n.Qb(),n.Qb(),n.Qb(),n.Mb(31,"hr"),n.Rb(32,"div",15),n.Rb(33,"input",27,28),n.bc("change",function(t){return n.xc(e),n.dc().uploadFile(t)}),n.Qb(),n.Rb(35,"div",29),n.bc("click",function(t){return n.xc(e),n.dc().openFileBrowser(t)}),n.Mb(36,"input",30),n.Rb(37,"span",23),n.Rb(38,"button",31),n.Ic(39,"Upload"),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Rb(40,"div",32),n.Rb(41,"div",33),n.Gc(42,v,9,5,"div",34),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Gc(43,I,5,2,"div",35),n.Qb(),n.Qb(),n.Rb(44,"div",36),n.Rb(45,"div",10),n.Rb(46,"div",11),n.Rb(47,"h6",12),n.Ic(48,"Overtime List"),n.Qb(),n.Qb(),n.Rb(49,"div",14),n.Rb(50,"div",37),n.Rb(51,"table",38),n.Rb(52,"thead"),n.Rb(53,"tr"),n.Rb(54,"th"),n.Ic(55,"Overtime Code"),n.Qb(),n.Rb(56,"th"),n.Ic(57,"Overtime Min(s)"),n.Qb(),n.Rb(58,"th"),n.Ic(59,"Offset Used Min(s)"),n.Qb(),n.Rb(60,"th"),n.Ic(61,"Offset Min(s)"),n.Qb(),n.Rb(62,"th"),n.Ic(63,"Balance Min(s)"),n.Qb(),n.Rb(64,"th"),n.Ic(65,"Action"),n.Qb(),n.Qb(),n.Qb(),n.Rb(66,"tbody"),n.Gc(67,_,14,5,"tr",39),n.Qb(),n.Mb(68,"tfoot"),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb()}if(2&e){const e=n.dc();n.yb(1),n.jc("ngIf",!e.isDashboard),n.yb(7),n.jc("formGroup",e.offsetForm),n.yb(6),n.jc("ngIf",e.errReason),n.yb(28),n.jc("ngForOf",e.documents),n.yb(1),n.jc("ngIf",!e.isView),n.yb(24),n.jc("ngForOf",e.otList)}}function M(e,t){if(1&e&&(n.Rb(0,"p",46),n.Ic(1),n.Qb()),2&e){const e=n.dc(2);n.yb(1),n.Jc(e.errOffsetText)}}function F(e,t){if(1&e){const e=n.Sb();n.Rb(0,"div",64),n.Rb(1,"h5",65),n.Ic(2,"Overtime Detail"),n.Qb(),n.Rb(3,"button",66),n.bc("click",function(){return t.$implicit.close("by: close icon")}),n.Rb(4,"span",67),n.Ic(5,"\xd7"),n.Qb(),n.Qb(),n.Qb(),n.Rb(6,"div",68),n.Rb(7,"form",13),n.Rb(8,"div",8),n.Rb(9,"div",19),n.Rb(10,"div",15),n.Rb(11,"label",16),n.Ic(12,"Overtime Code"),n.Qb(),n.Mb(13,"input",69),n.Qb(),n.Qb(),n.Rb(14,"div",19),n.Rb(15,"div",15),n.Rb(16,"label",16),n.Ic(17,"Balance"),n.Qb(),n.Mb(18,"input",70),n.Qb(),n.Qb(),n.Qb(),n.Rb(19,"div",8),n.Rb(20,"div",19),n.Rb(21,"div",15),n.Rb(22,"label",16),n.Ic(23,"Date From"),n.Qb(),n.Mb(24,"input",71),n.Qb(),n.Qb(),n.Rb(25,"div",19),n.Rb(26,"div",15),n.Rb(27,"label",16),n.Ic(28,"Date To"),n.Qb(),n.Mb(29,"input",72),n.Qb(),n.Qb(),n.Qb(),n.Rb(30,"div",8),n.Rb(31,"div",19),n.Rb(32,"div",15),n.Rb(33,"label",16),n.Ic(34,"Used Minutes"),n.Qb(),n.Mb(35,"input",73),n.Qb(),n.Qb(),n.Rb(36,"div",19),n.Rb(37,"div",15),n.Rb(38,"label",16),n.Ic(39,"Offset Minutes"),n.Qb(),n.Rb(40,"input",74),n.bc("keyup",function(){return n.xc(e),n.dc().setOffset()}),n.Qb(),n.Gc(41,M,2,1,"p",18),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Rb(42,"div",75),n.Rb(43,"button",76),n.bc("click",function(){return t.$implicit.close("by: close button")}),n.Ic(44,"Close"),n.Qb(),n.Rb(45,"button",77),n.bc("click",function(){return n.xc(e),n.dc().updateOvertime()}),n.Ic(46,"Save changes"),n.Qb(),n.Qb()}if(2&e){const e=n.dc();n.yb(7),n.jc("formGroup",e.overtimeForm),n.yb(34),n.jc("ngIf",e.errOffsetHour)}}function S(e,t){1&e&&(n.Rb(0,"p",46),n.Ic(1,"Reason is needed!"),n.Qb())}function w(e,t){if(1&e){const e=n.Sb();n.Rb(0,"div",64),n.Rb(1,"h5",65),n.Ic(2,"Cancellation"),n.Qb(),n.Rb(3,"button",66),n.bc("click",function(){return t.$implicit.close("by: close icon")}),n.Rb(4,"span",67),n.Ic(5,"\xd7"),n.Qb(),n.Qb(),n.Qb(),n.Rb(6,"div",68),n.Rb(7,"div",8),n.Rb(8,"div",78),n.Rb(9,"div",15),n.Rb(10,"label",16),n.Ic(11,"Reason"),n.Qb(),n.Rb(12,"textarea",79),n.bc("ngModelChange",function(t){return n.xc(e),n.dc().remarks=t}),n.Qb(),n.Gc(13,S,2,0,"p",18),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Rb(14,"div",75),n.Rb(15,"button",76),n.bc("click",function(){return t.$implicit.close("by: close button")}),n.Ic(16,"Close"),n.Qb(),n.Rb(17,"button",80),n.bc("click",function(){return n.xc(e),n.dc().cancelTransaction()}),n.Ic(18,"Cancel"),n.Qb(),n.Qb()}if(2&e){const e=n.dc();n.yb(12),n.jc("ngModel",e.remarks),n.yb(1),n.jc("ngIf",e.errCancelReason)}}let T=(()=>{class e{constructor(e,t,i,o,s){this.fb=e,this.route=t,this.filingManagementService=i,this.fileManagerService=o,this.modalService=s,this.uri=c.a.exportFile,this.isLoading=!0,this.errCancelReason=!1,this.isCancel=!1,this.isSubmit=!1,this.documents=[],this.fileList=[],this.otList=[],this.selectedOT=[],this.dateToday={day:new Date(new Date).getDate(),month:new Date(new Date).getMonth()+1,year:new Date(new Date).getFullYear()},this.pipe=new a.e("en-US"),this.isSuccess=new n.n,this.fileType=0,this.isDashboard=!1,this.isView=!1,this.remarks="",this.transactionID=""}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.offsetForm=this.fb.group({reason:"",offsetDate:this.dateToday,offsetHour:{value:0,disabled:!0},offset_code:""}),void 0!==this.parentDetail&&(this.isDashboard=!0,this.isView=this.parentDetail.view,0!==this.parentDetail.dashboardId?this.id=this.parentDetail.dashboardId:(this.id="",this.offsetForm.get("offsetDate").setValue({year:new Date(this.parentDetail.dashboardDate).getFullYear(),month:new Date(this.parentDetail.dashboardDate).getMonth()+1,day:new Date(this.parentDetail.dashboardDate).getDate()}))),this.overtimeForm=this.fb.group({overtimeID:0,overtimeCode:"",balance:0,dateFrom:"",dateTo:"",overtimeHour:0,offsetUsed:0,offsetHour:0}),""!==this.id?(this.isCancel=!0,this.isSubmit=!0,this.filingManagementService.offsetDetailView(this.id,this.fileType).subscribe(e=>{this.otList=e,this.filingManagementService.offsetView(this.id,this.fileType).subscribe(e=>{this.transactionID=e[0].offset_id,this.offsetForm.setValue({reason:e[0].reason,offsetDate:{year:new Date(e[0].date).getFullYear(),month:new Date(e[0].date).getMonth()+1,day:new Date(e[0].date).getDate()},offsetHour:e[0].offset_hour,offset_code:e[0].offset_code}),this.fileManagerService.viewFile(37,this.id,this.fileType).subscribe(t=>{for(var i=0;i<t.length;i++)this.documents.push({created_by:t[i].created_by,date_created:t[i].date_created,file_name:t[i].file_name,file_path:t[i].file_path,file_type:t[i].file_type,file_class:t[i].file_class,module_id:t[i].module_id,transaction_id:t[i].transaction_id,url:this.uri+t[i].file_path});e[0].active||(this.isView=!0),this.isLoading=!1},e=>{console.log(e.error)})},e=>{console.log(e.error)})},e=>{console.log(e.error)})):(this.id="0",this.filingManagementService.offsetDetailView(this.id,this.fileType).subscribe(e=>{this.otList=e,this.isLoading=!1,this.isCancel=!1,this.isSubmit=!0},e=>{console.log(e.error)}))}editOvertime(e){this.selectedOT=this.otList.filter(t=>t.overtime_id===e)[0],this.modalService.open(this.overtimeModal,{size:"xs"}),this.overtimeForm.setValue({overtimeID:this.selectedOT.overtime_id,overtimeCode:this.selectedOT.overtime_code,balance:this.selectedOT.balance_hour,dateFrom:this.selectedOT.date_from,dateTo:this.selectedOT.date_to,overtimeHour:this.selectedOT.overtime_hour,offsetHour:this.selectedOT.offset_used,offsetUsed:this.selectedOT.offset_hour})}setOffset(){this.errOffsetHour=!1,this.errOffsetText="";var e=Number(this.overtimeForm.get("overtimeHour").value),t=Number(this.overtimeForm.get("offsetHour").value),i=Number(this.overtimeForm.get("offsetUsed").value);""===this.overtimeForm.get("offsetUsed").value||null===this.overtimeForm.get("offsetUsed").value?(this.errOffsetHour=!0,this.errOffsetText="Please input number"):(e-(t+i)<0||t+i>e)&&(this.errOffsetHour=!0,this.errOffsetText="Insufficient overtime minutes")}updateOvertime(){if(!this.errOffsetHour){const t=this.otList.findIndex(e=>e.overtime_id===this.overtimeForm.get("overtimeID").value);this.otList[t].offset_hour=this.overtimeForm.get("offsetUsed").value;const i=this.otList.filter(e=>e.offset_hour>0);let a=0;for(var e=0;e<i.length;e++)a+=Number(i[e].offset_hour);this.offsetForm.get("offsetHour").setValue(a),this.modalService.dismissAll()}}openFileBrowser(e){e.preventDefault(),document.querySelector("#fileUploadInputExample").click(),e.target.files&&e.target.files&&((new FileReader).readAsDataURL(e.target.files),this.fileList=e.target.files)}uploadFile(e){if(e.target.files.length){let i=document.querySelector("#fileUploadInputExample + .input-group .file-upload-info"),a="";for(var t=0;t<e.target.files.length;t++)a+=e.target.files[t].name+" ";i.setAttribute("value",a),this.fileList=e.target.files}}deleteDocument(e){this.documents.splice(e,1)}validation(){var e=!0;return""===this.offsetForm.get("reason").value||null===this.offsetForm.get("reason").value?(e=!1,this.errReason=!0):this.errReason=!1,e}submit(){this.validation()&&s.a.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showLoaderOnConfirm:!0}).then(e=>{e.isConfirmed&&s.a.fire({title:"Please Wait !",allowOutsideClick:!1,onBeforeOpen:()=>{s.a.showLoading();var e=[];const t=this.otList.filter(e=>e.offset_hour>0);for(var i=0;i<t.length;i++)e.push({overtime_id:t[i].overtime_id,offset_hour:t[i].offset_hour});var a={offset_id:this.id,offset_code:this.offsetForm.get("offset_code").value,reason:this.offsetForm.get("reason").value,offset_hour:this.offsetForm.get("offsetHour").value,date:this.pipe.transform(this.offsetForm.get("offsetDate").value.year+"/"+this.offsetForm.get("offsetDate").value.month+"/"+this.offsetForm.get("offsetDate").value.day,"MM/dd/yyyy"),created_by:sessionStorage.getItem("u"),active:!0,approval_level_id:sessionStorage.getItem("apl"),series_code:sessionStorage.getItem("sc"),category_id:sessionStorage.getItem("cat"),OffsetDetail:e};this.filingManagementService.offsetIU(a).subscribe(e=>{if(0===e.id)s.a.fire("Failed!",e.description,"error");else{for(var t=[],i=0;i<this.documents.length;i++)t.push({created_by:sessionStorage.getItem("u"),series_code:sessionStorage.getItem("sc"),file_name:this.documents[i].file_name,file_path:this.documents[i].file_path,file_type:this.documents[i].file_type,module_id:this.documents[i].module_id,transaction_id:e.id});this.fileManagerService.updateFile(t).subscribe(t=>{if(void 0!==this.fileList){let t=this.fileList;const i=new FormData;Array.from(t).map((e,t)=>i.append("formfile",e,e.name)),this.fileManagerService.uploadFile(i,e.code,37,e.id).subscribe(t=>{0===t?s.a.fire("Failed!","File Upload Failed","error"):(s.a.fire("Ok!",e.description,"success"),this.isDashboard&&this.isSuccess.emit(e))},e=>{console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}else s.a.fire("Ok!",e.description,"success"),this.isDashboard&&this.isSuccess.emit(e)},e=>{console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}},e=>{console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}})})}cancel(){this.modalService.open(this.viewModal,{size:"sm"})}cancelTransaction(){s.a.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showLoaderOnConfirm:!0}).then(e=>{e.isConfirmed&&s.a.fire({title:"Please Wait !",allowOutsideClick:!1,onBeforeOpen:()=>{s.a.showLoading();var e={module_id:37,transaction_id:this.transactionID+",",remarks:this.remarks,created_by:sessionStorage.getItem("u"),series_code:sessionStorage.getItem("sc")};this.filingManagementService.cancel(e).subscribe(e=>{0===e?s.a.fire("Failed!","Transaction failed!","error"):(s.a.fire("Ok!","Transaction successful!","success"),this.modalService.dismissAll(),this.isView=!0)},e=>{console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}})})}}return e.\u0275fac=function(t){return new(t||e)(n.Lb(r.c),n.Lb(d.a),n.Lb(l.a),n.Lb(b.a),n.Lb(h.j))},e.\u0275cmp=n.Fb({type:e,selectors:[["app-offset-detail"]],viewQuery:function(e,t){if(1&e&&(n.Nc(f,!0),n.Nc(p,!0)),2&e){let e;n.uc(e=n.cc())&&(t.overtimeModal=e.first),n.uc(e=n.cc())&&(t.viewModal=e.first)}},inputs:{parentDetail:"parentDetail",fileType:"fileType"},outputs:{isSuccess:"isSuccess"},decls:6,vars:2,consts:[["class","spinner-wrapper",4,"ngIf"],["class","animate__animated animate__fadeInUp",4,"ngIf"],["overtimeModal",""],["cancelModal",""],[1,"spinner-wrapper"],[1,"spinner"],[1,"animate__animated","animate__fadeInUp"],["class","page-breadcrumb",4,"ngIf"],[1,"row"],[1,"col-md-5","grid-margin"],[1,"card"],[1,"card-header"],[1,"card-title"],[3,"formGroup"],[1,"card-body"],[1,"form-group"],[1,"control-label"],["type","text","formControlName","reason","placeholder","Reason",1,"form-control"],["class","text-danger mt-1",4,"ngIf"],[1,"col-md-6"],[1,"input-group"],["placeholder","mm/dd/yyyy","name","dp","formControlName","offsetDate","value","dateFrom","ngbDatepicker","",1,"form-control",3,"click"],["d","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-light","btn-icon","calendar",3,"click"],["data-feather","calendar","appFeatherIcon","",1,"text-secondary"],["type","text","formControlName","offsetHour","placeholder","Reason",1,"form-control"],["multiple","","placeholder","Choose file","type","file","id","fileUploadInputExample",1,"file-upload-default",3,"change"],["file",""],[1,"input-group","col-xs-12",3,"click"],["type","text","disabled","","placeholder","Upload Files",1,"form-control","file-upload-info"],["type","button",1,"file-upload-browse","btn","btn-primary"],[1,"container"],[1,"row","icons-list"],["class","col-sm-6",4,"ngFor","ngForOf"],["class","card-footer",4,"ngIf"],[1,"col-md-7","grid-margin"],[1,"table-responsive"],["id","dataTableExample",1,"table"],[4,"ngFor","ngForOf"],[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["routerLink","/layout/filing/offset-view"],["aria-current","page",1,"breadcrumb-item","active"],[1,"text-danger","mt-1"],[1,"col-sm-6"],[1,"w-100"],[1,"d-flex","justify-content-between"],[1,"text-body","mb-2"],["target","_blank",3,"href"],[1,"text-muted","tx-12"],[1,"mdi","mdi-close",3,"click"],[1,"card-footer"],[1,"nav","justify-content-end"],["class","btn btn-warning btn-icon-text",3,"click",4,"ngIf"],["class","btn btn-primary btn-icon-text",3,"click",4,"ngIf"],[1,"btn","btn-warning","btn-icon-text",3,"click"],["data-feather","rotate-cw","appFeatherIcon","",1,"btn-icon-prepend"],[1,"btn","btn-primary","btn-icon-text",3,"click"],["data-feather","save","appFeatherIcon","",1,"btn-icon-prepend"],["type","button","title","Edit",1,"btn","btn-sm","btn-primary","btn-icon",3,"click"],[1,"feather","icon-edit-2"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["type","text","formControlName","overtimeCode","readonly","","placeholder","Overtime Code",1,"form-control"],["type","text","formControlName","balance","readonly","","placeholder","Balance",1,"form-control"],["type","text","formControlName","dateFrom","readonly","","placeholder","Date From",1,"form-control"],["type","text","formControlName","dateTo","readonly","","placeholder","Date To",1,"form-control"],["type","text","formControlName","offsetHour","readonly","","placeholder","Used Minutes",1,"form-control"],["type","number","formControlName","offsetUsed","placeholder","Offset Minutes",1,"form-control",3,"keyup"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"col-md-12"],["type","text","rows","3","placeholder","Reason",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-warning",3,"click"]],template:function(e,t){1&e&&(n.Gc(0,m,3,0,"div",0),n.Gc(1,D,69,6,"div",1),n.Gc(2,F,47,2,"ng-template",null,2,n.Hc),n.Gc(4,w,19,2,"ng-template",null,3,n.Hc)),2&e&&(n.jc("ngIf",t.isLoading),n.yb(1),n.jc("ngIf",!t.isLoading))},directives:[a.n,r.s,r.j,r.e,r.b,r.i,r.d,h.i,u.a,a.m,d.f,r.n,r.l],styles:[""]}),e})()},EIwK:function(e,t,i){"use strict";i.d(t,"a",function(){return w});var a=i("ofXK"),n=i("fXoL"),o=i("PSD3"),s=i.n(o),c=i("AytR"),r=i("H6xj"),d=i("xNm2"),l=i("MR3p"),b=i("3Pt+"),h=i("tyNb"),u=i("1kSV"),f=i("ZOsW"),p=i("IYwT");const m=["cancelModal"];function g(e,t){1&e&&(n.Rb(0,"div",3),n.Rb(1,"div",4),n.Ic(2,"Loading..."),n.Qb(),n.Qb())}function y(e,t){1&e&&(n.Rb(0,"nav",45),n.Rb(1,"ol",46),n.Rb(2,"li",47),n.Rb(3,"a",48),n.Ic(4,"Filing"),n.Qb(),n.Qb(),n.Rb(5,"li",47),n.Rb(6,"a",49),n.Ic(7,"Leave"),n.Qb(),n.Qb(),n.Rb(8,"li",50),n.Ic(9,"Detail"),n.Qb(),n.Qb(),n.Qb())}function v(e,t){1&e&&(n.Rb(0,"p",51),n.Ic(1,"Leave Type is needed!"),n.Qb())}function R(e,t){1&e&&(n.Rb(0,"p",51),n.Ic(1,"Reason is needed!"),n.Qb())}function Q(e,t){if(1&e){const e=n.Sb();n.Rb(0,"div",52),n.Rb(1,"div",53),n.Rb(2,"div",54),n.Rb(3,"h6",55),n.Rb(4,"a",56),n.Mb(5,"i"),n.Ic(6),n.Qb(),n.Qb(),n.Rb(7,"p",57),n.Rb(8,"i",58),n.bc("click",function(){n.xc(e);const i=t.index;return n.dc(2).deleteDocument(i)}),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb()}if(2&e){const e=t.$implicit;n.yb(4),n.kc("href",e.url,n.zc),n.yb(1),n.Ab(e.file_class),n.yb(1),n.Jc(e.file_name)}}function I(e,t){if(1&e){const e=n.Sb();n.Rb(0,"button",63),n.bc("click",function(){return n.xc(e),n.dc(3).cancel()}),n.Mb(1,"i",64),n.Ic(2," Cancel "),n.Qb()}}function _(e,t){if(1&e){const e=n.Sb();n.Rb(0,"button",65),n.bc("click",function(){return n.xc(e),n.dc(3).submit()}),n.Mb(1,"i",66),n.Ic(2," Save Changes "),n.Qb()}}function D(e,t){if(1&e&&(n.Rb(0,"div",59),n.Rb(1,"ul",60),n.Gc(2,I,3,0,"button",61),n.Ic(3," \xa0 "),n.Gc(4,_,3,0,"button",62),n.Qb(),n.Qb()),2&e){const e=n.dc(2);n.yb(2),n.jc("ngIf",e.isCancel),n.yb(2),n.jc("ngIf",e.isSubmit)}}function M(e,t){if(1&e){const e=n.Sb();n.Rb(0,"div",5),n.Gc(1,y,10,0,"nav",6),n.Rb(2,"div",7),n.Rb(3,"div",8),n.Rb(4,"div",9),n.Rb(5,"form",10),n.Rb(6,"div",11),n.Rb(7,"h6",12),n.Ic(8,"Leave"),n.Qb(),n.Rb(9,"div",7),n.Rb(10,"div",13),n.Rb(11,"div",14),n.Rb(12,"label",15),n.Ic(13,"Leave Type"),n.Qb(),n.Rb(14,"ng-select",16),n.bc("change",function(){return n.xc(e),n.dc().selectLeave()}),n.Qb(),n.Gc(15,v,2,0,"p",17),n.Qb(),n.Qb(),n.Rb(16,"div",18),n.Rb(17,"div",14),n.Rb(18,"label",15),n.Ic(19,"Balance"),n.Qb(),n.Mb(20,"input",19),n.Qb(),n.Qb(),n.Rb(21,"div",13),n.Rb(22,"div",14),n.Rb(23,"div",20),n.Mb(24,"input",21),n.Rb(25,"label",22),n.Ic(26,"With Pay?"),n.Qb(),n.Qb(),n.Rb(27,"div",20),n.Mb(28,"input",23),n.Rb(29,"label",24),n.Ic(30,"Halfday?"),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Rb(31,"div",7),n.Rb(32,"div",25),n.Rb(33,"div",14),n.Rb(34,"label",15),n.Ic(35,"Date From"),n.Qb(),n.Rb(36,"div",26),n.Rb(37,"input",27,28),n.bc("click",function(){return n.xc(e),n.vc(38).toggle()}),n.Qb(),n.Rb(39,"div",29),n.Rb(40,"button",30),n.bc("click",function(){return n.xc(e),n.vc(38).toggle()}),n.Mb(41,"i",31),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Rb(42,"div",25),n.Rb(43,"div",14),n.Rb(44,"label",15),n.Ic(45,"Date To"),n.Qb(),n.Rb(46,"div",26),n.Rb(47,"input",32,33),n.bc("click",function(){return n.xc(e),n.vc(48).toggle()}),n.Qb(),n.Rb(49,"div",29),n.Rb(50,"button",30),n.bc("click",function(){return n.xc(e),n.vc(48).toggle()}),n.Mb(51,"i",31),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Rb(52,"div",34),n.Rb(53,"div",14),n.Rb(54,"label",15),n.Ic(55,"Reason"),n.Qb(),n.Mb(56,"input",35),n.Gc(57,R,2,0,"p",17),n.Qb(),n.Qb(),n.Qb(),n.Mb(58,"hr"),n.Rb(59,"div",7),n.Rb(60,"div",34),n.Rb(61,"div",14),n.Rb(62,"input",36,37),n.bc("change",function(t){return n.xc(e),n.dc().uploadFile(t)}),n.Qb(),n.Rb(64,"div",38),n.bc("click",function(t){return n.xc(e),n.dc().openFileBrowser(t)}),n.Mb(65,"input",39),n.Rb(66,"span",29),n.Rb(67,"button",40),n.Ic(68,"Upload"),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Rb(69,"div",34),n.Rb(70,"div",41),n.Rb(71,"div",42),n.Gc(72,Q,9,5,"div",43),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Gc(73,D,5,2,"div",44),n.Qb(),n.Qb(),n.Qb(),n.Qb()}if(2&e){const e=n.dc();n.yb(1),n.jc("ngIf",!e.isDashboard),n.yb(4),n.jc("formGroup",e.leaveForm),n.yb(9),n.jc("items",e.leaveList),n.yb(1),n.jc("ngIf",e.errleaveType),n.yb(42),n.jc("ngIf",e.errReason),n.yb(15),n.jc("ngForOf",e.documents),n.yb(1),n.jc("ngIf",!e.isView)}}function F(e,t){1&e&&(n.Rb(0,"p",51),n.Ic(1,"Reason is needed!"),n.Qb())}function S(e,t){if(1&e){const e=n.Sb();n.Rb(0,"div",67),n.Rb(1,"h5",68),n.Ic(2,"Cancellation"),n.Qb(),n.Rb(3,"button",69),n.bc("click",function(){return t.$implicit.close("by: close icon")}),n.Rb(4,"span",70),n.Ic(5,"\xd7"),n.Qb(),n.Qb(),n.Qb(),n.Rb(6,"div",71),n.Rb(7,"div",7),n.Rb(8,"div",72),n.Rb(9,"div",14),n.Rb(10,"label",15),n.Ic(11,"Reason"),n.Qb(),n.Rb(12,"textarea",73),n.bc("ngModelChange",function(t){return n.xc(e),n.dc().remarks=t}),n.Qb(),n.Gc(13,F,2,0,"p",17),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Rb(14,"div",74),n.Rb(15,"button",75),n.bc("click",function(){return t.$implicit.close("by: close button")}),n.Ic(16,"Close"),n.Qb(),n.Rb(17,"button",76),n.bc("click",function(){return n.xc(e),n.dc().cancelTransaction()}),n.Ic(18,"Cancel"),n.Qb(),n.Qb()}if(2&e){const e=n.dc();n.yb(12),n.jc("ngModel",e.remarks),n.yb(1),n.jc("ngIf",e.errCancelReason)}}let w=(()=>{class e{constructor(e,t,i,o,s,r){this.leaveManagementService=e,this.filingManagementService=t,this.fileManagerService=i,this.fb=o,this.route=s,this.modalService=r,this.uri=c.a.exportFile,this.isLoading=!0,this.isView=!1,this.isCancel=!1,this.isSubmit=!1,this.errCancelReason=!1,this.dateToday={day:new Date(new Date).getDate(),month:new Date(new Date).getMonth()+1,year:new Date(new Date).getFullYear()},this.leaveList=[],this.documents=[],this.fileList=[],this.pipe=new a.e("en-US"),this.isSuccess=new n.n,this.fileType=0,this.isDashboard=!1,this.remarks="",this.transactionID=""}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.leaveForm=this.fb.group({leave_code:"",selectedLeaveType:null,balance:{value:0,disabled:!0},withPay:!0,halfday:!1,dateFrom:this.dateToday,dateTo:this.dateToday,reason:""}),void 0!==this.parentDetail&&(this.isDashboard=!0,0!==this.parentDetail.dashboardId?this.id=this.parentDetail.dashboardId:(this.id="",this.leaveForm.get("dateFrom").setValue({year:new Date(this.parentDetail.dashboardDate).getFullYear(),month:new Date(this.parentDetail.dashboardDate).getMonth()+1,day:new Date(this.parentDetail.dashboardDate).getDate()}),this.leaveForm.get("dateTo").setValue({year:new Date(this.parentDetail.dashboardDate).getFullYear(),month:new Date(this.parentDetail.dashboardDate).getMonth()+1,day:new Date(this.parentDetail.dashboardDate).getDate()}))),this.resetError(!1),this.leaveManagementService.employeeLeave("0",sessionStorage.getItem("u")).subscribe(e=>{this.leaveList=e,""!==this.id?(this.isCancel=!0,this.isSubmit=!0,this.filingManagementService.leaveView(this.id,this.fileType).subscribe(e=>{this.transactionID=e[0].leave_id,this.leaveForm.setValue({leave_code:e[0].leave_code,selectedLeaveType:e[0].leave_type_id,balance:this.leaveList.filter(t=>t.leave_type_id===e[0].leave_type_id)[0].leave_balance,withPay:e[0].is_paid,halfday:e[0].is_half_day,dateFrom:{year:new Date(e[0].date_from).getFullYear(),month:new Date(e[0].date_from).getMonth()+1,day:new Date(e[0].date_from).getDate()},dateTo:{year:new Date(e[0].date_to).getFullYear(),month:new Date(e[0].date_to).getMonth()+1,day:new Date(e[0].date_to).getDate()},reason:e[0].description}),this.fileManagerService.viewFile(34,this.id,this.fileType).subscribe(t=>{for(var i=0;i<t.length;i++)this.documents.push({created_by:t[i].created_by,date_created:t[i].date_created,file_name:t[i].file_name,file_path:t[i].file_path,file_type:t[i].file_type,file_class:t[i].file_class,module_id:t[i].module_id,transaction_id:t[i].transaction_id,url:this.uri+t[i].file_path});e[0].active||(this.isView=!0),this.isLoading=!1},e=>{console.log(e.error)})},e=>{console.log(e.error)})):(this.id="0",this.isLoading=!1,this.isCancel=!1,this.isSubmit=!0)},e=>{console.log(e.error)})}selectLeave(){this.leaveForm.get("balance").setValue(this.leaveList.filter(e=>e.leave_type_id===this.leaveForm.get("selectedLeaveType").value)[0].leave_balance)}openFileBrowser(e){e.preventDefault(),document.querySelector("#fileUploadInputExample").click(),e.target.files&&e.target.files&&((new FileReader).readAsDataURL(e.target.files),this.fileList=e.target.files)}uploadFile(e){if(e.target.files.length){let i=document.querySelector("#fileUploadInputExample + .input-group .file-upload-info"),a="";for(var t=0;t<e.target.files.length;t++)a+=e.target.files[t].name+" ";i.setAttribute("value",a),this.fileList=e.target.files}}deleteDocument(e){this.documents.splice(e,1)}validation(){this.resetError(!1);var e=!0;return""!==this.leaveForm.get("selectedLeaveType").value&&null!==this.leaveForm.get("selectedLeaveType").value||(e=!1,this.errleaveType=!0),""!==this.leaveForm.get("reason").value&&null!==this.leaveForm.get("reason").value||(e=!1,this.errReason=!0),e}resetError(e){this.errleaveType=e,this.errReason=e}submit(){this.validation()&&s.a.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showLoaderOnConfirm:!0}).then(e=>{e.isConfirmed&&s.a.fire({title:"Please Wait !",allowOutsideClick:!1,onBeforeOpen:()=>{s.a.showLoading();var e={leave_id:this.id,leave_code:this.leaveForm.get("leave_code").value,leave_type_id:this.leaveForm.get("selectedLeaveType").value,date_from:this.pipe.transform(this.leaveForm.get("dateFrom").value.year+"/"+this.leaveForm.get("dateFrom").value.month+"/"+this.leaveForm.get("dateFrom").value.day,"MM/dd/yyyy"),date_to:this.pipe.transform(this.leaveForm.get("dateTo").value.year+"/"+this.leaveForm.get("dateTo").value.month+"/"+this.leaveForm.get("dateTo").value.day,"MM/dd/yyyy"),is_half_day:this.leaveForm.get("halfday").value,is_paid:this.leaveForm.get("withPay").value,description:this.leaveForm.get("reason").value,with_attachment:this.fileList.length+this.documents.length>0,employee_id:sessionStorage.getItem("u"),active:!0,approval_level_id:sessionStorage.getItem("apl"),series_code:sessionStorage.getItem("sc"),category_id:sessionStorage.getItem("cat"),created_by:sessionStorage.getItem("u")};this.filingManagementService.leaveIU(e).subscribe(e=>{if(0===e.id)s.a.fire("Failed!",e.description,"error");else{for(var t=[],i=0;i<this.documents.length;i++)t.push({created_by:sessionStorage.getItem("u"),series_code:sessionStorage.getItem("sc"),file_name:this.documents[i].file_name,file_path:this.documents[i].file_path,file_type:this.documents[i].file_type,module_id:this.documents[i].module_id,transaction_id:e.id});this.fileManagerService.updateFile(t).subscribe(t=>{if(void 0!==this.fileList){let t=this.fileList;const i=new FormData;Array.from(t).map((e,t)=>i.append("formfile",e,e.name)),this.fileManagerService.uploadFile(i,e.code,34,e.id).subscribe(t=>{0===t?s.a.fire("Failed!","File Upload Failed","error"):(s.a.fire("Ok!",e.description,"success"),this.isDashboard&&this.isSuccess.emit(e))},e=>{console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}else s.a.fire("Ok!",e.description,"success"),this.isDashboard&&this.isSuccess.emit(e)},e=>{console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}},e=>{console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}})})}cancel(){this.modalService.open(this.viewModal,{size:"sm"})}cancelTransaction(){s.a.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showLoaderOnConfirm:!0}).then(e=>{e.isConfirmed&&s.a.fire({title:"Please Wait !",allowOutsideClick:!1,onBeforeOpen:()=>{s.a.showLoading();var e={module_id:34,transaction_id:this.transactionID+",",remarks:this.remarks,created_by:sessionStorage.getItem("u"),series_code:sessionStorage.getItem("sc")};this.filingManagementService.cancel(e).subscribe(e=>{0===e?s.a.fire("Failed!","Transaction failed!","error"):(s.a.fire("Ok!","Transaction successful!","success"),this.modalService.dismissAll(),this.isView=!0)},e=>{console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}})})}}return e.\u0275fac=function(t){return new(t||e)(n.Lb(r.a),n.Lb(d.a),n.Lb(l.a),n.Lb(b.c),n.Lb(h.a),n.Lb(u.j))},e.\u0275cmp=n.Fb({type:e,selectors:[["app-leave-detail"]],viewQuery:function(e,t){if(1&e&&n.Nc(m,!0),2&e){let e;n.uc(e=n.cc())&&(t.viewModal=e.first)}},inputs:{parentDetail:"parentDetail",fileType:"fileType"},outputs:{isSuccess:"isSuccess"},decls:4,vars:2,consts:[["class","spinner-wrapper",4,"ngIf"],["class","animate__animated animate__fadeInUp",4,"ngIf"],["cancelModal",""],[1,"spinner-wrapper"],[1,"spinner"],[1,"animate__animated","animate__fadeInUp"],["class","page-breadcrumb",4,"ngIf"],[1,"row"],[1,"col-md-12","grid-margin"],[1,"card"],[3,"formGroup"],[1,"card-body"],[1,"card-title"],[1,"col-md-4"],[1,"form-group"],[1,"control-label"],["formControlName","selectedLeaveType","bindLabel","leave_name","bindValue","leave_type_id","placeholder","Select Leave Type",3,"items","change"],["class","text-danger mt-1",4,"ngIf"],[1,"col-md-2"],["formControlName","balance","type","text","placeholder","0",1,"form-control"],[1,"custom-control","custom-switch"],["formControlName","withPay","type","checkbox","id","customSwitch1",1,"custom-control-input"],["for","customSwitch1",1,"custom-control-label"],["formControlName","halfday","type","checkbox","id","customSwitch2",1,"custom-control-input"],["for","customSwitch2",1,"custom-control-label"],[1,"col-md-3"],[1,"input-group"],["placeholder","mm/dd/yyyy","name","dp","formControlName","dateFrom","value","dateFrom","ngbDatepicker","",1,"form-control",3,"click"],["d","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-light","btn-icon","calendar",3,"click"],["data-feather","calendar","appFeatherIcon","",1,"text-secondary"],["placeholder","mm/dd/yyyy","name","dp","formControlName","dateTo","ngbDatepicker","",1,"form-control",3,"click"],["dt","ngbDatepicker"],[1,"col-md-6"],["formControlName","reason","type","text","placeholder","Reason",1,"form-control"],["multiple","","placeholder","Choose file","type","file","id","fileUploadInputExample",1,"file-upload-default",3,"change"],["file",""],[1,"input-group","col-xs-12",3,"click"],["type","text","disabled","","placeholder","Upload Files",1,"form-control","file-upload-info"],["type","button",1,"file-upload-browse","btn","btn-primary"],[1,"container"],[1,"row","icons-list"],["class","col-sm-6",4,"ngFor","ngForOf"],["class","card-footer",4,"ngIf"],[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["routerLink","/layout/filing/leave-view"],["aria-current","page",1,"breadcrumb-item","active"],[1,"text-danger","mt-1"],[1,"col-sm-6"],[1,"w-100"],[1,"d-flex","justify-content-between"],[1,"text-body","mb-2"],["target","_blank",3,"href"],[1,"text-muted","tx-12"],[1,"mdi","mdi-close",3,"click"],[1,"card-footer"],[1,"nav","justify-content-end"],["class","btn btn-warning btn-icon-text",3,"click",4,"ngIf"],["class","btn btn-primary btn-icon-text",3,"click",4,"ngIf"],[1,"btn","btn-warning","btn-icon-text",3,"click"],["data-feather","rotate-cw","appFeatherIcon","",1,"btn-icon-prepend"],[1,"btn","btn-primary","btn-icon-text",3,"click"],["data-feather","save","appFeatherIcon","",1,"btn-icon-prepend"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-md-12"],["type","text","rows","3","placeholder","Reason",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-warning",3,"click"]],template:function(e,t){1&e&&(n.Gc(0,g,3,0,"div",0),n.Gc(1,M,74,7,"div",1),n.Gc(2,S,19,2,"ng-template",null,2,n.Hc)),2&e&&(n.jc("ngIf",t.isLoading),n.yb(1),n.jc("ngIf",!t.isLoading))},directives:[a.n,b.s,b.j,b.e,f.a,b.i,b.d,b.b,b.a,u.i,p.a,a.m,h.f,b.l],styles:[""]}),e})()},NvFN:function(e,t,i){"use strict";i.d(t,"a",function(){return x});var a=i("ofXK"),n=i("fXoL"),o=i("PSD3"),s=i.n(o),c=i("AytR"),r=i("3Pt+"),d=i("tyNb"),l=i("xNm2"),b=i("MR3p"),h=i("1kSV"),u=i("cnwU"),f=i("ZOsW"),p=i("IYwT");const m=["cancelModal"];function g(e,t){1&e&&(n.Rb(0,"div",2),n.Rb(1,"div",3),n.Ic(2,"Loading..."),n.Qb(),n.Qb())}function y(e,t){1&e&&(n.Rb(0,"nav",46),n.Rb(1,"ol",47),n.Rb(2,"li",48),n.Rb(3,"a",49),n.Ic(4,"Filing"),n.Qb(),n.Qb(),n.Rb(5,"li",48),n.Rb(6,"a",50),n.Ic(7,"Change Schedule"),n.Qb(),n.Qb(),n.Rb(8,"li",51),n.Ic(9,"Detail"),n.Qb(),n.Qb(),n.Qb())}function v(e,t){1&e&&(n.Rb(0,"p",52),n.Ic(1,"Shift Code is needed!"),n.Qb())}function R(e,t){1&e&&(n.Rb(0,"p",52),n.Ic(1,"Reason is needed!"),n.Qb())}function Q(e,t){if(1&e){const e=n.Sb();n.Rb(0,"div",53),n.Rb(1,"div",54),n.Rb(2,"div",55),n.Rb(3,"h6",56),n.Rb(4,"a",57),n.Mb(5,"i"),n.Ic(6),n.Qb(),n.Qb(),n.Rb(7,"p",58),n.Rb(8,"i",59),n.bc("click",function(){n.xc(e);const i=t.index;return n.dc(2).deleteDocument(i)}),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb()}if(2&e){const e=t.$implicit;n.yb(4),n.kc("href",e.url,n.zc),n.yb(1),n.Ab(e.file_class),n.yb(1),n.Jc(e.file_name)}}function I(e,t){1&e&&(n.Rb(0,"button",60),n.Mb(1,"span",61),n.Ic(2," Loading... "),n.Qb())}function _(e,t){if(1&e){const e=n.Sb();n.Rb(0,"button",62),n.bc("click",function(){return n.xc(e),n.dc(2).search()}),n.Mb(1,"i",63),n.Ic(2," Search "),n.Qb()}}function D(e,t){if(1&e&&(n.Rb(0,"tr"),n.Rb(1,"td"),n.Ic(2),n.ec(3,"date"),n.Qb(),n.Rb(4,"td"),n.Ic(5),n.Qb(),n.Rb(6,"td"),n.Ic(7),n.Qb(),n.Rb(8,"td"),n.Ic(9),n.Qb(),n.Rb(10,"td"),n.Ic(11),n.Qb(),n.Qb()),2&e){const e=t.$implicit;n.yb(2),n.Jc(n.gc(3,5,e.date,"MM/dd/yyyy")),n.yb(3),n.Jc(e.sked_time_in),n.yb(2),n.Jc(e.sked_time_out),n.yb(2),n.Jc(e.time_in),n.yb(2),n.Jc(e.time_out)}}function M(e,t){if(1&e){const e=n.Sb();n.Rb(0,"button",68),n.bc("click",function(){return n.xc(e),n.dc(3).cancel()}),n.Mb(1,"i",69),n.Ic(2," Cancel "),n.Qb()}}function F(e,t){if(1&e){const e=n.Sb();n.Rb(0,"button",70),n.bc("click",function(){return n.xc(e),n.dc(3).submit()}),n.Mb(1,"i",71),n.Ic(2," Save Changes "),n.Qb()}}function S(e,t){if(1&e&&(n.Rb(0,"div",64),n.Rb(1,"ul",65),n.Gc(2,M,3,0,"button",66),n.Ic(3," \xa0 "),n.Gc(4,F,3,0,"button",67),n.Qb(),n.Qb()),2&e){const e=n.dc(2);n.yb(2),n.jc("ngIf",e.isCancel),n.yb(2),n.jc("ngIf",e.isSubmit)}}function w(e,t){1&e&&(n.Rb(0,"p",52),n.Ic(1,"Reason is needed!"),n.Qb())}function T(e,t){if(1&e){const e=n.Sb();n.Rb(0,"div",72),n.Rb(1,"h5",73),n.Ic(2,"Cancellation"),n.Qb(),n.Rb(3,"button",74),n.bc("click",function(){return t.$implicit.close("by: close icon")}),n.Rb(4,"span",75),n.Ic(5,"\xd7"),n.Qb(),n.Qb(),n.Qb(),n.Rb(6,"div",76),n.Rb(7,"div",6),n.Rb(8,"div",40),n.Rb(9,"div",13),n.Rb(10,"label",14),n.Ic(11,"Reason"),n.Qb(),n.Rb(12,"textarea",77),n.bc("ngModelChange",function(t){return n.xc(e),n.dc(2).remarks=t}),n.Qb(),n.Gc(13,w,2,0,"p",16),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Rb(14,"div",78),n.Rb(15,"button",79),n.bc("click",function(){return t.$implicit.close("by: close button")}),n.Ic(16,"Close"),n.Qb(),n.Rb(17,"button",80),n.bc("click",function(){return n.xc(e),n.dc(2).cancelTransaction()}),n.Ic(18,"Cancel"),n.Qb(),n.Qb()}if(2&e){const e=n.dc(2);n.yb(12),n.jc("ngModel",e.remarks),n.yb(1),n.jc("ngIf",e.errCancelReason)}}function k(e,t){if(1&e){const e=n.Sb();n.Rb(0,"div",4),n.Gc(1,y,10,0,"nav",5),n.Rb(2,"div",6),n.Rb(3,"div",7),n.Rb(4,"div",8),n.Rb(5,"div",9),n.Rb(6,"div",10),n.Rb(7,"h6"),n.Ic(8,"Change Schedule"),n.Qb(),n.Qb(),n.Rb(9,"form",11),n.Rb(10,"div",6),n.Rb(11,"div",12),n.Rb(12,"div",13),n.Rb(13,"label",14),n.Ic(14,"Shift Code"),n.Qb(),n.Mb(15,"ng-select",15),n.Gc(16,v,2,0,"p",16),n.Qb(),n.Qb(),n.Rb(17,"div",12),n.Rb(18,"div",13),n.Rb(19,"label",14),n.Ic(20,"Reason"),n.Qb(),n.Mb(21,"input",17),n.Gc(22,R,2,0,"p",16),n.Qb(),n.Qb(),n.Rb(23,"div",18),n.Rb(24,"div",13),n.Rb(25,"label",14),n.Ic(26,"Date From"),n.Qb(),n.Rb(27,"div",19),n.Rb(28,"input",20,21),n.bc("click",function(){return n.xc(e),n.vc(29).toggle()}),n.Qb(),n.Rb(30,"div",22),n.Rb(31,"button",23),n.bc("click",function(){return n.xc(e),n.vc(29).toggle()}),n.Mb(32,"i",24),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Rb(33,"div",18),n.Rb(34,"div",13),n.Rb(35,"label",14),n.Ic(36,"Date To"),n.Qb(),n.Rb(37,"div",19),n.Rb(38,"input",25,26),n.bc("click",function(){return n.xc(e),n.vc(39).toggle()}),n.Qb(),n.Rb(40,"div",22),n.Rb(41,"button",23),n.bc("click",function(){return n.xc(e),n.vc(39).toggle()}),n.Mb(42,"i",24),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Rb(43,"div",6),n.Rb(44,"div",27),n.Rb(45,"div",13),n.Rb(46,"input",28,29),n.bc("change",function(t){return n.xc(e),n.dc().uploadFile(t)}),n.Qb(),n.Rb(48,"div",30),n.bc("click",function(t){return n.xc(e),n.dc().openFileBrowser(t)}),n.Mb(49,"input",31),n.Rb(50,"span",22),n.Rb(51,"button",32),n.Ic(52,"Upload"),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Rb(53,"div",27),n.Rb(54,"div",33),n.Rb(55,"div",34),n.Gc(56,Q,9,5,"div",35),n.Qb(),n.Qb(),n.Qb(),n.Rb(57,"div",36),n.Rb(58,"div",37),n.Gc(59,I,3,0,"button",38),n.Gc(60,_,3,0,"button",39),n.Qb(),n.Qb(),n.Qb(),n.Mb(61,"hr"),n.Qb(),n.Rb(62,"div",6),n.Rb(63,"div",40),n.Rb(64,"div",41),n.Rb(65,"table",42),n.Rb(66,"thead"),n.Rb(67,"tr"),n.Rb(68,"th"),n.Ic(69,"Date"),n.Qb(),n.Rb(70,"th"),n.Ic(71,"Old Schedule In"),n.Qb(),n.Rb(72,"th"),n.Ic(73,"Old Schedule Out"),n.Qb(),n.Rb(74,"th"),n.Ic(75,"Schedule In"),n.Qb(),n.Rb(76,"th"),n.Ic(77,"Schedule Out"),n.Qb(),n.Qb(),n.Qb(),n.Rb(78,"tbody"),n.Gc(79,D,12,8,"tr",43),n.Qb(),n.Mb(80,"tfoot"),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Gc(81,S,5,2,"div",44),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Gc(82,T,19,2,"ng-template",null,45,n.Hc),n.Qb()}if(2&e){const e=n.dc();n.yb(1),n.jc("ngIf",!e.isDashboard),n.yb(8),n.jc("formGroup",e.changeScheduleForm),n.yb(6),n.jc("items",e.shiftList),n.yb(1),n.jc("ngIf",e.errShiftCode),n.yb(6),n.jc("ngIf",e.errReason),n.yb(34),n.jc("ngForOf",e.documents),n.yb(3),n.jc("ngIf",e.isSearch),n.yb(1),n.jc("ngIf",!e.isSearch),n.yb(19),n.jc("ngForOf",e.scheduleList),n.yb(2),n.jc("ngIf",!e.isView)}}let x=(()=>{class e{constructor(e,t,i,o,s,r){this.fb=e,this.route=t,this.filingManagementService=i,this.fileManagerService=o,this.modalService=s,this.shiftcodeManagementService=r,this.uri=c.a.exportFile,this.isLoading=!0,this.isSearch=!1,this.isView=!1,this.isCancel=!1,this.isSubmit=!1,this.shiftList=[],this.documents=[],this.fileList=[],this.scheduleList=[],this.dateToday={day:new Date(new Date).getDate(),month:new Date(new Date).getMonth()+1,year:new Date(new Date).getFullYear()},this.pipe=new a.e("en-US"),this.transactionID="",this.remarks="",this.isSuccess=new n.n,this.fileType=0,this.isDashboard=!1,this.errCancelReason=!1}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.changeScheduleForm=this.fb.group({selectedShift:null,changeScheduleCode:"",reason:"",dateFrom:this.dateToday,dateTo:this.dateToday}),void 0!==this.parentDetail&&(this.isDashboard=!0,this.isView=this.parentDetail.view,0!==this.parentDetail.dashboardId?this.id=this.parentDetail.dashboardId:(this.id="",this.changeScheduleForm.get("dateFrom").setValue({year:new Date(this.parentDetail.dashboardDate).getFullYear(),month:new Date(this.parentDetail.dashboardDate).getMonth()+1,day:new Date(this.parentDetail.dashboardDate).getDate()}),this.changeScheduleForm.get("dateTo").setValue({year:new Date(this.parentDetail.dashboardDate).getFullYear(),month:new Date(this.parentDetail.dashboardDate).getMonth()+1,day:new Date(this.parentDetail.dashboardDate).getDate()}))),this.resetError(!1),this.shiftcodeManagementService.shiftList("0").subscribe(e=>{this.shiftList=e,""!==this.id?(this.isCancel=!0,this.isSubmit=!0,this.filingManagementService.changeScheduleView(this.id,this.fileType).subscribe(e=>{this.transactionID=e[0].change_schedule_id,this.changeScheduleForm.setValue({selectedShift:e[0].shift_id,changeScheduleCode:e[0].change_schedule_code,reason:e[0].reason,dateFrom:{year:new Date(e[0].date_from).getFullYear(),month:new Date(e[0].date_from).getMonth()+1,day:new Date(e[0].date_from).getDate()},dateTo:{year:new Date(e[0].date_to).getFullYear(),month:new Date(e[0].date_to).getMonth()+1,day:new Date(e[0].date_to).getDate()}}),this.filingManagementService.changeScheduleDetailView(this.id,this.fileType).subscribe(t=>{this.scheduleList=t,this.fileManagerService.viewFile(32,this.id,this.fileType).subscribe(t=>{for(var i=0;i<t.length;i++)this.documents.push({created_by:t[i].created_by,date_created:t[i].date_created,file_name:t[i].file_name,file_path:t[i].file_path,file_type:t[i].file_type,file_class:t[i].file_class,module_id:t[i].module_id,transaction_id:t[i].transaction_id,url:this.uri+t[i].file_path});e[0].active||(this.isView=!0),this.isLoading=!1},e=>{console.log(e.error)})},e=>{console.log(e.error)})},e=>{console.log(e.error)})):(this.id="0",this.isLoading=!1,this.isCancel=!1,this.isSubmit=!0)},e=>{console.log(e.error)})}search(){this.isSearch=!0;const e=this.pipe.transform(this.changeScheduleForm.get("dateFrom").value.year+"/"+this.changeScheduleForm.get("dateFrom").value.month+"/"+this.changeScheduleForm.get("dateFrom").value.day,"MM/dd/yyyy"),t=this.pipe.transform(this.changeScheduleForm.get("dateTo").value.year+"/"+this.changeScheduleForm.get("dateTo").value.month+"/"+this.changeScheduleForm.get("dateTo").value.day,"MM/dd/yyyy");this.filingManagementService.shiftList(this.changeScheduleForm.get("selectedShift").value,e,t).subscribe(e=>{this.scheduleList=e,this.isSearch=!1},e=>{console.log(e.error),this.isSearch=!1})}openFileBrowser(e){e.preventDefault(),document.querySelector("#fileUploadInputExample").click(),e.target.files&&e.target.files&&((new FileReader).readAsDataURL(e.target.files),this.fileList=e.target.files)}uploadFile(e){if(e.target.files.length){let i=document.querySelector("#fileUploadInputExample + .input-group .file-upload-info"),a="";for(var t=0;t<e.target.files.length;t++)a+=e.target.files[t].name+" ";i.setAttribute("value",a),this.fileList=e.target.files}}deleteDocument(e){this.documents.splice(e,1)}validation(){var e=!0;return this.resetError(!1),""!==this.changeScheduleForm.get("selectedShift").value&&null!==this.changeScheduleForm.get("selectedShift").value||(e=!1,this.errShiftCode=!0),""!==this.changeScheduleForm.get("reason").value&&null!==this.changeScheduleForm.get("reason").value||(e=!1,this.errReason=!0),e}resetError(e){this.errShiftCode=e,this.errReason=e}submit(){this.validation()&&s.a.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showLoaderOnConfirm:!0}).then(e=>{e.isConfirmed&&s.a.fire({title:"Please Wait !",allowOutsideClick:!1,onBeforeOpen:()=>{s.a.showLoading();var e={change_schedule_id:this.id,change_schedule_code:this.changeScheduleForm.get("changeScheduleCode").value,shift_id:this.changeScheduleForm.get("selectedShift").value,reason:this.changeScheduleForm.get("reason").value,date_from:this.pipe.transform(this.changeScheduleForm.get("dateFrom").value.year+"/"+this.changeScheduleForm.get("dateFrom").value.month+"/"+this.changeScheduleForm.get("dateFrom").value.day,"MM/dd/yyyy"),date_to:this.pipe.transform(this.changeScheduleForm.get("dateTo").value.year+"/"+this.changeScheduleForm.get("dateTo").value.month+"/"+this.changeScheduleForm.get("dateTo").value.day,"MM/dd/yyyy"),active:!0,approval_level_id:sessionStorage.getItem("apl"),series_code:sessionStorage.getItem("sc"),category_id:sessionStorage.getItem("cat"),created_by:sessionStorage.getItem("u"),employee_id:sessionStorage.getItem("u")};this.filingManagementService.changeScheduleIU(e).subscribe(e=>{if(0===e.id)s.a.fire("Failed!",e.description,"error");else{for(var t=[],i=0;i<this.documents.length;i++)t.push({created_by:sessionStorage.getItem("u"),series_code:sessionStorage.getItem("sc"),file_name:this.documents[i].file_name,file_path:this.documents[i].file_path,file_type:this.documents[i].file_type,module_id:this.documents[i].module_id,transaction_id:e.id});this.fileManagerService.updateFile(t).subscribe(t=>{if(void 0!==this.fileList){let t=this.fileList;const i=new FormData;Array.from(t).map((e,t)=>i.append("formfile",e,e.name)),this.fileManagerService.uploadFile(i,e.code,32,e.id).subscribe(t=>{0===t?s.a.fire("Failed!","File Upload Failed","error"):(s.a.fire("Ok!",e.description,"success"),this.isDashboard&&this.isSuccess.emit(e))},e=>{console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}else s.a.fire("Ok!",e.description,"success"),this.isDashboard&&this.isSuccess.emit(e)},e=>{console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}},e=>{console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}})})}cancel(){this.modalService.open(this.viewModal,{size:"sm"})}cancelTransaction(){s.a.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showLoaderOnConfirm:!0}).then(e=>{e.isConfirmed&&s.a.fire({title:"Please Wait !",allowOutsideClick:!1,onBeforeOpen:()=>{s.a.showLoading();var e={module_id:32,transaction_id:this.transactionID+",",remarks:this.remarks,created_by:sessionStorage.getItem("u"),series_code:sessionStorage.getItem("sc")};this.filingManagementService.cancel(e).subscribe(e=>{0===e?s.a.fire("Failed!","Transaction failed!","error"):(s.a.fire("Ok!","Transaction successful!","success"),this.modalService.dismissAll(),this.isView=!0)},e=>{console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}})})}}return e.\u0275fac=function(t){return new(t||e)(n.Lb(r.c),n.Lb(d.a),n.Lb(l.a),n.Lb(b.a),n.Lb(h.j),n.Lb(u.a))},e.\u0275cmp=n.Fb({type:e,selectors:[["app-change-schedule-detail"]],viewQuery:function(e,t){if(1&e&&n.Nc(m,!0),2&e){let e;n.uc(e=n.cc())&&(t.viewModal=e.first)}},inputs:{parentDetail:"parentDetail",fileType:"fileType"},outputs:{isSuccess:"isSuccess"},decls:2,vars:2,consts:[["class","spinner-wrapper",4,"ngIf"],["class","animate__animated animate__fadeInUp",4,"ngIf"],[1,"spinner-wrapper"],[1,"spinner"],[1,"animate__animated","animate__fadeInUp"],["class","page-breadcrumb",4,"ngIf"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title"],[3,"formGroup"],[1,"col-sm-3"],[1,"form-group"],[1,"control-label"],["name","Shift Code","bindLabel","shift_name","bindValue","int_shift_id","placeholder","Select Shift Code","formControlName","selectedShift",3,"items"],["class","text-danger mt-1",4,"ngIf"],["type","text","formControlName","reason","placeholder","Reason",1,"form-control"],[1,"col-md-3"],[1,"input-group"],["placeholder","mm/dd/yyyy","name","dp","formControlName","dateFrom","ngbDatepicker","",1,"form-control",3,"click"],["df","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-light","btn-icon","calendar",3,"click"],["data-feather","calendar","appFeatherIcon","",1,"text-secondary"],["placeholder","mm/dd/yyyy","name","dp","formControlName","dateTo","ngbDatepicker","",1,"form-control",3,"click"],["dt","ngbDatepicker"],[1,"col-md-5"],["multiple","","placeholder","Choose file","type","file","id","fileUploadInputExample",1,"file-upload-default",3,"change"],["file",""],[1,"input-group","col-xs-12",3,"click"],["type","text","disabled","","placeholder","Upload Files",1,"form-control","file-upload-info"],["type","button",1,"file-upload-browse","btn","btn-primary"],[1,"container"],[1,"row","icons-list"],["class","col-sm-6",4,"ngFor","ngForOf"],[1,"col-md-2"],[1,"text-right"],["class","btn btn-primary","type","button","disabled","",4,"ngIf"],["type","button","class","btn btn-primary btn-icon-text",3,"click",4,"ngIf"],[1,"col-md-12"],[1,"table-responsive"],["id","dataTableExample",1,"table"],[4,"ngFor","ngForOf"],["class","card-footer",4,"ngIf"],["cancelModal",""],[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["routerLink","/layout/filing/change-schedule-view"],["aria-current","page",1,"breadcrumb-item","active"],[1,"text-danger","mt-1"],[1,"col-sm-6"],[1,"w-100"],[1,"d-flex","justify-content-between"],[1,"text-body","mb-2"],["target","_blank",3,"href"],[1,"text-muted","tx-12"],[1,"mdi","mdi-close",3,"click"],["type","button","disabled","",1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["type","button",1,"btn","btn-primary","btn-icon-text",3,"click"],["data-feather","search","appFeatherIcon","",1,"btn-icon-prepend"],[1,"card-footer"],[1,"nav","justify-content-end"],["class","btn btn-warning btn-icon-text",3,"click",4,"ngIf"],["class","btn btn-primary btn-icon-text",3,"click",4,"ngIf"],[1,"btn","btn-warning","btn-icon-text",3,"click"],["data-feather","rotate-cw","appFeatherIcon","",1,"btn-icon-prepend"],[1,"btn","btn-primary","btn-icon-text",3,"click"],["data-feather","save","appFeatherIcon","",1,"btn-icon-prepend"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["type","text","rows","3","placeholder","Reason",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-warning",3,"click"]],template:function(e,t){1&e&&(n.Gc(0,g,3,0,"div",0),n.Gc(1,k,84,10,"div",1)),2&e&&(n.jc("ngIf",t.isLoading),n.yb(1),n.jc("ngIf",!t.isLoading))},directives:[a.n,r.s,r.j,r.e,f.a,r.i,r.d,r.b,h.i,p.a,a.m,d.f,r.l],pipes:[a.e],styles:[""]}),e})()},TEbG:function(e,t,i){"use strict";i.d(t,"a",function(){return C});var a=i("ofXK"),n=i("fXoL"),o=i("PSD3"),s=i.n(o),c=i("AytR"),r=i("3Pt+"),d=i("xNm2"),l=i("MR3p"),b=i("tyNb"),h=i("1kSV"),u=i("EDFS"),f=i("IYwT"),p=i("kUHs");const m=["cancelModal"];function g(e,t){1&e&&(n.Rb(0,"div",3),n.Rb(1,"div",4),n.Ic(2,"Loading..."),n.Qb(),n.Qb())}function y(e,t){1&e&&(n.Rb(0,"nav",42),n.Rb(1,"ol",43),n.Rb(2,"li",44),n.Rb(3,"a",45),n.Ic(4,"Filing"),n.Qb(),n.Qb(),n.Rb(5,"li",44),n.Rb(6,"a",46),n.Ic(7,"Official Business"),n.Qb(),n.Qb(),n.Rb(8,"li",47),n.Ic(9,"Detail"),n.Qb(),n.Qb(),n.Qb())}function v(e,t){1&e&&(n.Rb(0,"p",48),n.Ic(1,"Company is needed!"),n.Qb())}const R=function(){return{standalone:!0}};function Q(e,t){if(1&e){const e=n.Sb();n.Rb(0,"ngb-datepicker",49),n.bc("ngModelChange",function(t){return n.xc(e),n.dc(2).dfPopDate=t})("ngModelChange",function(){return n.xc(e),n.dc(2).setDateFrom()}),n.Qb(),n.Rb(1,"timepicker",50),n.bc("ngModelChange",function(t){return n.xc(e),n.dc(2).dfPopTime=t})("ngModelChange",function(){return n.xc(e),n.dc(2).setDateFrom()}),n.Qb()}if(2&e){const e=n.dc(2);n.jc("ngModel",e.dfPopDate)("ngModelOptions",n.mc(5,R)),n.yb(1),n.jc("ngModel",e.dfPopTime)("ngModelOptions",n.mc(6,R))("showMeridian",!0)}}function I(e,t){if(1&e){const e=n.Sb();n.Rb(0,"ngb-datepicker",49),n.bc("ngModelChange",function(t){return n.xc(e),n.dc(2).dtPopDate=t})("ngModelChange",function(){return n.xc(e),n.dc(2).setDateTo()}),n.Qb(),n.Rb(1,"timepicker",50),n.bc("ngModelChange",function(t){return n.xc(e),n.dc(2).dtPopTime=t})("ngModelChange",function(){return n.xc(e),n.dc(2).setDateTo()}),n.Qb()}if(2&e){const e=n.dc(2);n.jc("ngModel",e.dtPopDate)("ngModelOptions",n.mc(5,R)),n.yb(1),n.jc("ngModel",e.dtPopTime)("ngModelOptions",n.mc(6,R))("showMeridian",!0)}}function _(e,t){1&e&&(n.Rb(0,"p",48),n.Ic(1,"Location is needed!"),n.Qb())}function D(e,t){1&e&&(n.Rb(0,"p",48),n.Ic(1,"Reason is needed!"),n.Qb())}function M(e,t){if(1&e){const e=n.Sb();n.Rb(0,"div",27),n.Rb(1,"div",51),n.Rb(2,"div",52),n.Rb(3,"h6",53),n.Rb(4,"a",54),n.Mb(5,"i"),n.Ic(6),n.Qb(),n.Qb(),n.Rb(7,"p",55),n.Rb(8,"i",56),n.bc("click",function(){n.xc(e);const i=t.index;return n.dc(2).deleteDocument(i)}),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb()}if(2&e){const e=t.$implicit;n.yb(4),n.kc("href",e.url,n.zc),n.yb(1),n.Ab(e.file_class),n.yb(1),n.Jc(e.file_name)}}function F(e,t){if(1&e){const e=n.Sb();n.Rb(0,"button",61),n.bc("click",function(){return n.xc(e),n.dc(3).cancel()}),n.Mb(1,"i",62),n.Ic(2," Cancel "),n.Qb()}}function S(e,t){if(1&e){const e=n.Sb();n.Rb(0,"button",63),n.bc("click",function(){return n.xc(e),n.dc(3).submit()}),n.Mb(1,"i",64),n.Ic(2," Save Changes "),n.Qb()}}function w(e,t){if(1&e&&(n.Rb(0,"div",57),n.Rb(1,"ul",58),n.Gc(2,F,3,0,"button",59),n.Ic(3," \xa0 "),n.Gc(4,S,3,0,"button",60),n.Qb(),n.Qb()),2&e){const e=n.dc(2);n.yb(2),n.jc("ngIf",e.isCancel),n.yb(2),n.jc("ngIf",e.isSubmit)}}function T(e,t){if(1&e){const e=n.Sb();n.Rb(0,"div",5),n.Gc(1,y,10,0,"nav",6),n.Rb(2,"div",7),n.Rb(3,"div",8),n.Rb(4,"div",9),n.Rb(5,"form",10),n.Rb(6,"div",11),n.Rb(7,"h6",12),n.Ic(8,"Official Business"),n.Qb(),n.Rb(9,"div",7),n.Rb(10,"div",13),n.Rb(11,"div",7),n.Rb(12,"div",14),n.Rb(13,"div",15),n.Rb(14,"label",16),n.Ic(15,"Company To Visit"),n.Qb(),n.Mb(16,"input",17),n.Gc(17,v,2,0,"p",18),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Rb(18,"div",19),n.Rb(19,"div",7),n.Rb(20,"div",20),n.Rb(21,"div",15),n.Rb(22,"label",16),n.Ic(23,"Date From"),n.Qb(),n.Rb(24,"div",21),n.Gc(25,Q,2,7,"ng-template",null,22,n.Hc),n.Mb(27,"input",23),n.Rb(28,"div",24),n.Rb(29,"button",25),n.Mb(30,"i",26),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Rb(31,"div",27),n.Rb(32,"div",15),n.Rb(33,"label",16),n.Ic(34,"Date To"),n.Qb(),n.Rb(35,"div",21),n.Gc(36,I,2,7,"ng-template",null,28,n.Hc),n.Mb(38,"input",29),n.Rb(39,"div",24),n.Rb(40,"button",25),n.Mb(41,"i",26),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Rb(42,"div",7),n.Rb(43,"div",13),n.Rb(44,"div",15),n.Rb(45,"label",16),n.Ic(46,"Location"),n.Qb(),n.Mb(47,"input",30),n.Gc(48,_,2,0,"p",18),n.Qb(),n.Qb(),n.Rb(49,"div",19),n.Rb(50,"div",15),n.Rb(51,"label",16),n.Ic(52,"Reason"),n.Qb(),n.Mb(53,"input",31),n.Gc(54,D,2,0,"p",18),n.Qb(),n.Qb(),n.Qb(),n.Mb(55,"hr"),n.Rb(56,"div",7),n.Rb(57,"div",20),n.Rb(58,"div",15),n.Rb(59,"input",32,33),n.bc("change",function(t){return n.xc(e),n.dc().uploadFile(t)}),n.Qb(),n.Rb(61,"div",34),n.bc("click",function(t){return n.xc(e),n.dc().openFileBrowser(t)}),n.Mb(62,"input",35),n.Rb(63,"span",36),n.Rb(64,"button",37),n.Ic(65,"Upload"),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Rb(66,"div",20),n.Rb(67,"div",38),n.Rb(68,"div",39),n.Gc(69,M,9,5,"div",40),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Gc(70,w,5,2,"div",41),n.Qb(),n.Qb(),n.Qb(),n.Qb()}if(2&e){const e=n.vc(26),t=n.vc(37),i=n.dc();n.yb(1),n.jc("ngIf",!i.isDashboard),n.yb(4),n.jc("formGroup",i.officialBusinessForm),n.yb(12),n.jc("ngIf",i.errCompany),n.yb(10),n.kc("value",i.dateFrom),n.jc("popover",e)("outsideClick",!0),n.yb(11),n.kc("value",i.dateTo),n.jc("popover",t)("outsideClick",!0),n.yb(10),n.jc("ngIf",i.errLocation),n.yb(6),n.jc("ngIf",i.errReason),n.yb(15),n.jc("ngForOf",i.documents),n.yb(1),n.jc("ngIf",!i.isView)}}function k(e,t){1&e&&(n.Rb(0,"p",48),n.Ic(1,"Reason is needed!"),n.Qb())}function x(e,t){if(1&e){const e=n.Sb();n.Rb(0,"div",65),n.Rb(1,"h5",66),n.Ic(2,"Cancellation"),n.Qb(),n.Rb(3,"button",67),n.bc("click",function(){return t.$implicit.close("by: close icon")}),n.Rb(4,"span",68),n.Ic(5,"\xd7"),n.Qb(),n.Qb(),n.Qb(),n.Rb(6,"div",69),n.Rb(7,"div",7),n.Rb(8,"div",14),n.Rb(9,"div",15),n.Rb(10,"label",16),n.Ic(11,"Reason"),n.Qb(),n.Rb(12,"textarea",70),n.bc("ngModelChange",function(t){return n.xc(e),n.dc().remarks=t}),n.Qb(),n.Gc(13,k,2,0,"p",18),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Rb(14,"div",71),n.Rb(15,"button",72),n.bc("click",function(){return t.$implicit.close("by: close button")}),n.Ic(16,"Close"),n.Qb(),n.Rb(17,"button",73),n.bc("click",function(){return n.xc(e),n.dc().cancelTransaction()}),n.Ic(18,"Cancel"),n.Qb(),n.Qb()}if(2&e){const e=n.dc();n.yb(12),n.jc("ngModel",e.remarks),n.yb(1),n.jc("ngIf",e.errCancelReason)}}let C=(()=>{class e{constructor(e,t,i,o,s){this.fb=e,this.filingManagementService=t,this.fileManagerService=i,this.route=o,this.modalService=s,this.uri=c.a.exportFile,this.isLoading=!0,this.isView=!1,this.isCancel=!1,this.isSubmit=!1,this.errCancelReason=!1,this.dateToday={day:new Date(new Date).getDate(),month:new Date(new Date).getMonth()+1,year:new Date(new Date).getFullYear()},this.pipe=new a.e("en-US"),this.documents=[],this.remarks="",this.isSuccess=new n.n,this.fileType=0,this.isDashboard=!1,this.transactionID=""}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.officialBusinessForm=this.fb.group({official_business_code:"",dateFrom:this.pipe.transform(this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day+" 00:00","MM/dd/yyyy hh:mm a"),dateTo:this.pipe.transform(this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day+" 00:00","MM/dd/yyyy hh:mm a"),company:"",location:"",reason:""}),void 0!==this.parentDetail&&(this.isDashboard=!0,this.isView=this.parentDetail.view,0!==this.parentDetail.dashboardId?this.id=this.parentDetail.dashboardId:(this.id="",this.officialBusinessForm.get("dateFrom").setValue(this.pipe.transform(this.parentDetail.dashboardDate+" 00:00","MM/dd/yyyy hh:mm a")),this.officialBusinessForm.get("dateTo").setValue(this.pipe.transform(this.parentDetail.dashboardDate+" 00:00","MM/dd/yyyy hh:mm a")))),this.resetError(!1),""!==this.id?(this.isCancel=!0,this.isSubmit=!0,this.filingManagementService.officialBusinessView(this.id,this.fileType).subscribe(e=>{this.transactionID=e[0].official_business_id,this.createdBy=e[0].created_by,this.officialBusinessForm.setValue({official_business_code:e[0].official_business_code,dateFrom:this.pipe.transform(e[0].date_from,"MM/dd/yyyy hh:mm a"),dateTo:this.pipe.transform(e[0].date_to,"MM/dd/yyyy hh:mm a"),company:e[0].company_to_visit,location:e[0].location,reason:e[0].description}),this.fileManagerService.viewFile(35,this.id,this.fileType).subscribe(t=>{for(var i=0;i<t.length;i++)this.documents.push({created_by:t[i].created_by,date_created:t[i].date_created,file_name:t[i].file_name,file_path:t[i].file_path,file_type:t[i].file_type,file_class:t[i].file_class,module_id:t[i].module_id,transaction_id:t[i].transaction_id,url:this.uri+t[i].file_path});e[0].active||(this.isView=!0),this.isLoading=!1},e=>{console.log(e.error)})},e=>{console.log(e.error)})):(this.id="0",this.isLoading=!1,this.isCancel=!1,this.isSubmit=!0)}deleteDocument(e){this.documents.splice(e,1)}setDateFrom(){let e,t;e=this.pipe.transform(null==this.dfPopDate?this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day:this.dfPopDate.year+"/"+this.dfPopDate.month+"/"+this.dfPopDate.day,"MM/dd/yyyy"),t=null===this.pipe.transform(this.dfPopTime,"hh:mm a")||void 0===this.pipe.transform(this.dfPopTime,"hh:mm a")?this.pipe.transform(this.pipe.transform(this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day+" 00:00","MM/dd/yyyy hh:mm a"),"hh:mm a"):this.pipe.transform(this.dfPopTime,"hh:mm a"),this.dateFrom=e+" "+t,this.officialBusinessForm.get("dateFrom").setValue(this.dateFrom)}setDateTo(){let e,t;e=this.pipe.transform(null==this.dtPopDate?this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day:this.dtPopDate.year+"/"+this.dtPopDate.month+"/"+this.dtPopDate.day,"MM/dd/yyyy"),t=null===this.pipe.transform(this.dtPopTime,"hh:mm a")||void 0===this.pipe.transform(this.dtPopTime,"hh:mm a")?this.pipe.transform(this.pipe.transform(this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day+" 00:00","MM/dd/yyyy hh:mm a"),"hh:mm a"):this.pipe.transform(this.dtPopTime,"hh:mm a"),this.dateTo=e+" "+t,this.officialBusinessForm.get("dateTo").setValue(this.dateTo)}validation(){this.resetError(!1);var e=!0;return""!==this.officialBusinessForm.get("company").value&&null!==this.officialBusinessForm.get("company").value||(e=!1,this.errCompany=!0),""!==this.officialBusinessForm.get("location").value&&null!==this.officialBusinessForm.get("location").value||(e=!1,this.errLocation=!0),""!==this.officialBusinessForm.get("reason").value&&null!==this.officialBusinessForm.get("reason").value||(e=!1,this.errReason=!0),e}resetError(e){this.errCompany=e,this.errLocation=e,this.errReason=e}openFileBrowser(e){e.preventDefault(),document.querySelector("#fileUploadInputExample").click(),e.target.files&&e.target.files&&((new FileReader).readAsDataURL(e.target.files),this.fileList=e.target.files)}uploadFile(e){if(e.target.files.length){let i=document.querySelector("#fileUploadInputExample + .input-group .file-upload-info"),a="";for(var t=0;t<e.target.files.length;t++)a+=e.target.files[t].name+" ";i.setAttribute("value",a),this.fileList=e.target.files}}submit(){this.validation()&&s.a.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showLoaderOnConfirm:!0}).then(e=>{e.isConfirmed&&s.a.fire({title:"Please Wait !",allowOutsideClick:!1,onBeforeOpen:()=>{s.a.showLoading();var e={official_business_id:this.id,date_from:this.officialBusinessForm.get("dateFrom").value,official_business_code:this.officialBusinessForm.get("official_business_code").value,date_to:this.officialBusinessForm.get("dateTo").value,company_to_visit:this.officialBusinessForm.get("company").value,location:this.officialBusinessForm.get("location").value,description:this.officialBusinessForm.get("reason").value,created_by:sessionStorage.getItem("u"),active:!0,approval_level_id:sessionStorage.getItem("apl"),series_code:sessionStorage.getItem("sc"),category_id:sessionStorage.getItem("cat")};this.filingManagementService.officialBusinessIU(e).subscribe(e=>{if(0===e.id)s.a.fire("Failed!",e.description,"error");else{for(var t=[],i=0;i<this.documents.length;i++)t.push({created_by:sessionStorage.getItem("u"),series_code:sessionStorage.getItem("sc"),file_name:this.documents[i].file_name,file_path:this.documents[i].file_path,file_type:this.documents[i].file_type,module_id:this.documents[i].module_id,transaction_id:e.id});this.fileManagerService.updateFile(t).subscribe(t=>{if(void 0!==this.fileList){let t=this.fileList;const i=new FormData;Array.from(t).map((e,t)=>i.append("formfile",e,e.name)),this.fileManagerService.uploadFile(i,e.code,35,e.id).subscribe(t=>{0===t?s.a.fire("Failed!","File Upload Failed","error"):(s.a.fire("Ok!",e.description,"success"),this.isDashboard&&this.isSuccess.emit(e))},e=>{console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}else s.a.fire("Ok!",e.description,"success"),this.isDashboard&&this.isSuccess.emit(e)},e=>{console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}},e=>{console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}})})}cancel(){this.modalService.open(this.viewModal,{size:"sm"})}cancelTransaction(){s.a.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showLoaderOnConfirm:!0}).then(e=>{e.isConfirmed&&s.a.fire({title:"Please Wait !",allowOutsideClick:!1,onBeforeOpen:()=>{s.a.showLoading();var e={module_id:35,transaction_id:this.transactionID+",",remarks:this.remarks,employee_id:this.createdBy,created_by:sessionStorage.getItem("u"),series_code:sessionStorage.getItem("sc")};this.filingManagementService.cancel(e).subscribe(e=>{0===e?s.a.fire("Failed!","Transaction failed!","error"):(s.a.fire("Ok!","Transaction successful!","success"),this.modalService.dismissAll(),this.isView=!0)},e=>{console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}})})}}return e.\u0275fac=function(t){return new(t||e)(n.Lb(r.c),n.Lb(d.a),n.Lb(l.a),n.Lb(b.a),n.Lb(h.j))},e.\u0275cmp=n.Fb({type:e,selectors:[["app-official-business-detail"]],viewQuery:function(e,t){if(1&e&&n.Nc(m,!0),2&e){let e;n.uc(e=n.cc())&&(t.viewModal=e.first)}},inputs:{parentDetail:"parentDetail",fileType:"fileType"},outputs:{isSuccess:"isSuccess"},decls:4,vars:2,consts:[["class","spinner-wrapper",4,"ngIf"],["class","animate__animated animate__fadeInUp",4,"ngIf"],["cancelModal",""],[1,"spinner-wrapper"],[1,"spinner"],[1,"animate__animated","animate__fadeInUp"],["class","page-breadcrumb",4,"ngIf"],[1,"row"],[1,"col-md-12","grid-margin"],[1,"card"],[3,"formGroup"],[1,"card-body"],[1,"card-title"],[1,"col-md-5"],[1,"col-md-12"],[1,"form-group"],[1,"control-label"],["type","text","formControlName","company","placeholder","Company To Visit",1,"form-control"],["class","text-danger mt-1",4,"ngIf"],[1,"col-md-7"],[1,"col-md-6"],[1,"input-group"],["popDateFrom",""],["formControlName","dateFrom","name","dp",1,"form-control",3,"popover","outsideClick","value"],[1,"input-group-prepend"],["type","button",1,"btn","btn-outline-light","btn-icon","calendar"],["data-feather","calendar","appFeatherIcon","",1,"text-secondary"],[1,"col-sm-6"],["popDateTo",""],["formControlName","dateTo","name","dp",1,"form-control",3,"popover","outsideClick","value"],["type","text","formControlName","location","placeholder","Location",1,"form-control"],["type","text","formControlName","reason","placeholder","Reason",1,"form-control"],["multiple","","placeholder","Choose file","type","file","id","fileUploadInputExample",1,"file-upload-default",3,"change"],["file",""],[1,"input-group","col-xs-12",3,"click"],["type","text","disabled","","placeholder","Upload Files",1,"form-control","file-upload-info"],[1,"input-group-append"],["type","button",1,"file-upload-browse","btn","btn-primary"],[1,"container"],[1,"row","icons-list"],["class","col-sm-6",4,"ngFor","ngForOf"],["class","card-footer",4,"ngIf"],[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["routerLink","/layout/filing/official-business-view"],["aria-current","page",1,"breadcrumb-item","active"],[1,"text-danger","mt-1"],[3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","showMeridian","ngModelChange"],[1,"w-100"],[1,"d-flex","justify-content-between"],[1,"text-body","mb-2"],["target","_blank",3,"href"],[1,"text-muted","tx-12"],[1,"mdi","mdi-close",3,"click"],[1,"card-footer"],[1,"nav","justify-content-end"],["class","btn btn-warning btn-icon-text",3,"click",4,"ngIf"],["class","btn btn-primary btn-icon-text",3,"click",4,"ngIf"],[1,"btn","btn-warning","btn-icon-text",3,"click"],["data-feather","rotate-cw","appFeatherIcon","",1,"btn-icon-prepend"],[1,"btn","btn-primary","btn-icon-text",3,"click"],["data-feather","save","appFeatherIcon","",1,"btn-icon-prepend"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["type","text","rows","3","placeholder","Reason",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-warning",3,"click"]],template:function(e,t){1&e&&(n.Gc(0,g,3,0,"div",0),n.Gc(1,T,71,13,"div",1),n.Gc(2,x,19,2,"ng-template",null,2,n.Hc)),2&e&&(n.jc("ngIf",t.isLoading),n.yb(1),n.jc("ngIf",!t.isLoading))},directives:[a.n,r.s,r.j,r.e,r.b,r.i,r.d,u.a,f.a,a.m,b.f,h.c,r.l,p.a],styles:[""]}),e})()},"a48+":function(e,t,i){"use strict";i.d(t,"a",function(){return j});var a=i("ofXK"),n=i("fXoL"),o=i("PSD3"),s=i.n(o),c=i("AytR"),r=i("3Pt+"),d=i("/oZC"),l=i("tyNb"),b=i("xNm2"),h=i("MR3p"),u=i("1kSV"),f=i("ZOsW"),p=i("EDFS"),m=i("IYwT"),g=i("kUHs");const y=["cancelModal"];function v(e,t){1&e&&(n.Rb(0,"div",3),n.Rb(1,"div",4),n.Ic(2,"Loading..."),n.Qb(),n.Qb())}function R(e,t){1&e&&(n.Rb(0,"nav",50),n.Rb(1,"ol",51),n.Rb(2,"li",52),n.Rb(3,"a",53),n.Ic(4,"Filing"),n.Qb(),n.Qb(),n.Rb(5,"li",52),n.Rb(6,"a",54),n.Ic(7,"Overtime"),n.Qb(),n.Qb(),n.Rb(8,"li",55),n.Ic(9,"Detail"),n.Qb(),n.Qb(),n.Qb())}function Q(e,t){1&e&&(n.Rb(0,"p",56),n.Ic(1,"OT Type is needed!"),n.Qb())}const I=function(){return{standalone:!0}};function _(e,t){if(1&e){const e=n.Sb();n.Rb(0,"ngb-datepicker",57),n.bc("ngModelChange",function(t){return n.xc(e),n.dc(2).dfPopDate=t})("ngModelChange",function(){return n.xc(e),n.dc(2).setDateFrom()}),n.Qb(),n.Rb(1,"timepicker",58),n.bc("ngModelChange",function(t){return n.xc(e),n.dc(2).dfPopTime=t})("ngModelChange",function(){return n.xc(e),n.dc(2).setDateFrom()}),n.Qb()}if(2&e){const e=n.dc(2);n.jc("ngModel",e.dfPopDate)("ngModelOptions",n.mc(5,I)),n.yb(1),n.jc("ngModel",e.dfPopTime)("ngModelOptions",n.mc(6,I))("showMeridian",!0)}}function D(e,t){if(1&e){const e=n.Sb();n.Rb(0,"ngb-datepicker",57),n.bc("ngModelChange",function(t){return n.xc(e),n.dc(2).dtPopDate=t})("ngModelChange",function(){return n.xc(e),n.dc(2).setDateTo()}),n.Qb(),n.Rb(1,"timepicker",58),n.bc("ngModelChange",function(t){return n.xc(e),n.dc(2).dtPopTime=t})("ngModelChange",function(){return n.xc(e),n.dc(2).setDateTo()}),n.Qb()}if(2&e){const e=n.dc(2);n.jc("ngModel",e.dtPopDate)("ngModelOptions",n.mc(5,I)),n.yb(1),n.jc("ngModel",e.dtPopTime)("ngModelOptions",n.mc(6,I))("showMeridian",!0)}}function M(e,t){1&e&&(n.Rb(0,"p",56),n.Ic(1,"Reason is needed!"),n.Qb())}function F(e,t){if(1&e){const e=n.Sb();n.Rb(0,"ngb-datepicker",57),n.bc("ngModelChange",function(t){return n.xc(e),n.dc(2).bdfPopDate=t})("ngModelChange",function(){return n.xc(e),n.dc(2).setBreakDateFrom()}),n.Qb(),n.Rb(1,"timepicker",58),n.bc("ngModelChange",function(t){return n.xc(e),n.dc(2).bdfPopTime=t})("ngModelChange",function(){return n.xc(e),n.dc(2).setBreakDateFrom()}),n.Qb()}if(2&e){const e=n.dc(2);n.jc("ngModel",e.bdfPopDate)("ngModelOptions",n.mc(5,I)),n.yb(1),n.jc("ngModel",e.bdfPopTime)("ngModelOptions",n.mc(6,I))("showMeridian",!0)}}function S(e,t){if(1&e){const e=n.Sb();n.Rb(0,"ngb-datepicker",57),n.bc("ngModelChange",function(t){return n.xc(e),n.dc(2).bdtPopDate=t})("ngModelChange",function(){return n.xc(e),n.dc(2).setBreakDateTo()}),n.Qb(),n.Rb(1,"timepicker",58),n.bc("ngModelChange",function(t){return n.xc(e),n.dc(2).bdtPopTime=t})("ngModelChange",function(){return n.xc(e),n.dc(2).setBreakDateTo()}),n.Qb()}if(2&e){const e=n.dc(2);n.jc("ngModel",e.bdtPopDate)("ngModelOptions",n.mc(5,I)),n.yb(1),n.jc("ngModel",e.bdtPopTime)("ngModelOptions",n.mc(6,I))("showMeridian",!0)}}function w(e,t){if(1&e){const e=n.Sb();n.Rb(0,"div",27),n.Rb(1,"div",59),n.Rb(2,"div",60),n.Rb(3,"h6",61),n.Rb(4,"a",62),n.Mb(5,"i"),n.Ic(6),n.Qb(),n.Qb(),n.Rb(7,"p",63),n.Rb(8,"i",64),n.bc("click",function(){n.xc(e);const i=t.index;return n.dc(2).deleteDocument(i)}),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb()}if(2&e){const e=t.$implicit;n.yb(4),n.kc("href",e.url,n.zc),n.yb(1),n.Ab(e.file_class),n.yb(1),n.Jc(e.file_name)}}function T(e,t){if(1&e){const e=n.Sb();n.Rb(0,"button",69),n.bc("click",function(){return n.xc(e),n.dc(3).cancel()}),n.Mb(1,"i",70),n.Ic(2," Cancel "),n.Qb()}}function k(e,t){if(1&e){const e=n.Sb();n.Rb(0,"button",71),n.bc("click",function(){return n.xc(e),n.dc(3).submit()}),n.Mb(1,"i",72),n.Ic(2," Save Changes "),n.Qb()}}function x(e,t){if(1&e&&(n.Rb(0,"div",65),n.Rb(1,"ul",66),n.Gc(2,T,3,0,"button",67),n.Ic(3," \xa0 "),n.Gc(4,k,3,0,"button",68),n.Qb(),n.Qb()),2&e){const e=n.dc(2);n.yb(2),n.jc("ngIf",e.isCancel),n.yb(2),n.jc("ngIf",e.isSubmit)}}function C(e,t){if(1&e){const e=n.Sb();n.Rb(0,"div",5),n.Gc(1,R,10,0,"nav",6),n.Rb(2,"div",7),n.Rb(3,"div",8),n.Rb(4,"div",9),n.Rb(5,"form",10),n.Rb(6,"div",11),n.Rb(7,"h6",12),n.Ic(8,"Overtime"),n.Qb(),n.Rb(9,"div",7),n.Rb(10,"div",13),n.Rb(11,"div",7),n.Rb(12,"div",14),n.Rb(13,"div",15),n.Rb(14,"label",16),n.Ic(15,"OT Type"),n.Qb(),n.Mb(16,"ng-select",17),n.Gc(17,Q,2,0,"p",18),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Rb(18,"div",19),n.Rb(19,"div",7),n.Rb(20,"div",20),n.Rb(21,"div",15),n.Rb(22,"label",16),n.Ic(23,"Date From"),n.Qb(),n.Rb(24,"div",21),n.Gc(25,_,2,7,"ng-template",null,22,n.Hc),n.Mb(27,"input",23),n.Rb(28,"div",24),n.Rb(29,"button",25),n.Mb(30,"i",26),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Rb(31,"div",27),n.Rb(32,"div",15),n.Rb(33,"label",16),n.Ic(34,"Date To"),n.Qb(),n.Rb(35,"div",21),n.Gc(36,D,2,7,"ng-template",null,28,n.Hc),n.Mb(38,"input",29),n.Rb(39,"div",24),n.Rb(40,"button",25),n.Mb(41,"i",26),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Rb(42,"div",7),n.Rb(43,"div",13),n.Rb(44,"div",15),n.Rb(45,"label",16),n.Ic(46,"Reason"),n.Qb(),n.Mb(47,"input",30),n.Gc(48,M,2,0,"p",18),n.Qb(),n.Qb(),n.Rb(49,"div",19),n.Rb(50,"div",7),n.Rb(51,"div",31),n.Rb(52,"div",15),n.Rb(53,"label",16),n.Ic(54,"With Break"),n.Qb(),n.Rb(55,"div",32),n.Rb(56,"input",33),n.bc("change",function(){return n.xc(e),n.dc().setBreak()}),n.Qb(),n.Mb(57,"label",34),n.Qb(),n.Qb(),n.Qb(),n.Rb(58,"div",13),n.Rb(59,"div",15),n.Rb(60,"label",16),n.Ic(61,"Break From"),n.Qb(),n.Rb(62,"div",21),n.Gc(63,F,2,7,"ng-template",null,35,n.Hc),n.Mb(65,"input",36),n.Rb(66,"div",24),n.Rb(67,"button",25),n.Mb(68,"i",26),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Rb(69,"div",37),n.Rb(70,"div",15),n.Rb(71,"label",16),n.Ic(72,"Break To"),n.Qb(),n.Rb(73,"div",21),n.Gc(74,S,2,7,"ng-template",null,38,n.Hc),n.Mb(76,"input",39),n.Rb(77,"div",24),n.Rb(78,"button",25),n.Mb(79,"i",26),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Mb(80,"hr"),n.Rb(81,"div",7),n.Rb(82,"div",20),n.Rb(83,"div",15),n.Rb(84,"input",40,41),n.bc("change",function(t){return n.xc(e),n.dc().uploadFile(t)}),n.Qb(),n.Rb(86,"div",42),n.bc("click",function(t){return n.xc(e),n.dc().openFileBrowser(t)}),n.Mb(87,"input",43),n.Rb(88,"span",44),n.Rb(89,"button",45),n.Ic(90,"Upload"),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Rb(91,"div",20),n.Rb(92,"div",46),n.Rb(93,"div",47),n.Gc(94,w,9,5,"div",48),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Gc(95,x,5,2,"div",49),n.Qb(),n.Qb(),n.Qb(),n.Qb()}if(2&e){const e=n.vc(26),t=n.vc(37),i=n.vc(64),a=n.vc(75),o=n.dc();n.yb(1),n.jc("ngIf",!o.isDashboard),n.yb(4),n.jc("formGroup",o.overtimeForm),n.yb(11),n.jc("items",o.otList),n.yb(1),n.jc("ngIf",o.errOTType),n.yb(10),n.jc("popover",e)("outsideClick",!0),n.yb(11),n.jc("popover",t)("outsideClick",!0),n.yb(10),n.jc("ngIf",o.errReason),n.yb(17),n.jc("popover",i)("outsideClick",!0),n.yb(11),n.jc("popover",a)("outsideClick",!0),n.yb(18),n.jc("ngForOf",o.documents),n.yb(1),n.jc("ngIf",!o.isView)}}function L(e,t){1&e&&(n.Rb(0,"p",56),n.Ic(1,"Reason is needed!"),n.Qb())}function O(e,t){if(1&e){const e=n.Sb();n.Rb(0,"div",73),n.Rb(1,"h5",74),n.Ic(2,"Cancellation"),n.Qb(),n.Rb(3,"button",75),n.bc("click",function(){return t.$implicit.close("by: close icon")}),n.Rb(4,"span",76),n.Ic(5,"\xd7"),n.Qb(),n.Qb(),n.Qb(),n.Rb(6,"div",77),n.Rb(7,"div",7),n.Rb(8,"div",14),n.Rb(9,"div",15),n.Rb(10,"label",16),n.Ic(11,"Reason"),n.Qb(),n.Rb(12,"textarea",78),n.bc("ngModelChange",function(t){return n.xc(e),n.dc().remarks=t}),n.Qb(),n.Gc(13,L,2,0,"p",18),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Rb(14,"div",79),n.Rb(15,"button",80),n.bc("click",function(){return t.$implicit.close("by: close button")}),n.Ic(16,"Close"),n.Qb(),n.Rb(17,"button",81),n.bc("click",function(){return n.xc(e),n.dc().cancelTransaction()}),n.Ic(18,"Cancel"),n.Qb(),n.Qb()}if(2&e){const e=n.dc();n.yb(12),n.jc("ngModel",e.remarks),n.yb(1),n.jc("ngIf",e.errCancelReason)}}let j=(()=>{class e{constructor(e,t,i,o,s,r){this.fb=e,this.tenantMasterService=t,this.route=i,this.filingManagementService=o,this.fileManagerService=s,this.modalService=r,this.uri=c.a.exportFile,this.isLoading=!0,this.isView=!1,this.isCancel=!1,this.isSubmit=!1,this.errCancelReason=!1,this.dateToday={day:new Date(new Date).getDate(),month:new Date(new Date).getMonth()+1,year:new Date(new Date).getFullYear()},this.pipe=new a.e("en-US"),this.otList=[],this.transactionID="",this.remarks="",this.documents=[],this.isSuccess=new n.n,this.fileType=0,this.isDashboard=!1}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.overtimeForm=this.fb.group({dateFrom:this.pipe.transform(this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day+" 00:00","MM/dd/yyyy hh:mm a"),dateTo:this.pipe.transform(this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day+" 00:00","MM/dd/yyyy hh:mm a"),dateBreakFrom:{value:this.pipe.transform(this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day+" 00:00","MM/dd/yyyy hh:mm a"),disabled:!0},dateBreakTo:{value:this.pipe.transform(this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day+" 00:00","MM/dd/yyyy hh:mm a"),disabled:!0},selectedOTType:null,reason:"",allowBreak:!1,overtime_code:""}),void 0!==this.parentDetail&&(this.isDashboard=!0,this.isView=this.parentDetail.view,0!==this.parentDetail.dashboardId?this.id=this.parentDetail.dashboardId:(this.id="",this.overtimeForm.get("dateFrom").setValue(this.pipe.transform(this.parentDetail.dashboardDate+" 00:00","MM/dd/yyyy hh:mm a")),this.overtimeForm.get("dateTo").setValue(this.pipe.transform(this.parentDetail.dashboardDate+" 00:00","MM/dd/yyyy hh:mm a")))),this.tenantMasterService.dropdownList("52,").subscribe(e=>{this.otList=e,this.resetError(!1),""!==this.id?(this.isCancel=!0,this.isSubmit=!0,this.filingManagementService.overtimeView(this.id,this.fileType).subscribe(e=>{this.transactionID=e[0].overtime_id,this.overtimeForm.setValue({overtime_code:e[0].overtime_code,allowBreak:e[0].with_break,reason:e[0].description,selectedOTType:e[0].overtime_type_id,dateBreakFrom:this.pipe.transform(e[0].break_in,"MM/dd/yyyy hh:mm a"),dateBreakTo:this.pipe.transform(e[0].break_out,"MM/dd/yyyy hh:mm a"),dateFrom:this.pipe.transform(e[0].date_from,"MM/dd/yyyy hh:mm a"),dateTo:this.pipe.transform(e[0].date_to,"MM/dd/yyyy hh:mm a")}),this.fileManagerService.viewFile(36,this.id,this.fileType).subscribe(t=>{for(var i=0;i<t.length;i++)this.documents.push({created_by:t[i].created_by,date_created:t[i].date_created,file_name:t[i].file_name,file_path:t[i].file_path,file_type:t[i].file_type,file_class:t[i].file_class,module_id:t[i].module_id,transaction_id:t[i].transaction_id,url:this.uri+t[i].file_path});e[0].active||(this.isView=!0),this.isLoading=!1},e=>{console.log(e.error)})},e=>{console.log(e.error)})):(this.id="0",this.isLoading=!1,this.isCancel=!1,this.isSubmit=!0)},e=>{console.log(e.error)})}setBreak(){this.overtimeForm.get("allowBreak").value?(this.overtimeForm.get("dateBreakFrom").enable(),this.overtimeForm.get("dateBreakTo").enable()):(this.overtimeForm.get("dateBreakFrom").disable(),this.overtimeForm.get("dateBreakTo").disable())}setDateFrom(){let e,t;e=this.pipe.transform(null==this.dfPopDate?this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day:this.dfPopDate.year+"/"+this.dfPopDate.month+"/"+this.dfPopDate.day,"MM/dd/yyyy"),t=null===this.pipe.transform(this.dfPopTime,"hh:mm a")||void 0===this.pipe.transform(this.dfPopTime,"hh:mm a")?this.pipe.transform(this.pipe.transform(this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day+" 00:00","MM/dd/yyyy hh:mm a"),"hh:mm a"):this.pipe.transform(this.dfPopTime,"hh:mm a"),this.overtimeForm.get("dateFrom").setValue(e+" "+t)}setDateTo(){let e,t;e=this.pipe.transform(null==this.dtPopDate?this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day:this.dtPopDate.year+"/"+this.dtPopDate.month+"/"+this.dtPopDate.day,"MM/dd/yyyy"),t=null===this.pipe.transform(this.dtPopTime,"hh:mm a")||void 0===this.pipe.transform(this.dtPopTime,"hh:mm a")?this.pipe.transform(this.pipe.transform(this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day+" 00:00","MM/dd/yyyy hh:mm a"),"hh:mm a"):this.pipe.transform(this.dtPopTime,"hh:mm a"),this.overtimeForm.get("dateTo").setValue(e+" "+t)}setBreakDateFrom(){let e,t;e=this.pipe.transform(null==this.bdfPopDate?this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day:this.bdfPopDate.year+"/"+this.bdfPopDate.month+"/"+this.bdfPopDate.day,"MM/dd/yyyy"),t=null===this.pipe.transform(this.bdfPopTime,"hh:mm a")||void 0===this.pipe.transform(this.bdfPopTime,"hh:mm a")?this.pipe.transform(this.pipe.transform(this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day+" 00:00","MM/dd/yyyy hh:mm a"),"hh:mm a"):this.pipe.transform(this.bdfPopTime,"hh:mm a"),this.overtimeForm.get("dateBreakFrom").setValue(e+" "+t)}setBreakDateTo(){let e,t;e=this.pipe.transform(null==this.bdtPopDate?this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day:this.bdtPopDate.year+"/"+this.bdtPopDate.month+"/"+this.bdtPopDate.day,"MM/dd/yyyy"),t=null===this.pipe.transform(this.bdtPopTime,"hh:mm a")||void 0===this.pipe.transform(this.bdtPopTime,"hh:mm a")?this.pipe.transform(this.pipe.transform(this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day+" 00:00","MM/dd/yyyy hh:mm a"),"hh:mm a"):this.pipe.transform(this.bdtPopTime,"hh:mm a"),this.overtimeForm.get("dateBreakTo").setValue(e+" "+t)}openFileBrowser(e){e.preventDefault(),document.querySelector("#fileUploadInputExample").click(),e.target.files&&e.target.files&&((new FileReader).readAsDataURL(e.target.files),this.fileList=e.target.files)}uploadFile(e){if(e.target.files.length){let i=document.querySelector("#fileUploadInputExample + .input-group .file-upload-info"),a="";for(var t=0;t<e.target.files.length;t++)a+=e.target.files[t].name+" ";i.setAttribute("value",a),this.fileList=e.target.files}}deleteDocument(e){this.documents.splice(e,1)}validation(){this.resetError(!1);var e=!0;return""!==this.overtimeForm.get("selectedOTType").value&&null!==this.overtimeForm.get("selectedOTType").value||(e=!1,this.errOTType=!0),""!==this.overtimeForm.get("reason").value&&null!==this.overtimeForm.get("reason").value||(e=!1,this.errReason=!0),e}resetError(e){this.errOTType=e,this.errReason=e}submit(){this.validation()&&s.a.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showLoaderOnConfirm:!0}).then(e=>{e.isConfirmed&&s.a.fire({title:"Please Wait !",allowOutsideClick:!1,onBeforeOpen:()=>{s.a.showLoading();var e={overtime_id:this.id,overtime_code:this.overtimeForm.get("overtime_code").value,overtime_type_id:this.overtimeForm.get("selectedOTType").value,date_from:this.overtimeForm.get("dateFrom").value,date_to:this.overtimeForm.get("dateTo").value,with_break:this.overtimeForm.get("allowBreak").value,break_in:this.overtimeForm.get("dateBreakFrom").value,break_out:this.overtimeForm.get("dateBreakTo").value,description:this.overtimeForm.get("reason").value,created_by:sessionStorage.getItem("u"),active:!0,approval_level_id:sessionStorage.getItem("apl"),series_code:sessionStorage.getItem("sc"),category_id:sessionStorage.getItem("cat")};this.filingManagementService.overtimeIU(e).subscribe(e=>{if(0===e.id)s.a.fire("Failed!",e.description,"error");else{for(var t=[],i=0;i<this.documents.length;i++)t.push({created_by:sessionStorage.getItem("u"),series_code:sessionStorage.getItem("sc"),file_name:this.documents[i].file_name,file_path:this.documents[i].file_path,file_type:this.documents[i].file_type,module_id:this.documents[i].module_id,transaction_id:e.id});this.fileManagerService.updateFile(t).subscribe(t=>{if(void 0!==this.fileList){let t=this.fileList;const i=new FormData;Array.from(t).map((e,t)=>i.append("formfile",e,e.name)),this.fileManagerService.uploadFile(i,e.code,36,e.id).subscribe(t=>{0===t?s.a.fire("Failed!","File Upload Failed","error"):(s.a.fire("Ok!",e.description,"success"),this.isDashboard&&this.isSuccess.emit(e))},e=>{console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}else s.a.fire("Ok!",e.description,"success"),this.isDashboard&&this.isSuccess.emit(e)},e=>{console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}},e=>{console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}})})}cancel(){this.modalService.open(this.viewModal,{size:"sm"})}cancelTransaction(){s.a.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showLoaderOnConfirm:!0}).then(e=>{e.isConfirmed&&s.a.fire({title:"Please Wait !",allowOutsideClick:!1,onBeforeOpen:()=>{s.a.showLoading();var e={module_id:36,transaction_id:this.transactionID+",",remarks:this.remarks,created_by:sessionStorage.getItem("u"),series_code:sessionStorage.getItem("sc")};this.filingManagementService.cancel(e).subscribe(e=>{0===e?s.a.fire("Failed!","Transaction failed!","error"):(s.a.fire("Ok!","Transaction successful!","success"),this.modalService.dismissAll(),this.isView=!0)},e=>{console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}})})}}return e.\u0275fac=function(t){return new(t||e)(n.Lb(r.c),n.Lb(d.a),n.Lb(l.a),n.Lb(b.a),n.Lb(h.a),n.Lb(u.j))},e.\u0275cmp=n.Fb({type:e,selectors:[["app-overtime-detail"]],viewQuery:function(e,t){if(1&e&&n.Nc(y,!0),2&e){let e;n.uc(e=n.cc())&&(t.viewModal=e.first)}},inputs:{parentDetail:"parentDetail",fileType:"fileType"},outputs:{isSuccess:"isSuccess"},decls:4,vars:2,consts:[["class","spinner-wrapper",4,"ngIf"],["class","animate__animated animate__fadeInUp",4,"ngIf"],["cancelModal",""],[1,"spinner-wrapper"],[1,"spinner"],[1,"animate__animated","animate__fadeInUp"],["class","page-breadcrumb",4,"ngIf"],[1,"row"],[1,"col-md-12","grid-margin"],[1,"card"],[3,"formGroup"],[1,"card-body"],[1,"card-title"],[1,"col-md-5"],[1,"col-md-12"],[1,"form-group"],[1,"control-label"],["bindLabel","description","bindValue","id","placeholder","Select OT Type","formControlName","selectedOTType",3,"items"],["class","text-danger mt-1",4,"ngIf"],[1,"col-md-7"],[1,"col-md-6"],[1,"input-group"],["popDateFrom",""],["formControlName","dateFrom","name","dp",1,"form-control",3,"popover","outsideClick"],[1,"input-group-prepend"],["type","button",1,"btn","btn-outline-light","btn-icon","calendar"],["data-feather","calendar","appFeatherIcon","",1,"text-secondary"],[1,"col-sm-6"],["popDateTo",""],["formControlName","dateTo","name","dp",1,"form-control",3,"popover","outsideClick"],["type","text","formControlName","reason","placeholder","Reason",1,"form-control"],[1,"col-md-2"],[1,"custom-control","custom-switch"],["type","checkbox","formControlName","allowBreak","id","customSwitch1",1,"custom-control-input",3,"change"],["for","customSwitch1",1,"custom-control-label"],["popBreakDateFrom",""],["formControlName","dateBreakFrom","name","dp",1,"form-control",3,"popover","outsideClick"],[1,"col-sm-5"],["popBreakDateTo",""],["formControlName","dateBreakTo","name","dp",1,"form-control",3,"popover","outsideClick"],["multiple","","placeholder","Choose file","type","file","id","fileUploadInputExample",1,"file-upload-default",3,"change"],["file",""],[1,"input-group","col-xs-12",3,"click"],["type","text","disabled","","placeholder","Upload Files",1,"form-control","file-upload-info"],[1,"input-group-append"],["type","button",1,"file-upload-browse","btn","btn-primary"],[1,"container"],[1,"row","icons-list"],["class","col-sm-6",4,"ngFor","ngForOf"],["class","card-footer",4,"ngIf"],[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["routerLink","/layout/filing/overtime-view"],["aria-current","page",1,"breadcrumb-item","active"],[1,"text-danger","mt-1"],[3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","showMeridian","ngModelChange"],[1,"w-100"],[1,"d-flex","justify-content-between"],[1,"text-body","mb-2"],["target","_blank",3,"href"],[1,"text-muted","tx-12"],[1,"mdi","mdi-close",3,"click"],[1,"card-footer"],[1,"nav","justify-content-end"],["class","btn btn-warning btn-icon-text",3,"click",4,"ngIf"],["class","btn btn-primary btn-icon-text",3,"click",4,"ngIf"],[1,"btn","btn-warning","btn-icon-text",3,"click"],["data-feather","rotate-cw","appFeatherIcon","",1,"btn-icon-prepend"],[1,"btn","btn-primary","btn-icon-text",3,"click"],["data-feather","save","appFeatherIcon","",1,"btn-icon-prepend"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["type","text","rows","3","placeholder","Reason",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-warning",3,"click"]],template:function(e,t){1&e&&(n.Gc(0,v,3,0,"div",0),n.Gc(1,C,96,15,"div",1),n.Gc(2,O,19,2,"ng-template",null,2,n.Hc)),2&e&&(n.jc("ngIf",t.isLoading),n.yb(1),n.jc("ngIf",!t.isLoading))},directives:[a.n,r.s,r.j,r.e,f.a,r.i,r.d,r.b,p.a,m.a,r.a,a.m,l.f,u.c,r.l,g.a],styles:[""]}),e})()},mEZC:function(e,t,i){"use strict";i.d(t,"a",function(){return B});var a=i("fXoL"),n=i("ofXK"),o=i("PSD3"),s=i.n(o),c=i("AytR"),r=i("3Pt+"),d=i("tyNb"),l=i("xNm2"),b=i("MR3p"),h=i("1kSV"),u=i("J1nh"),f=i("IYwT"),p=i("EDFS"),m=i("kUHs");const g=["attendanceModal"],y=["cancelModal"];function v(e,t){1&e&&(a.Rb(0,"div",2),a.Rb(1,"div",3),a.Ic(2,"Loading..."),a.Qb(),a.Qb())}function R(e,t){1&e&&(a.Rb(0,"nav",47),a.Rb(1,"ol",48),a.Rb(2,"li",49),a.Rb(3,"a",50),a.Ic(4,"Filing"),a.Qb(),a.Qb(),a.Rb(5,"li",49),a.Rb(6,"a",51),a.Ic(7,"Change Log"),a.Qb(),a.Qb(),a.Rb(8,"li",52),a.Ic(9,"Detail"),a.Qb(),a.Qb(),a.Qb())}function Q(e,t){1&e&&(a.Rb(0,"p",53),a.Ic(1,"Reason is needed!"),a.Qb())}function I(e,t){1&e&&(a.Rb(0,"button",54),a.Mb(1,"span",55),a.Ic(2," Loading... "),a.Qb())}function _(e,t){if(1&e){const e=a.Sb();a.Rb(0,"button",56),a.bc("click",function(){return a.xc(e),a.dc(2).search()}),a.Mb(1,"i",57),a.Ic(2," Search "),a.Qb()}}function D(e,t){if(1&e){const e=a.Sb();a.Rb(0,"div",58),a.Rb(1,"div",59),a.Rb(2,"div",60),a.Rb(3,"h6",61),a.Rb(4,"a",62),a.Mb(5,"i"),a.Ic(6),a.Qb(),a.Qb(),a.Rb(7,"p",63),a.Rb(8,"i",64),a.bc("click",function(){a.xc(e);const i=t.index;return a.dc(2).deleteDocument(i)}),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Qb()}if(2&e){const e=t.$implicit;a.yb(4),a.kc("href",e.url,a.zc),a.yb(1),a.Ab(e.file_class),a.yb(1),a.Jc(e.file_name)}}function M(e,t){1&e&&(a.Rb(0,"p",53),a.Ic(1,"No attendance to be saved!"),a.Qb())}function F(e,t){if(1&e){const e=a.Sb();a.Rb(0,"tr"),a.Rb(1,"td"),a.Ic(2),a.ec(3,"date"),a.Qb(),a.Rb(4,"td"),a.Ic(5),a.Qb(),a.Rb(6,"td"),a.Ic(7),a.Qb(),a.Rb(8,"td"),a.Ic(9),a.Qb(),a.Rb(10,"td"),a.Ic(11),a.Qb(),a.Rb(12,"td"),a.Ic(13),a.Qb(),a.Rb(14,"td"),a.Rb(15,"button",65),a.bc("click",function(){a.xc(e);const i=t.index;return a.dc(2).editAttendance(i)}),a.Mb(16,"i",66),a.Qb(),a.Qb(),a.Qb()}if(2&e){const e=t.$implicit;a.yb(2),a.Jc(a.gc(3,6,e.date,"MM/dd/yyyy")),a.yb(3),a.Jc(e.sked_time_in),a.yb(2),a.Jc(e.sked_time_out),a.yb(2),a.Jc(e.time_in),a.yb(2),a.Jc(e.time_out),a.yb(2),a.Jc(e.remarks)}}function S(e,t){if(1&e){const e=a.Sb();a.Rb(0,"button",71),a.bc("click",function(){return a.xc(e),a.dc(3).cancel()}),a.Mb(1,"i",72),a.Ic(2," Cancel "),a.Qb()}}function w(e,t){if(1&e){const e=a.Sb();a.Rb(0,"button",73),a.bc("click",function(){return a.xc(e),a.dc(3).submit()}),a.Mb(1,"i",74),a.Ic(2," Save Changes "),a.Qb()}}function T(e,t){if(1&e&&(a.Rb(0,"div",67),a.Rb(1,"ul",68),a.Gc(2,S,3,0,"button",69),a.Ic(3," \xa0 "),a.Gc(4,w,3,0,"button",70),a.Qb(),a.Qb()),2&e){const e=a.dc(2);a.yb(2),a.jc("ngIf",e.isCancel),a.yb(2),a.jc("ngIf",e.isSubmit)}}const k=function(){return{standalone:!0}};function x(e,t){if(1&e){const e=a.Sb();a.Rb(0,"ngb-datepicker",91),a.bc("ngModelChange",function(t){return a.xc(e),a.dc(3).dfPopDate=t})("ngModelChange",function(){return a.xc(e),a.dc(3).setDateFrom()}),a.Qb(),a.Rb(1,"timepicker",92),a.bc("ngModelChange",function(t){return a.xc(e),a.dc(3).dfPopTime=t})("ngModelChange",function(){return a.xc(e),a.dc(3).setDateFrom()}),a.Qb()}if(2&e){const e=a.dc(3);a.jc("ngModel",e.dfPopDate)("ngModelOptions",a.mc(5,k)),a.yb(1),a.jc("ngModel",e.dfPopTime)("ngModelOptions",a.mc(6,k))("showMeridian",!0)}}function C(e,t){if(1&e){const e=a.Sb();a.Rb(0,"ngb-datepicker",91),a.bc("ngModelChange",function(t){return a.xc(e),a.dc(3).dtPopDate=t})("ngModelChange",function(){return a.xc(e),a.dc(3).setDateTo()}),a.Qb(),a.Rb(1,"timepicker",92),a.bc("ngModelChange",function(t){return a.xc(e),a.dc(3).dtPopTime=t})("ngModelChange",function(){return a.xc(e),a.dc(3).setDateTo()}),a.Qb()}if(2&e){const e=a.dc(3);a.jc("ngModel",e.dtPopDate)("ngModelOptions",a.mc(5,k)),a.yb(1),a.jc("ngModel",e.dtPopTime)("ngModelOptions",a.mc(6,k))("showMeridian",!0)}}function L(e,t){if(1&e){const e=a.Sb();a.Rb(0,"div",75),a.Rb(1,"h5",76),a.Ic(2,"Attendance Detail"),a.Qb(),a.Rb(3,"button",77),a.bc("click",function(){return t.$implicit.close("by: close icon")}),a.Rb(4,"span",78),a.Ic(5,"\xd7"),a.Qb(),a.Qb(),a.Qb(),a.Rb(6,"div",79),a.Rb(7,"form",6),a.Rb(8,"div",7),a.Rb(9,"div",31),a.Rb(10,"div",13),a.Rb(11,"label",14),a.Ic(12,"Schedule In"),a.Qb(),a.Mb(13,"input",80),a.Qb(),a.Qb(),a.Rb(14,"div",31),a.Rb(15,"div",13),a.Rb(16,"label",14),a.Ic(17,"Schedule Out"),a.Qb(),a.Mb(18,"input",81),a.Qb(),a.Qb(),a.Qb(),a.Rb(19,"div",7),a.Rb(20,"div",31),a.Rb(21,"div",13),a.Rb(22,"label",14),a.Ic(23,"Time In"),a.Qb(),a.Rb(24,"div",18),a.Gc(25,x,2,7,"ng-template",null,82,a.Hc),a.Mb(27,"input",83),a.Rb(28,"div",84),a.Rb(29,"button",85),a.Mb(30,"i",23),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Rb(31,"div",31),a.Rb(32,"div",13),a.Rb(33,"label",14),a.Ic(34,"Time Out"),a.Qb(),a.Rb(35,"div",18),a.Gc(36,C,2,7,"ng-template",null,86,a.Hc),a.Mb(38,"input",87),a.Rb(39,"div",84),a.Rb(40,"button",85),a.Mb(41,"i",23),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Rb(42,"div",88),a.Rb(43,"button",89),a.bc("click",function(){return t.$implicit.close("by: close button")}),a.Ic(44,"Close"),a.Qb(),a.Rb(45,"button",90),a.bc("click",function(){return a.xc(e),a.dc(2).updateAttendance()}),a.Ic(46,"Save changes"),a.Qb(),a.Qb()}if(2&e){const e=a.vc(26),t=a.vc(37),i=a.dc(2);a.yb(7),a.jc("formGroup",i.attendanceForm),a.yb(20),a.jc("popover",e)("outsideClick",!0),a.yb(11),a.jc("popover",t)("outsideClick",!0)}}function O(e,t){1&e&&(a.Rb(0,"p",53),a.Ic(1,"Reason is needed!"),a.Qb())}function j(e,t){if(1&e){const e=a.Sb();a.Rb(0,"div",75),a.Rb(1,"h5",76),a.Ic(2,"Cancellation"),a.Qb(),a.Rb(3,"button",77),a.bc("click",function(){return t.$implicit.close("by: close icon")}),a.Rb(4,"span",78),a.Ic(5,"\xd7"),a.Qb(),a.Qb(),a.Qb(),a.Rb(6,"div",79),a.Rb(7,"div",7),a.Rb(8,"div",40),a.Rb(9,"div",13),a.Rb(10,"label",14),a.Ic(11,"Reason"),a.Qb(),a.Rb(12,"textarea",93),a.bc("ngModelChange",function(t){return a.xc(e),a.dc(2).remarks=t}),a.Qb(),a.Gc(13,O,2,0,"p",16),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Rb(14,"div",88),a.Rb(15,"button",89),a.bc("click",function(){return t.$implicit.close("by: close button")}),a.Ic(16,"Close"),a.Qb(),a.Rb(17,"button",94),a.bc("click",function(){return a.xc(e),a.dc(2).cancelTransaction()}),a.Ic(18,"Cancel"),a.Qb(),a.Qb()}if(2&e){const e=a.dc(2);a.yb(12),a.jc("ngModel",e.remarks),a.yb(1),a.jc("ngIf",e.errCancelReason)}}function P(e,t){if(1&e){const e=a.Sb();a.Rb(0,"div",4),a.Gc(1,R,10,0,"nav",5),a.Rb(2,"form",6),a.Rb(3,"div",7),a.Rb(4,"div",8),a.Rb(5,"div",9),a.Rb(6,"div",10),a.Rb(7,"div",11),a.Rb(8,"h6"),a.Ic(9,"Change Log"),a.Qb(),a.Qb(),a.Rb(10,"div",7),a.Rb(11,"div",12),a.Rb(12,"div",13),a.Rb(13,"label",14),a.Ic(14,"Reason"),a.Qb(),a.Mb(15,"input",15),a.Gc(16,Q,2,0,"p",16),a.Qb(),a.Qb(),a.Rb(17,"div",17),a.Rb(18,"div",13),a.Rb(19,"label",14),a.Ic(20,"Date From"),a.Qb(),a.Rb(21,"div",18),a.Rb(22,"input",19,20),a.bc("click",function(){return a.xc(e),a.vc(23).toggle()}),a.Qb(),a.Rb(24,"div",21),a.Rb(25,"button",22),a.bc("click",function(){return a.xc(e),a.vc(23).toggle()}),a.Mb(26,"i",23),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Rb(27,"div",24),a.Rb(28,"div",13),a.Rb(29,"label",14),a.Ic(30,"Date To"),a.Qb(),a.Rb(31,"div",7),a.Rb(32,"div",25),a.Rb(33,"div",18),a.Rb(34,"input",26,27),a.bc("click",function(){return a.xc(e),a.vc(35).toggle()}),a.Qb(),a.Rb(36,"div",21),a.Rb(37,"button",22),a.bc("click",function(){return a.xc(e),a.vc(35).toggle()}),a.Mb(38,"i",23),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Rb(39,"div",24),a.Rb(40,"div",28),a.Gc(41,I,3,0,"button",29),a.Gc(42,_,3,0,"button",30),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Rb(43,"div",7),a.Rb(44,"div",31),a.Rb(45,"div",13),a.Rb(46,"input",32,33),a.bc("change",function(t){return a.xc(e),a.dc().uploadFile(t)}),a.Qb(),a.Rb(48,"div",34),a.bc("click",function(t){return a.xc(e),a.dc().openFileBrowser(t)}),a.Mb(49,"input",35),a.Rb(50,"span",21),a.Rb(51,"button",36),a.Ic(52,"Upload"),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Rb(53,"div",31),a.Rb(54,"div",37),a.Rb(55,"div",38),a.Gc(56,D,9,5,"div",39),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Mb(57,"hr"),a.Rb(58,"div",7),a.Rb(59,"div",40),a.Gc(60,M,2,0,"p",16),a.Rb(61,"div",41),a.Rb(62,"table",42),a.Rb(63,"thead"),a.Rb(64,"tr"),a.Rb(65,"th"),a.Ic(66,"Date"),a.Qb(),a.Rb(67,"th"),a.Ic(68,"Schedule In"),a.Qb(),a.Rb(69,"th"),a.Ic(70,"Schedule Out"),a.Qb(),a.Rb(71,"th"),a.Ic(72,"Time In"),a.Qb(),a.Rb(73,"th"),a.Ic(74,"Time Out"),a.Qb(),a.Rb(75,"th"),a.Ic(76,"Remarks"),a.Qb(),a.Rb(77,"th"),a.Ic(78,"Action"),a.Qb(),a.Qb(),a.Qb(),a.Rb(79,"tbody"),a.Gc(80,F,17,9,"tr",43),a.Qb(),a.Mb(81,"tfoot"),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Gc(82,T,5,2,"div",44),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Qb(),a.Gc(83,L,47,5,"ng-template",null,45,a.Hc),a.Gc(85,j,19,2,"ng-template",null,46,a.Hc),a.Qb()}if(2&e){const e=a.dc();a.yb(1),a.jc("ngIf",!e.isDashboard),a.yb(1),a.jc("formGroup",e.changeLogForm),a.yb(14),a.jc("ngIf",e.errReason),a.yb(25),a.jc("ngIf",e.isSearch),a.yb(1),a.jc("ngIf",!e.isSearch),a.yb(14),a.jc("ngForOf",e.documents),a.yb(4),a.jc("ngIf",e.errAttendance),a.yb(20),a.jc("ngForOf",e.attendanceList),a.yb(2),a.jc("ngIf",!e.isView)}}let B=(()=>{class e{constructor(e,t,i,o,s,r){this.fb=e,this.route=t,this.filingManagementService=i,this.fileManagerService=o,this.modalService=s,this.attendanceManagementService=r,this.uri=c.a.exportFile,this.isLoading=!0,this.isSearch=!1,this.errReason=!1,this.errAttendance=!1,this.errCancelReason=!1,this.isView=!1,this.isCancel=!1,this.isSubmit=!1,this.documents=[],this.fileList=[],this.attendanceList=[],this.dateToday={day:new Date(new Date).getDate(),month:new Date(new Date).getMonth()+1,year:new Date(new Date).getFullYear()},this.pipe=new n.e("en-US"),this.isSuccess=new a.n,this.fileType=0,this.isDashboard=!1,this.transactionID="",this.remarks=""}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.changeLogForm=this.fb.group({reason:"",changeLogCode:"",dateFrom:this.dateToday,dateTo:this.dateToday}),void 0!==this.parentDetail&&(this.isDashboard=!0,this.isView=this.parentDetail.view,0!==this.parentDetail.dashboardId?this.id=this.parentDetail.dashboardId:(this.id="",this.changeLogForm.get("dateFrom").setValue({year:new Date(this.parentDetail.dashboardDate).getFullYear(),month:new Date(this.parentDetail.dashboardDate).getMonth()+1,day:new Date(this.parentDetail.dashboardDate).getDate()}),this.changeLogForm.get("dateTo").setValue({year:new Date(this.parentDetail.dashboardDate).getFullYear(),month:new Date(this.parentDetail.dashboardDate).getMonth()+1,day:new Date(this.parentDetail.dashboardDate).getDate()}))),this.attendanceForm=this.fb.group({index:0,scheduleIn:"",scheduleOut:"",timeIn:"",timeOut:""}),""!==this.id?(this.isCancel=!0,this.isSubmit=!0,this.filingManagementService.changeLogView(this.id,this.fileType).subscribe(e=>{this.transactionID=e[0].change_log_id,this.changeLogForm.setValue({reason:e[0].reason,changeLogCode:e[0].change_log_code,dateFrom:{year:new Date(e[0].date_from).getFullYear(),month:new Date(e[0].date_from).getMonth()+1,day:new Date(e[0].date_from).getDate()},dateTo:{year:new Date(e[0].date_to).getFullYear(),month:new Date(e[0].date_to).getMonth()+1,day:new Date(e[0].date_to).getDate()}}),this.filingManagementService.changeLogDetailView(this.id,this.fileType).subscribe(t=>{this.attendanceList=t,this.fileManagerService.viewFile(33,this.id,this.fileType).subscribe(t=>{for(var i=0;i<t.length;i++)this.documents.push({created_by:t[i].created_by,date_created:t[i].date_created,file_name:t[i].file_name,file_path:t[i].file_path,file_type:t[i].file_type,file_class:t[i].file_class,module_id:t[i].module_id,transaction_id:t[i].transaction_id,url:this.uri+t[i].file_path});e[0].active||(this.isView=!0),this.isLoading=!1},e=>{console.log(e.error)})},e=>{console.log(e.error)})},e=>{console.log(e.error)})):(this.id="0",this.isLoading=!1,this.isCancel=!1,this.isSubmit=!0)}ngAfterViewInit(){}search(){this.resetError(!1),this.isSearch=!0;const e=this.pipe.transform(this.changeLogForm.get("dateFrom").value.year+"/"+this.changeLogForm.get("dateFrom").value.month+"/"+this.changeLogForm.get("dateFrom").value.day,"MM/dd/yyyy"),t=this.pipe.transform(this.changeLogForm.get("dateTo").value.year+"/"+this.changeLogForm.get("dateTo").value.month+"/"+this.changeLogForm.get("dateTo").value.day,"MM/dd/yyyy");this.attendanceManagementService.changeLogAttendanceView(e,t).subscribe(e=>{this.attendanceList=e,this.isSearch=!1},e=>{console.log(e.error),this.isSearch=!1})}editAttendance(e){this.modalRef=this.modalService.open(this.attendanceModal,{size:"xs"}),this.attendanceForm.setValue({index:e,scheduleIn:this.attendanceList[e].sked_time_in,scheduleOut:this.attendanceList[e].sked_time_out,timeIn:""===this.attendanceList[e].time_in?this.attendanceList[e].sked_time_in:this.attendanceList[e].time_in,timeOut:""===this.attendanceList[e].time_out?this.attendanceList[e].sked_time_out:this.attendanceList[e].time_out})}updateAttendance(){const e=this.attendanceForm.get("index").value;this.attendanceList[e].time_in=this.attendanceForm.get("timeIn").value,this.attendanceList[e].time_out=this.attendanceForm.get("timeOut").value,this.attendanceList[e].is_update=!0,this.attendanceList[e].remarks=""!==this.attendanceList[e].time_in&&""!==this.attendanceList[e].time_out?"Present":"Absent",this.modalRef.close()}setDateFrom(){let e,t;e=this.pipe.transform(null==this.dfPopDate?this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day:this.dfPopDate.year+"/"+this.dfPopDate.month+"/"+this.dfPopDate.day,"MM/dd/yyyy"),t=null===this.pipe.transform(this.dfPopTime,"hh:mm a")||void 0===this.pipe.transform(this.dfPopTime,"hh:mm a")?this.pipe.transform(this.pipe.transform(this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day+" 00:00","MM/dd/yyyy hh:mm a"),"hh:mm a"):this.pipe.transform(this.dfPopTime,"hh:mm a"),this.attendanceForm.get("timeIn").setValue(e+" "+t)}setDateTo(){let e,t;e=this.pipe.transform(null==this.dtPopDate?this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day:this.dtPopDate.year+"/"+this.dtPopDate.month+"/"+this.dtPopDate.day,"MM/dd/yyyy"),t=null===this.pipe.transform(this.dtPopTime,"hh:mm a")||void 0===this.pipe.transform(this.dtPopTime,"hh:mm a")?this.pipe.transform(this.pipe.transform(this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day+" 00:00","MM/dd/yyyy hh:mm a"),"hh:mm a"):this.pipe.transform(this.dtPopTime,"hh:mm a"),this.attendanceForm.get("timeOut").setValue(e+" "+t)}openFileBrowser(e){e.preventDefault(),document.querySelector("#fileUploadInputExample").click(),e.target.files&&e.target.files&&((new FileReader).readAsDataURL(e.target.files),this.fileList=e.target.files)}uploadFile(e){if(e.target.files.length){let i=document.querySelector("#fileUploadInputExample + .input-group .file-upload-info"),a="";for(var t=0;t<e.target.files.length;t++)a+=e.target.files[t].name+" ";i.setAttribute("value",a),this.fileList=e.target.files}}deleteDocument(e){this.documents.splice(e,1)}validation(){var e=!0;return this.resetError(!1),""!==this.changeLogForm.get("reason").value&&null!==this.changeLogForm.get("reason").value||(e=!1,this.errReason=!0),this.attendanceList.filter(e=>!0===e.is_update).length<=0&&(e=!1,this.errAttendance=!0),e}resetError(e){this.errAttendance=e,this.errReason=e}submit(){this.validation()&&s.a.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showLoaderOnConfirm:!0}).then(e=>{e.isConfirmed&&s.a.fire({title:"Please Wait !",allowOutsideClick:!1,onBeforeOpen:()=>{s.a.showLoading();var e=[];const t=this.attendanceList.filter(e=>!0===e.is_update);for(var i=0;i<t.length;i++)e.push({date:t[i].date,time_in:t[i].time_in,time_out:t[i].time_out,remarks:t[i].remarks});var a={change_log_id:this.id,change_log_code:this.changeLogForm.get("changeLogCode").value,reason:this.changeLogForm.get("reason").value,date_from:this.pipe.transform(this.changeLogForm.get("dateFrom").value.year+"/"+this.changeLogForm.get("dateFrom").value.month+"/"+this.changeLogForm.get("dateFrom").value.day,"MM/dd/yyyy"),date_to:this.pipe.transform(this.changeLogForm.get("dateTo").value.year+"/"+this.changeLogForm.get("dateTo").value.month+"/"+this.changeLogForm.get("dateTo").value.day,"MM/dd/yyyy"),active:!0,approval_level_id:sessionStorage.getItem("apl"),series_code:sessionStorage.getItem("sc"),category_id:sessionStorage.getItem("cat"),created_by:sessionStorage.getItem("u"),Detail:e};this.filingManagementService.changeLogIU(a).subscribe(e=>{if(0===e.id)s.a.fire("Failed!",e.description,"error");else{for(var t=[],i=0;i<this.documents.length;i++)t.push({created_by:sessionStorage.getItem("u"),series_code:sessionStorage.getItem("sc"),file_name:this.documents[i].file_name,file_path:this.documents[i].file_path,file_type:this.documents[i].file_type,module_id:this.documents[i].module_id,transaction_id:e.id});this.fileManagerService.updateFile(t).subscribe(t=>{if(void 0!==this.fileList){let t=this.fileList;const i=new FormData;Array.from(t).map((e,t)=>i.append("formfile",e,e.name)),this.fileManagerService.uploadFile(i,e.code,33,e.id).subscribe(t=>{0===t?s.a.fire("Failed!","File Upload Failed","error"):(s.a.fire("Ok!",e.description,"success"),this.isDashboard&&this.isSuccess.emit(e))},e=>{console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}else s.a.fire("Ok!",e.description,"success"),this.isDashboard&&this.isSuccess.emit(e)},e=>{console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}},e=>{console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}})})}cancel(){this.modalService.open(this.viewModal,{size:"sm"})}cancelTransaction(){s.a.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showLoaderOnConfirm:!0}).then(e=>{e.isConfirmed&&s.a.fire({title:"Please Wait !",allowOutsideClick:!1,onBeforeOpen:()=>{s.a.showLoading();var e={module_id:33,transaction_id:this.transactionID+",",remarks:this.remarks,created_by:sessionStorage.getItem("u"),series_code:sessionStorage.getItem("sc")};this.filingManagementService.cancel(e).subscribe(e=>{0===e?s.a.fire("Failed!","Transaction failed!","error"):(s.a.fire("Ok!","Transaction successful!","success"),this.modalService.dismissAll(),this.isView=!0)},e=>{console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}})})}}return e.\u0275fac=function(t){return new(t||e)(a.Lb(r.c),a.Lb(d.a),a.Lb(l.a),a.Lb(b.a),a.Lb(h.j),a.Lb(u.a))},e.\u0275cmp=a.Fb({type:e,selectors:[["app-change-log-detail"]],viewQuery:function(e,t){if(1&e&&(a.Nc(g,!0),a.Nc(y,!0)),2&e){let e;a.uc(e=a.cc())&&(t.attendanceModal=e.first),a.uc(e=a.cc())&&(t.viewModal=e.first)}},inputs:{parentDetail:"parentDetail",fileType:"fileType"},outputs:{isSuccess:"isSuccess"},decls:2,vars:2,consts:[["class","spinner-wrapper",4,"ngIf"],["class","animate__animated animate__fadeInUp",4,"ngIf"],[1,"spinner-wrapper"],[1,"spinner"],[1,"animate__animated","animate__fadeInUp"],["class","page-breadcrumb",4,"ngIf"],[3,"formGroup"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"col-sm-4"],[1,"form-group"],[1,"control-label"],["type","text","formControlName","reason","placeholder","Reason",1,"form-control"],["class","text-danger mt-1",4,"ngIf"],[1,"col-md-3"],[1,"input-group"],["placeholder","mm/dd/yyyy","name","dp","formControlName","dateFrom","ngbDatepicker","",1,"form-control",3,"click"],["df","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-light","btn-icon","calendar",3,"click"],["data-feather","calendar","appFeatherIcon","",1,"text-secondary"],[1,"col-md-5"],[1,"col-md-7"],["placeholder","mm/dd/yyyy","name","dp","formControlName","dateTo","ngbDatepicker","",1,"form-control",3,"click"],["dt","ngbDatepicker"],[1,"text-right"],["class","btn btn-primary","type","button","disabled","",4,"ngIf"],["type","button","class","btn btn-primary btn-icon-text",3,"click",4,"ngIf"],[1,"col-md-6"],["multiple","","placeholder","Choose file","type","file","id","fileUploadInputExample",1,"file-upload-default",3,"change"],["file",""],[1,"input-group","col-xs-12",3,"click"],["type","text","disabled","","placeholder","Upload Files",1,"form-control","file-upload-info"],["type","button",1,"file-upload-browse","btn","btn-primary"],[1,"container"],[1,"row","icons-list"],["class","col-sm-6",4,"ngFor","ngForOf"],[1,"col-md-12"],[1,"table-responsive"],["id","dataTableExample",1,"table"],[4,"ngFor","ngForOf"],["class","card-footer",4,"ngIf"],["attendanceModal",""],["cancelModal",""],[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["routerLink","/layout/filing/change-log-view"],["aria-current","page",1,"breadcrumb-item","active"],[1,"text-danger","mt-1"],["type","button","disabled","",1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["type","button",1,"btn","btn-primary","btn-icon-text",3,"click"],["data-feather","search","appFeatherIcon","",1,"btn-icon-prepend"],[1,"col-sm-6"],[1,"w-100"],[1,"d-flex","justify-content-between"],[1,"text-body","mb-2"],["target","_blank",3,"href"],[1,"text-muted","tx-12"],[1,"mdi","mdi-close",3,"click"],["type","button","title","Edit",1,"btn","btn-sm","btn-primary","btn-icon",3,"click"],[1,"feather","icon-edit-2"],[1,"card-footer"],[1,"nav","justify-content-end"],["class","btn btn-warning btn-icon-text",3,"click",4,"ngIf"],["class","btn btn-primary btn-icon-text",3,"click",4,"ngIf"],[1,"btn","btn-warning","btn-icon-text",3,"click"],["data-feather","rotate-cw","appFeatherIcon","",1,"btn-icon-prepend"],[1,"btn","btn-primary","btn-icon-text",3,"click"],["data-feather","save","appFeatherIcon","",1,"btn-icon-prepend"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["type","text","formControlName","scheduleIn","readonly","","placeholder","Overtime Code",1,"form-control"],["type","text","formControlName","scheduleOut","readonly","","placeholder","Balance",1,"form-control"],["popDateFrom",""],["formControlName","timeIn","name","dp",1,"form-control",3,"popover","outsideClick"],[1,"input-group-prepend"],["type","button",1,"btn","btn-outline-light","btn-icon","calendar"],["popDateTo",""],["formControlName","timeOut","name","dp",1,"form-control",3,"popover","outsideClick"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","showMeridian","ngModelChange"],["type","text","rows","3","placeholder","Reason",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-warning",3,"click"]],template:function(e,t){1&e&&(a.Gc(0,v,3,0,"div",0),a.Gc(1,P,87,9,"div",1)),2&e&&(a.jc("ngIf",t.isLoading),a.yb(1),a.jc("ngIf",!t.isLoading))},directives:[n.n,r.s,r.j,r.e,r.b,r.i,r.d,h.i,f.a,n.m,d.f,p.a,h.c,r.l,m.a],pipes:[n.e],styles:[""]}),e})()}}]);