(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"0Ns0":function(e,t,i){"use strict";i.r(t),i.d(t,"TimekeepingModule",function(){return xe});var n=i("ofXK"),a=i("pFYJ"),o=i("tyNb"),r=i("njyG"),d=i("XNiG"),c=i("PSD3"),b=i.n(c),s=i("AytR"),l=i("fXoL"),h=i("1kSV"),m=i("ltvU"),p=i("3Pt+"),u=i("J1nh"),g=i("nkOh"),y=i("ZOsW"),f=i("IYwT"),R=i("EDFS"),Q=i("kUHs"),v=i("IheW");function I(e,t){if(1&e&&(l.Rb(0,"div",8),l.Rb(1,"div",9),l.Ic(2),l.Qb(),l.Qb()),2&e){const e=l.dc();l.yb(1),l.Ec("width: ",e.progress,"%;"),l.yb(1),l.Kc(" ",e.progress,"%")}}let _=(()=>{class e{constructor(e,t){this.http=e,this.handler=t,this.uri=s.a.uploadUrl+"DataUploadManagement/",this.progress=0,this.parentFun=new l.n,this.onUploadFinished=new l.n,this.uploadFile=e=>{e.target.files.length&&document.querySelector("#fileUploadInputExample + .input-group .file-upload-info").setAttribute("value",e.target.files[0].name);var t=e.target.files;if(0===t.length)return;this.http=new v.c(this.handler);let i=t[0];const n=new FormData;n.append("formfile",i,i.name),this.http.post(this.uri+"attendance_log_temp?series_code="+sessionStorage.getItem("sc")+"&created_by="+sessionStorage.getItem("u"),n,{reportProgress:!0,observe:"events"}).subscribe(e=>{e.type===v.e.UploadProgress?this.progress=Math.round(100*e.loaded/e.total):e.type===v.e.Response&&this.onUploadFinished.emit(e.body)})}}ngOnInit(){this.http=new v.c(this.handler)}openFileBrowser(e){e.preventDefault(),document.querySelector("#fileUploadInputExample").click(),e.target.files&&e.target.files[0]&&(new FileReader).readAsDataURL(e.target.files[0])}}return e.\u0275fac=function(t){return new(t||e)(l.Lb(v.c),l.Lb(v.b))},e.\u0275cmp=l.Fb({type:e,selectors:[["app-file-upload"]],outputs:{parentFun:"parentFun",onUploadFinished:"onUploadFinished"},decls:9,vars:1,consts:[[1,"form-group"],["placeholder","Choose file","type","file","name","img[]","id","fileUploadInputExample",1,"file-upload-default",3,"change"],["file",""],[1,"input-group","col-xs-12",3,"click"],["type","text","disabled","","placeholder","Upload Log",1,"form-control","file-upload-info"],[1,"input-group-append"],["type","button",1,"file-upload-browse","btn","btn-primary"],["class","progress",4,"ngIf"],[1,"progress"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar"]],template:function(e,t){1&e&&(l.Rb(0,"div",0),l.Rb(1,"input",1,2),l.bc("change",function(e){return t.uploadFile(e)}),l.Qb(),l.Rb(3,"div",3),l.bc("click",function(e){return t.openFileBrowser(e)}),l.Mb(4,"input",4),l.Rb(5,"span",5),l.Rb(6,"button",6),l.Ic(7,"Upload"),l.Qb(),l.Qb(),l.Qb(),l.Gc(8,I,3,4,"div",7),l.Qb()),2&e&&(l.yb(8),l.jc("ngIf",t.progress>0))},directives:[n.n],styles:[""]}),e})();const k=["uploadModal"],T=["attendanceModal"];function D(e,t){1&e&&(l.Rb(0,"div",2),l.Rb(1,"div",3),l.Ic(2,"Loading..."),l.Qb(),l.Qb())}function M(e,t){1&e&&(l.Rb(0,"button",42),l.Mb(1,"span",43),l.Ic(2," Loading... "),l.Qb())}function F(e,t){if(1&e){const e=l.Sb();l.Rb(0,"button",33),l.bc("click",function(){return l.xc(e),l.dc(2).search()}),l.Mb(1,"i",44),l.Ic(2," Search "),l.Qb()}}function L(e,t){if(1&e){const e=l.Sb();l.Rb(0,"tr"),l.Rb(1,"td"),l.Ic(2),l.Qb(),l.Rb(3,"td"),l.Ic(4),l.Qb(),l.Rb(5,"td"),l.Ic(6),l.Qb(),l.Rb(7,"td"),l.Ic(8),l.Qb(),l.Rb(9,"td"),l.Rb(10,"button",45),l.bc("click",function(){l.xc(e);const i=t.index;l.dc();const n=l.vc(78);return l.dc().openLogModal(n,i)}),l.Mb(11,"i",46),l.Qb(),l.Qb(),l.Qb()}if(2&e){const e=t.$implicit;l.yb(2),l.Jc(e.employeeCode),l.yb(2),l.Jc(e.displayName),l.yb(2),l.Jc(e.logs),l.yb(2),l.Jc(e.type)}}function w(e,t){if(1&e){const e=l.Sb();l.Rb(0,"ngb-datepicker",63),l.bc("ngModelChange",function(t){return l.xc(e),l.dc(3).attendanceDate=t})("ngModelChange",function(){return l.xc(e),l.dc(3).setDateTime()}),l.Qb(),l.Rb(1,"timepicker",64),l.bc("ngModelChange",function(t){return l.xc(e),l.dc(3).attendanceTime=t})("ngModelChange",function(){return l.xc(e),l.dc(3).setDateTime()}),l.Qb()}if(2&e){const e=l.dc(3);l.jc("ngModel",e.attendanceDate),l.yb(1),l.jc("ngModel",e.attendanceTime)("showMeridian",!0)}}function S(e,t){if(1&e){const e=l.Sb();l.Rb(0,"div",47),l.Rb(1,"h5",48),l.Ic(2,"Attendance Log"),l.Qb(),l.Rb(3,"button",49),l.bc("click",function(){return t.$implicit.close("by: close icon")}),l.Rb(4,"span",50),l.Ic(5,"\xd7"),l.Qb(),l.Qb(),l.Qb(),l.Rb(6,"div",51),l.Rb(7,"div",10),l.Rb(8,"div",52),l.Rb(9,"div",17),l.Rb(10,"label",18),l.Ic(11,"Logs"),l.Qb(),l.Rb(12,"div",21),l.Gc(13,w,2,3,"ng-template",null,53,l.Hc),l.Rb(15,"input",54),l.bc("ngModelChange",function(t){return l.xc(e),l.dc(2).attendandeDateTime=t}),l.Qb(),l.Rb(16,"div",55),l.Rb(17,"button",56),l.Mb(18,"i",26),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Rb(19,"div",57),l.Rb(20,"div",17),l.Rb(21,"label",18),l.Ic(22,"Type"),l.Qb(),l.Rb(23,"ng-select",58),l.bc("ngModelChange",function(t){return l.xc(e),l.dc(2).selectedType=t}),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Rb(24,"div",59),l.Rb(25,"button",60),l.bc("click",function(){return t.$implicit.close("by: close button")}),l.Ic(26,"Close"),l.Qb(),l.Rb(27,"button",61),l.bc("click",function(){return l.xc(e),l.dc(2).deleteAttendance()}),l.Ic(28,"Delete Logs"),l.Qb(),l.Rb(29,"button",62),l.bc("click",function(){return l.xc(e),l.dc(2).submitAttendance()}),l.Ic(30,"Save changes"),l.Qb(),l.Qb()}if(2&e){const e=l.vc(14),t=l.dc(2);l.yb(15),l.kc("value",t.attendandeDateTime),l.jc("ngModel",t.attendandeDateTime)("popover",e)("outsideClick",!0),l.yb(8),l.jc("items",t.type)("ngModel",t.selectedType)}}function C(e,t){if(1&e){const e=l.Sb();l.Rb(0,"div",47),l.Rb(1,"h5",48),l.Ic(2,"Upload Log"),l.Qb(),l.Rb(3,"button",49),l.bc("click",function(){return t.$implicit.close("by: close icon")}),l.Rb(4,"span",50),l.Ic(5,"\xd7"),l.Qb(),l.Qb(),l.Qb(),l.Rb(6,"div",51),l.Rb(7,"div",10),l.Rb(8,"div",29),l.Rb(9,"div",17),l.Rb(10,"label"),l.Ic(11,"File upload"),l.Qb(),l.Rb(12,"div",10),l.Rb(13,"div",15),l.Rb(14,"app-file-upload",65),l.bc("onUploadFinished",function(t){return l.xc(e),l.dc(2).uploadFinished(t)}),l.Qb(),l.Qb(),l.Rb(15,"div",57),l.Rb(16,"button",33),l.bc("click",function(){return l.xc(e),l.dc(2).exportTemplate()}),l.Mb(17,"i",36),l.Ic(18," Download Template "),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Mb(19,"hr"),l.Rb(20,"div",10),l.Rb(21,"div",29),l.Rb(22,"div",37),l.Rb(23,"table",66),l.Rb(24,"thead"),l.Rb(25,"tr"),l.Rb(26,"th"),l.Ic(27,"Employee Code"),l.Qb(),l.Rb(28,"th"),l.Ic(29,"Employee Name"),l.Qb(),l.Rb(30,"th"),l.Ic(31,"Logs"),l.Qb(),l.Rb(32,"th"),l.Ic(33,"Type"),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Rb(34,"div",59),l.Rb(35,"button",60),l.bc("click",function(){return t.$implicit.close()}),l.Ic(36,"Close"),l.Qb(),l.Rb(37,"button",62),l.bc("click",function(){return l.xc(e),l.dc(2).submitUpload()}),l.Ic(38,"Save changes"),l.Qb(),l.Qb()}}function O(e,t){if(1&e){const e=l.Sb();l.Rb(0,"div",4),l.Rb(1,"nav",5),l.Rb(2,"ol",6),l.Rb(3,"li",7),l.Rb(4,"a",8),l.Ic(5,"Timekeeping"),l.Qb(),l.Qb(),l.Rb(6,"li",9),l.Ic(7,"Attendance Log"),l.Qb(),l.Qb(),l.Qb(),l.Rb(8,"div",10),l.Rb(9,"div",11),l.Rb(10,"div",12),l.Rb(11,"div",13),l.Rb(12,"div",14),l.Rb(13,"div",10),l.Rb(14,"div",15),l.Rb(15,"h6"),l.Ic(16,"Attendance Log"),l.Qb(),l.Qb(),l.Qb(),l.Mb(17,"hr"),l.Qb(),l.Rb(18,"form",16),l.Rb(19,"div",10),l.Rb(20,"div",15),l.Rb(21,"div",17),l.Rb(22,"label",18),l.Ic(23,"Employee"),l.Qb(),l.Mb(24,"ng-select",19),l.Qb(),l.Qb(),l.Rb(25,"div",20),l.Rb(26,"div",17),l.Rb(27,"label",18),l.Ic(28,"Date From"),l.Qb(),l.Rb(29,"div",21),l.Rb(30,"input",22,23),l.bc("click",function(){return l.xc(e),l.vc(31).toggle()}),l.Qb(),l.Rb(32,"div",24),l.Rb(33,"button",25),l.bc("click",function(){return l.xc(e),l.vc(31).toggle()}),l.Mb(34,"i",26),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Rb(35,"div",20),l.Rb(36,"div",17),l.Rb(37,"label",18),l.Ic(38,"Date To"),l.Qb(),l.Rb(39,"div",21),l.Rb(40,"input",27,28),l.bc("click",function(){return l.xc(e),l.vc(41).toggle()}),l.Qb(),l.Rb(42,"div",24),l.Rb(43,"button",25),l.bc("click",function(){return l.xc(e),l.vc(41).toggle()}),l.Mb(44,"i",26),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Rb(45,"div",10),l.Rb(46,"div",29),l.Rb(47,"div",30),l.Gc(48,M,3,0,"button",31),l.Gc(49,F,3,0,"button",32),l.Ic(50," \xa0 "),l.Rb(51,"button",33),l.bc("click",function(){return l.xc(e),l.dc().openUploadModal()}),l.Mb(52,"i",34),l.Ic(53," Upload "),l.Qb(),l.Ic(54," \xa0 "),l.Rb(55,"button",35),l.Mb(56,"i",36),l.Ic(57," Download "),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Mb(58,"hr"),l.Rb(59,"div",10),l.Rb(60,"div",29),l.Rb(61,"div",37),l.Rb(62,"table",38),l.Rb(63,"thead"),l.Rb(64,"tr"),l.Rb(65,"th"),l.Ic(66,"Employee Code"),l.Qb(),l.Rb(67,"th"),l.Ic(68,"Employee Name"),l.Qb(),l.Rb(69,"th"),l.Ic(70,"Logs"),l.Qb(),l.Rb(71,"th"),l.Ic(72,"Type"),l.Qb(),l.Rb(73,"th"),l.Ic(74,"Action"),l.Qb(),l.Qb(),l.Qb(),l.Rb(75,"tbody"),l.Gc(76,L,12,4,"tr",39),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Gc(77,S,31,6,"ng-template",null,40,l.Hc),l.Gc(79,C,39,0,"ng-template",null,41,l.Hc),l.Qb()}if(2&e){const e=l.dc();l.yb(18),l.jc("formGroup",e.attendanceForm),l.yb(6),l.jc("items",e.employeeList),l.yb(24),l.jc("ngIf",e.isSearch),l.yb(1),l.jc("ngIf",!e.isSearch),l.yb(13),l.jc("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),l.yb(14),l.jc("ngForOf",e.attendanceList)}}let x=(()=>{class e{constructor(e,t,i,a,o){this.modalService=e,this.userManagementService=t,this.fb=i,this.attendanceManagementService=a,this.dataUploadManagementService=o,this.uri=s.a.exportUrl,this.pipe=new n.e("en-US"),this.isLoading=!0,this.employeeList=[],this.uploadedList=[],this.attendanceList=[],this.isSearch=!1,this.startDate={day:new Date(sessionStorage.getItem("s")).getDate(),month:new Date(sessionStorage.getItem("s")).getMonth()+1,year:new Date(sessionStorage.getItem("s")).getFullYear()},this.endDate={day:new Date(sessionStorage.getItem("e")).getDate(),month:new Date(sessionStorage.getItem("e")).getMonth()+1,year:new Date(sessionStorage.getItem("e")).getFullYear()},this.type=[{id:0,description:"In"},{id:1,description:"Out"}],this.dtOptions={},this.dtTrigger=new d.a,this.uploadFinished=e=>{this.uploadedList=[];for(var t=0;t<e.length;t++){var i=this.employeeList.filter(i=>i.bio_id==e[t].bio_id)[0];this.uploadedList.push({employeeCode:i.employee_code,displayName:i.display_name,logs:e[t].date_time,type:0===e[t].in_out?"In":"Out"})}$("#modalTable").DataTable({data:this.uploadedList,columns:[{data:"employeeCode"},{data:"displayName"},{data:"logs"},{data:"type"}]})}}ngOnInit(){this.dtOptions={pagingType:"full_numbers",pageLength:5,lengthMenu:[5,10,25],processing:!0},this.attendanceForm=this.fb.group({dateFrom:this.startDate,dateTo:this.endDate,selectedEmployee:null}),this.userManagementService.employeeList().subscribe(e=>{this.employeeList=e,this.isLoading=!1,setTimeout(()=>{this.dtTrigger.next()},100)},e=>{console.log(e.error)})}exportTemplate(){this.dataUploadManagementService.templateAttendance().subscribe(e=>{window.location.href=this.uri+e.response},e=>{console.log(e.error)})}openLogModal(e,t){this.attendanceDate={day:new Date(this.attendanceList[t].logs).getDate(),month:new Date(this.attendanceList[t].logs).getMonth()+1,year:new Date(this.attendanceList[t].logs).getFullYear()},this.attendandeDateTime=this.pipe.transform(this.attendanceDate.year+"/"+this.attendanceDate.month+"/"+this.attendanceDate.day+" "+new Date(this.attendanceList[t].logs).getHours()+":"+new Date(this.attendanceList[t].logs).getMinutes(),"MM/dd/yyyy hh:mm a"),this.selectedIndex=t,this.selectedType=this.attendanceList[t].inOut,this.modalService.open(e)}submitAttendance(){b.a.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showLoaderOnConfirm:!0}).then(e=>{e.isConfirmed&&b.a.fire({title:"Please Wait !",allowOutsideClick:!1,onBeforeOpen:()=>{b.a.showLoading();var e={bio_id:this.attendanceList[this.selectedIndex].bioId,date_time:this.attendanceList[this.selectedIndex].logs,in_out:this.attendanceList[this.selectedIndex].inOut,terminal_id:this.attendanceList[this.selectedIndex].terminalId,created_by:this.attendanceList[this.selectedIndex].createdBy,date_created:this.attendanceList[this.selectedIndex].dateCreated,date_time_new:this.attendandeDateTime,in_out_new:this.selectedType,created_by_new:sessionStorage.getItem("u"),series_code:sessionStorage.getItem("sc")};this.attendanceManagementService.attendanceIU(e).subscribe(e=>{0===e?b.a.fire("Failed!","Transaction failed!","error"):(b.a.fire("Ok!","Transaction successful!","success"),this.modalService.dismissAll(),this.search())},e=>{console.log(e.error),b.a.fire("Failed!","Transaction failed!","error")})}})})}deleteAttendance(){b.a.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showLoaderOnConfirm:!0}).then(e=>{e.isConfirmed&&b.a.fire({title:"Please Wait !",allowOutsideClick:!1,onBeforeOpen:()=>{b.a.showLoading();var e={bio_id:this.attendanceList[this.selectedIndex].bioId,date_time:this.attendanceList[this.selectedIndex].logs,in_out:this.attendanceList[this.selectedIndex].inOut,terminal_id:this.attendanceList[this.selectedIndex].terminalId,created_by:this.attendanceList[this.selectedIndex].createdBy,date_created:this.attendanceList[this.selectedIndex].dateCreated,date_time_new:this.attendandeDateTime,in_out_new:this.selectedType,created_by_new:sessionStorage.getItem("u"),series_code:sessionStorage.getItem("sc")};this.attendanceManagementService.attendanceD(e).subscribe(e=>{0===e?b.a.fire("Failed!","Transaction failed!","error"):(b.a.fire("Ok!","Transaction successful!","success"),this.modalService.dismissAll(),this.search())},e=>{console.log(e.error),b.a.fire("Failed!","Transaction failed!","error")})}})})}setDateTime(){null!==this.pipe.transform(this.attendanceTime,"hh:mm a")&&(this.attendandeDateTime=this.pipe.transform(this.attendanceDate.year+"/"+this.attendanceDate.month+"/"+this.attendanceDate.day,"MM/dd/yyyy")+" "+this.pipe.transform(this.attendanceTime,"hh:mm a"))}openUploadModal(){this.modalService.open(this.uploadModal,{size:"lg"})}search(){this.isSearch=!0,this.attendanceList=[],this.attendanceManagementService.attendanceView(this.pipe.transform(this.attendanceForm.get("dateFrom").value.year+"/"+this.attendanceForm.get("dateFrom").value.month+"/"+this.attendanceForm.get("dateFrom").value.day,"MM/dd/yyyy"),this.pipe.transform(this.attendanceForm.get("dateTo").value.year+"/"+this.attendanceForm.get("dateTo").value.month+"/"+this.attendanceForm.get("dateTo").value.day,"MM/dd/yyyy"),null===this.attendanceForm.get("selectedEmployee").value?"":this.attendanceForm.get("selectedEmployee").value).subscribe(e=>{for(var t=0;t<e.length;t++){var i=this.employeeList.filter(i=>i.bio_id==e[t].bio_id)[0];this.attendanceList.push({bioId:i.bio_id,employeeCode:i.employee_code,displayName:i.display_name,logs:e[t].date_time,type:0===e[t].in_out?"In":"Out",inOut:e[t].in_out,terminalId:e[t].terminal_id,dateCreated:e[t].date_created,createdBy:e[t].created_by})}this.rerender(),this.isSearch=!1},e=>{console.log(e.error)})}rerender(){this.dtElement.dtInstance.then(e=>{e.clear().draw(),e.destroy(),this.dtTrigger.next()})}ngOnDestroy(){this.dtTrigger.unsubscribe()}openFileBrowser(e){e.preventDefault(),document.querySelector("#fileUploadInputExample").click(),e.target.files&&e.target.files[0]&&(new FileReader).readAsDataURL(e.target.files[0])}handleFileInput(e){e.target.files.length&&document.querySelector("#fileUploadInputExample + .input-group .file-upload-info").setAttribute("value",e.target.files[0].name)}submitUpload(){b.a.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showLoaderOnConfirm:!0}).then(e=>{e.isConfirmed&&b.a.fire({title:"Please Wait !",allowOutsideClick:!1,onBeforeOpen:()=>{b.a.showLoading();var e={created_by:sessionStorage.getItem("u"),series_code:sessionStorage.getItem("sc")};this.attendanceManagementService.attendanceI(e).subscribe(e=>{0===e?b.a.fire("Failed!","Transaction failed!","error"):(b.a.fire("Ok!","Transaction successful!","success"),this.modalService.dismissAll())},e=>{console.log(e.error),b.a.fire("Failed!","Transaction failed!","error")})}})})}}return e.\u0275fac=function(t){return new(t||e)(l.Lb(h.j),l.Lb(m.a),l.Lb(p.c),l.Lb(u.a),l.Lb(g.a))},e.\u0275cmp=l.Fb({type:e,selectors:[["app-attendance-log"]],viewQuery:function(e,t){if(1&e&&(l.Nc(k,!0),l.Nc(T,!0),l.Nc(r.a,!0)),2&e){let e;l.uc(e=l.cc())&&(t.uploadModal=e.first),l.uc(e=l.cc())&&(t.attendanceModal=e.first),l.uc(e=l.cc())&&(t.dtElement=e.first)}},decls:2,vars:2,consts:[["class","spinner-wrapper",4,"ngIf"],["class","animate__animated animate__fadeInUp",4,"ngIf"],[1,"spinner-wrapper"],[1,"spinner"],[1,"animate__animated","animate__fadeInUp"],[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"col-md-6"],[3,"formGroup"],[1,"form-group"],[1,"control-label"],["name","Employee","bindLabel","display_name","bindValue","bio_id","placeholder","Select Employee","formControlName","selectedEmployee",3,"items"],[1,"col-md-3"],[1,"input-group"],["placeholder","mm/dd/yyyy","name","dp","formControlName","dateFrom","ngbDatepicker","",1,"form-control",3,"click"],["d","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-light","btn-icon","calendar",3,"click"],["data-feather","calendar","appFeatherIcon","",1,"text-secondary"],["placeholder","mm/dd/yyyy","name","dp","formControlName","dateTo","ngbDatepicker","",1,"form-control",3,"click"],["d2","ngbDatepicker"],[1,"col-md-12"],[1,"text-right"],["class","btn btn-primary","type","button","disabled","",4,"ngIf"],["type","button","class","btn btn-primary btn-icon-text",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary","btn-icon-text",3,"click"],["data-feather","upload-cloud","appFeatherIcon","",1,"btn-icon-prepend"],["type","button",1,"btn","btn-primary","btn-icon-text"],["data-feather","download-cloud","appFeatherIcon","",1,"btn-icon-prepend"],[1,"table-responsive"],["datatable","",1,"row-border","hover",3,"dtOptions","dtTrigger"],[4,"ngFor","ngForOf"],["attendanceModal",""],["uploadModal",""],["type","button","disabled","",1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["data-feather","search","appFeatherIcon","",1,"btn-icon-prepend"],["type","button","title","Edit",1,"btn","btn-sm","btn-primary","btn-icon",3,"click"],[1,"feather","icon-edit-2"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-md-8"],["popDate",""],["name","dp",1,"form-control",3,"ngModel","popover","outsideClick","value","ngModelChange"],[1,"input-group-prepend"],["type","button",1,"btn","btn-outline-light","btn-icon","calendar"],[1,"col-md-4"],["name","Employee","bindLabel","description","bindValue","id","placeholder","Select Type",3,"items","ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[3,"ngModel","ngModelChange"],[3,"ngModel","showMeridian","ngModelChange"],[3,"onUploadFinished"],["id","modalTable",1,"table"]],template:function(e,t){1&e&&(l.Gc(0,D,3,0,"div",0),l.Gc(1,O,81,7,"div",1)),2&e&&(l.jc("ngIf",t.isLoading),l.yb(1),l.jc("ngIf",!t.isLoading))},directives:[n.n,o.f,p.s,p.j,p.e,y.a,p.i,p.d,p.b,h.i,f.a,r.a,n.m,p.l,R.a,h.c,Q.a,_],styles:[""]}),e})();var E=i("EVdn");function j(e,t){1&e&&(l.Rb(0,"div",2),l.Rb(1,"div",3),l.Ic(2,"Loading..."),l.Qb(),l.Qb())}function N(e,t){1&e&&(l.Rb(0,"button",42),l.Mb(1,"span",43),l.Ic(2," Loading... "),l.Qb())}function G(e,t){if(1&e){const e=l.Sb();l.Rb(0,"button",44),l.bc("click",function(){return l.xc(e),l.dc(2).search()}),l.Mb(1,"i",45),l.Ic(2," Search "),l.Qb()}}function P(e,t){if(1&e){const e=l.Sb();l.Rb(0,"button",47),l.bc("click",function(){l.xc(e);const t=l.dc().index;l.dc();const i=l.vc(85);return l.dc().openLogModal(i,t)}),l.Mb(1,"i",48),l.Qb()}}function B(e,t){if(1&e&&(l.Rb(0,"tr"),l.Rb(1,"td"),l.Ic(2),l.Qb(),l.Rb(3,"td"),l.Ic(4),l.Qb(),l.Rb(5,"td"),l.Ic(6),l.ec(7,"date"),l.Qb(),l.Rb(8,"td"),l.Ic(9),l.Qb(),l.Rb(10,"td"),l.Ic(11),l.Qb(),l.Rb(12,"td"),l.Ic(13),l.Qb(),l.Rb(14,"td"),l.Ic(15),l.Qb(),l.Rb(16,"td"),l.Ic(17),l.Qb(),l.Rb(18,"td"),l.Gc(19,P,2,0,"button",46),l.Qb(),l.Qb()),2&e){const e=t.$implicit;l.yb(2),l.Jc(e.employee_code),l.yb(2),l.Jc(e.display_name),l.yb(2),l.Jc(l.gc(7,9,e.date,"MM/dd/yyyy")),l.yb(3),l.Jc(e.sked_in),l.yb(2),l.Jc(e.sked_out),l.yb(2),l.Jc(e.time_in),l.yb(2),l.Jc(e.time_out),l.yb(2),l.Jc(e.remarks),l.yb(2),l.jc("ngIf",!e.is_add)}}const H=function(){return{standalone:!0}};function U(e,t){if(1&e){const e=l.Sb();l.Rb(0,"ngb-datepicker",65),l.bc("ngModelChange",function(t){return l.xc(e),l.dc(3).dfPopDate=t})("ngModelChange",function(){return l.xc(e),l.dc(3).setDateFrom()}),l.Qb(),l.Rb(1,"timepicker",66),l.bc("ngModelChange",function(t){return l.xc(e),l.dc(3).dfPopTime=t})("ngModelChange",function(){return l.xc(e),l.dc(3).setDateFrom()}),l.Qb()}if(2&e){const e=l.dc(3);l.jc("ngModel",e.dfPopDate)("ngModelOptions",l.mc(5,H)),l.yb(1),l.jc("ngModel",e.dfPopTime)("ngModelOptions",l.mc(6,H))("showMeridian",!0)}}function A(e,t){if(1&e){const e=l.Sb();l.Rb(0,"ngb-datepicker",65),l.bc("ngModelChange",function(t){return l.xc(e),l.dc(3).dtPopDate=t})("ngModelChange",function(){return l.xc(e),l.dc(3).setDateTo()}),l.Qb(),l.Rb(1,"timepicker",66),l.bc("ngModelChange",function(t){return l.xc(e),l.dc(3).dtPopTime=t})("ngModelChange",function(){return l.xc(e),l.dc(3).setDateTo()}),l.Qb()}if(2&e){const e=l.dc(3);l.jc("ngModel",e.dtPopDate)("ngModelOptions",l.mc(5,H)),l.yb(1),l.jc("ngModel",e.dtPopTime)("ngModelOptions",l.mc(6,H))("showMeridian",!0)}}function V(e,t){if(1&e){const e=l.Sb();l.Rb(0,"div",49),l.Rb(1,"h5",50),l.Ic(2,"Attendance Log"),l.Qb(),l.Rb(3,"button",51),l.bc("click",function(){return t.$implicit.close("by: close icon")}),l.Rb(4,"span",52),l.Ic(5,"\xd7"),l.Qb(),l.Qb(),l.Qb(),l.Rb(6,"div",53),l.Rb(7,"form",16),l.Rb(8,"div",10),l.Rb(9,"div",15),l.Rb(10,"div",18),l.Rb(11,"label",19),l.Ic(12,"Schedule In"),l.Qb(),l.Mb(13,"input",54),l.Qb(),l.Qb(),l.Rb(14,"div",15),l.Rb(15,"div",18),l.Rb(16,"label",19),l.Ic(17,"Schedule Out"),l.Qb(),l.Mb(18,"input",55),l.Qb(),l.Qb(),l.Qb(),l.Rb(19,"div",10),l.Rb(20,"div",15),l.Rb(21,"div",18),l.Rb(22,"label",19),l.Ic(23,"Time In"),l.Qb(),l.Rb(24,"div",20),l.Gc(25,U,2,7,"ng-template",null,56,l.Hc),l.Mb(27,"input",57),l.Rb(28,"div",58),l.Rb(29,"button",59),l.Mb(30,"i",25),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Rb(31,"div",15),l.Rb(32,"div",18),l.Rb(33,"label",19),l.Ic(34,"Time Out"),l.Qb(),l.Rb(35,"div",20),l.Gc(36,A,2,7,"ng-template",null,60,l.Hc),l.Mb(38,"input",61),l.Rb(39,"div",58),l.Rb(40,"button",59),l.Mb(41,"i",25),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Rb(42,"div",62),l.Rb(43,"button",63),l.bc("click",function(){return t.$implicit.close("by: close button")}),l.Ic(44,"Close"),l.Qb(),l.Rb(45,"button",64),l.bc("click",function(){return l.xc(e),l.dc(2).updateAttendance()}),l.Ic(46,"Save changes"),l.Qb(),l.Qb()}if(2&e){const e=l.vc(26),t=l.vc(37),i=l.dc(2);l.yb(7),l.jc("formGroup",i.editForm),l.yb(20),l.jc("popover",e)("outsideClick",!0),l.yb(11),l.jc("popover",t)("outsideClick",!0)}}function J(e,t){if(1&e){const e=l.Sb();l.Rb(0,"div",4),l.Rb(1,"nav",5),l.Rb(2,"ol",6),l.Rb(3,"li",7),l.Rb(4,"a",8),l.Ic(5,"Timekeeping"),l.Qb(),l.Qb(),l.Rb(6,"li",9),l.Ic(7,"Employee Attendance"),l.Qb(),l.Qb(),l.Qb(),l.Rb(8,"div",10),l.Rb(9,"div",11),l.Rb(10,"div",12),l.Rb(11,"div",13),l.Rb(12,"div",14),l.Rb(13,"div",10),l.Rb(14,"div",15),l.Rb(15,"h6"),l.Ic(16,"Employee Attendance"),l.Qb(),l.Qb(),l.Qb(),l.Mb(17,"hr"),l.Qb(),l.Rb(18,"form",16),l.Rb(19,"div",10),l.Rb(20,"div",17),l.Rb(21,"div",18),l.Rb(22,"label",19),l.Ic(23,"Date From"),l.Qb(),l.Rb(24,"div",20),l.Rb(25,"input",21,22),l.bc("click",function(){return l.xc(e),l.vc(26).toggle()}),l.Qb(),l.Rb(27,"div",23),l.Rb(28,"button",24),l.bc("click",function(){return l.xc(e),l.vc(26).toggle()}),l.Mb(29,"i",25),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Rb(30,"div",17),l.Rb(31,"div",18),l.Rb(32,"label",19),l.Ic(33,"Date To"),l.Qb(),l.Rb(34,"div",20),l.Rb(35,"input",26,27),l.bc("click",function(){return l.xc(e),l.vc(36).toggle()}),l.Qb(),l.Rb(37,"div",23),l.Rb(38,"button",24),l.bc("click",function(){return l.xc(e),l.vc(36).toggle()}),l.Mb(39,"i",25),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Rb(40,"div",28),l.Rb(41,"div",18),l.Rb(42,"label",19),l.Ic(43,"Employee"),l.Qb(),l.Mb(44,"ng-select",29),l.Qb(),l.Qb(),l.Rb(45,"div",30),l.Rb(46,"div",18),l.Rb(47,"label",19),l.Ic(48,"Missing Logs Only?"),l.Qb(),l.Rb(49,"div",31),l.Mb(50,"input",32),l.Mb(51,"label",33),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Rb(52,"div",10),l.Rb(53,"div",34),l.Rb(54,"div",35),l.Gc(55,N,3,0,"button",36),l.Gc(56,G,3,0,"button",37),l.Qb(),l.Qb(),l.Qb(),l.Mb(57,"hr"),l.Rb(58,"div",10),l.Rb(59,"div",34),l.Rb(60,"div",38),l.Rb(61,"table",39),l.Rb(62,"thead"),l.Rb(63,"tr"),l.Rb(64,"th"),l.Ic(65,"Employee Code"),l.Qb(),l.Rb(66,"th"),l.Ic(67,"Employee Name"),l.Qb(),l.Rb(68,"th"),l.Ic(69,"Date"),l.Qb(),l.Rb(70,"th"),l.Ic(71,"Schedule In"),l.Qb(),l.Rb(72,"th"),l.Ic(73,"Schedule Out"),l.Qb(),l.Rb(74,"th"),l.Ic(75,"Time In"),l.Qb(),l.Rb(76,"th"),l.Ic(77,"Time Out"),l.Qb(),l.Rb(78,"th"),l.Ic(79,"Remarks"),l.Qb(),l.Rb(80,"th"),l.Ic(81,"Action"),l.Qb(),l.Qb(),l.Qb(),l.Rb(82,"tbody"),l.Gc(83,B,20,12,"tr",40),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Gc(84,V,47,5,"ng-template",null,41,l.Hc),l.Qb()}if(2&e){const e=l.dc();l.yb(18),l.jc("formGroup",e.attendanceForm),l.yb(26),l.jc("items",e.employeeList),l.yb(11),l.jc("ngIf",e.isSearch),l.yb(1),l.jc("ngIf",!e.isSearch),l.yb(5),l.jc("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),l.yb(22),l.jc("ngForOf",e.attendanceList)}}let Y=(()=>{class e{constructor(e,t,i,a){this.modalService=e,this.attendanceManagementService=t,this.fb=i,this.userManagementService=a,this.isLoading=!0,this.isSearch=!1,this.attendanceList=[],this.employeeList=[],this.pipe=new n.e("en-US"),this.startDate={day:new Date(sessionStorage.getItem("s")).getDate(),month:new Date(sessionStorage.getItem("s")).getMonth()+1,year:new Date(sessionStorage.getItem("s")).getFullYear()},this.endDate={day:new Date(sessionStorage.getItem("e")).getDate(),month:new Date(sessionStorage.getItem("e")).getMonth()+1,year:new Date(sessionStorage.getItem("e")).getFullYear()},this.dtOptions={},this.dtTrigger=new d.a}ngOnInit(){this.dtOptions={pagingType:"full_numbers",pageLength:10,lengthMenu:[5,10,25],processing:!0},this.attendanceForm=this.fb.group({dateFrom:this.startDate,dateTo:this.endDate,selectedEmployee:null,missingLogs:!1}),this.editForm=this.fb.group({index:0,scheduleIn:"",scheduleOut:"",timeIn:"",timeOut:""}),this.userManagementService.employeeSupervisor(!1,0).subscribe(e=>{this.employeeList=Object(E.merge)([{encrypt_employee_id:0,display_name:"All"}],e),this.isLoading=!1,setTimeout(()=>{this.dtTrigger.next()},100)},e=>{console.log(e.error)})}search(){this.isSearch=!0;const e=this.pipe.transform(this.attendanceForm.get("dateFrom").value.year+"/"+this.attendanceForm.get("dateFrom").value.month+"/"+this.attendanceForm.get("dateFrom").value.day,"MM/dd/yyyy"),t=this.pipe.transform(this.attendanceForm.get("dateTo").value.year+"/"+this.attendanceForm.get("dateTo").value.month+"/"+this.attendanceForm.get("dateTo").value.day,"MM/dd/yyyy");let i=this.attendanceForm.get("selectedEmployee").value;null===i&&(i="0");const n=this.attendanceForm.get("missingLogs").value;this.attendanceManagementService.logView(e,t,i,n,!1).subscribe(e=>{this.attendanceList=e,console.log(e),this.rerender(),this.isSearch=!1},e=>{console.log(e.error),this.isSearch=!1})}rerender(){this.dtElement.dtInstance.then(e=>{e.clear().draw(),e.destroy(),this.dtTrigger.next()})}openLogModal(e,t){this.editForm.setValue({index:t,scheduleIn:this.attendanceList[t].sked_in,scheduleOut:this.attendanceList[t].sked_out,timeIn:""===this.attendanceList[t].time_in?this.attendanceList[t].sked_in:this.attendanceList[t].time_in,timeOut:""===this.attendanceList[t].time_out?this.attendanceList[t].sked_out:this.attendanceList[t].time_out}),this.modalService.open(e)}setDateFrom(){let e,t;e=this.pipe.transform(null==this.dfPopDate?this.startDate.year+"/"+this.startDate.month+"/"+this.startDate.day:this.dfPopDate.year+"/"+this.dfPopDate.month+"/"+this.dfPopDate.day,"MM/dd/yyyy"),t=null===this.pipe.transform(this.dfPopTime,"hh:mm a")||void 0===this.pipe.transform(this.dfPopTime,"hh:mm a")?this.pipe.transform(this.pipe.transform(this.startDate.year+"/"+this.startDate.month+"/"+this.startDate.day+" 00:00","MM/dd/yyyy hh:mm a"),"hh:mm a"):this.pipe.transform(this.dfPopTime,"hh:mm a"),this.editForm.get("timeIn").setValue(e+" "+t)}setDateTo(){let e,t;e=this.pipe.transform(null==this.dtPopDate?this.endDate.year+"/"+this.endDate.month+"/"+this.endDate.day:this.dtPopDate.year+"/"+this.dtPopDate.month+"/"+this.dtPopDate.day,"MM/dd/yyyy"),t=null===this.pipe.transform(this.dtPopTime,"hh:mm a")||void 0===this.pipe.transform(this.dtPopTime,"hh:mm a")?this.pipe.transform(this.pipe.transform(this.endDate.year+"/"+this.endDate.month+"/"+this.endDate.day+" 00:00","MM/dd/yyyy hh:mm a"),"hh:mm a"):this.pipe.transform(this.dtPopTime,"hh:mm a"),this.editForm.get("timeOut").setValue(e+" "+t)}updateAttendance(){b.a.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showLoaderOnConfirm:!0}).then(e=>{e.isConfirmed&&b.a.fire({title:"Please Wait !",allowOutsideClick:!1,onBeforeOpen:()=>{b.a.showLoading();let e=this.attendanceList[this.editForm.get("index").value];var t={employee_id:e.encrypt_employee_id,date:e.date,time_in:this.editForm.get("timeIn").value,time_out:this.editForm.get("timeOut").value,sked_time_in:e.sked_in,sked_time_out:e.sked_out,series_code:sessionStorage.getItem("sc"),created_by:sessionStorage.getItem("u")};this.attendanceManagementService.updateAttendance(t).subscribe(e=>{0===e?b.a.fire("Failed!","Transaction failed!","error"):(this.modalService.dismissAll(),b.a.fire("Ok!","Transaction successful!","success"),this.search())},e=>{console.log(e.error),b.a.fire("Failed!","Transaction failed!","error")})}})})}}return e.\u0275fac=function(t){return new(t||e)(l.Lb(h.j),l.Lb(u.a),l.Lb(p.c),l.Lb(m.a))},e.\u0275cmp=l.Fb({type:e,selectors:[["app-employee-attendance"]],viewQuery:function(e,t){if(1&e&&l.Nc(r.a,!0),2&e){let e;l.uc(e=l.cc())&&(t.dtElement=e.first)}},decls:2,vars:2,consts:[["class","spinner-wrapper",4,"ngIf"],["class","animate__animated animate__fadeInUp",4,"ngIf"],[1,"spinner-wrapper"],[1,"spinner"],[1,"animate__animated","animate__fadeInUp"],[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"col-md-6"],[3,"formGroup"],[1,"col-md-3"],[1,"form-group"],[1,"control-label"],[1,"input-group"],["placeholder","mm/dd/yyyy","name","dp","formControlName","dateFrom","value","dateFrom","ngbDatepicker","",1,"form-control",3,"click"],["d","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-light","btn-icon","calendar",3,"click"],["data-feather","calendar","appFeatherIcon","",1,"text-secondary"],["placeholder","mm/dd/yyyy","name","dp","formControlName","dateTo","ngbDatepicker","",1,"form-control",3,"click"],["dt","ngbDatepicker"],[1,"col-md-4"],["name","Employee","bindLabel","display_name","bindValue","encrypt_employee_id","placeholder","Select Employee","formControlName","selectedEmployee",3,"items"],[1,"col-md-2"],[1,"custom-control","custom-switch"],["type","checkbox","formControlName","missingLogs","id","customSwitch1",1,"custom-control-input"],["for","customSwitch1",1,"custom-control-label"],[1,"col-md-12"],[1,"text-right"],["class","btn btn-primary","type","button","disabled","",4,"ngIf"],["type","button","class","btn btn-primary btn-icon-text",3,"click",4,"ngIf"],[1,"table-responsive"],["datatable","","id","dataTableExample",1,"table",3,"dtOptions","dtTrigger"],[4,"ngFor","ngForOf"],["attendanceModal",""],["type","button","disabled","",1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["type","button",1,"btn","btn-primary","btn-icon-text",3,"click"],["data-feather","search","appFeatherIcon","",1,"btn-icon-prepend"],["type","button","title","Edit","class","btn btn-sm btn-primary btn-icon",3,"click",4,"ngIf"],["type","button","title","Edit",1,"btn","btn-sm","btn-primary","btn-icon",3,"click"],[1,"feather","icon-edit-2"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["type","text","formControlName","scheduleIn","readonly","","placeholder","Overtime Code",1,"form-control"],["type","text","formControlName","scheduleOut","readonly","","placeholder","Balance",1,"form-control"],["popDateFrom",""],["formControlName","timeIn","name","dp",1,"form-control",3,"popover","outsideClick"],[1,"input-group-prepend"],["type","button",1,"btn","btn-outline-light","btn-icon","calendar"],["popDateTo",""],["formControlName","timeOut","name","dp",1,"form-control",3,"popover","outsideClick"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","showMeridian","ngModelChange"]],template:function(e,t){1&e&&(l.Gc(0,j,3,0,"div",0),l.Gc(1,J,86,7,"div",1)),2&e&&(l.jc("ngIf",t.isLoading),l.yb(1),l.jc("ngIf",!t.isLoading))},directives:[n.n,o.f,p.s,p.j,p.e,p.b,h.i,p.i,p.d,f.a,y.a,p.a,r.a,n.m,R.a,h.c,p.l,Q.a],pipes:[n.e],styles:[""]}),e})();var W=i("xNm2");function z(e,t){1&e&&(l.Rb(0,"div",2),l.Rb(1,"div",3),l.Ic(2,"Loading..."),l.Qb(),l.Qb())}function K(e,t){1&e&&(l.Rb(0,"p",43),l.Ic(1,"Please select employee!"),l.Qb())}function q(e,t){1&e&&(l.Rb(0,"button",44),l.Mb(1,"span",45),l.Ic(2," Loading... "),l.Qb())}function X(e,t){if(1&e){const e=l.Sb();l.Rb(0,"button",35),l.bc("click",function(){return l.xc(e),l.dc(2).search()}),l.Mb(1,"i",46),l.Ic(2," Search "),l.Qb()}}function Z(e,t){if(1&e){const e=l.Sb();l.Rb(0,"tr"),l.Rb(1,"td"),l.Rb(2,"div",39),l.Rb(3,"input",47),l.bc("change",function(i){l.xc(e);const n=t.index;return l.dc(2).checkTrans(n,i)}),l.Qb(),l.Mb(4,"label",48),l.Qb(),l.Qb(),l.Rb(5,"td"),l.Ic(6),l.Qb(),l.Rb(7,"td"),l.Ic(8),l.Qb(),l.Rb(9,"td"),l.Ic(10),l.Qb(),l.Rb(11,"td"),l.Ic(12),l.Qb(),l.Rb(13,"td"),l.Ic(14),l.Qb(),l.Rb(15,"td"),l.Ic(16),l.Qb(),l.Rb(17,"td"),l.Ic(18),l.Qb(),l.Rb(19,"td"),l.Ic(20),l.Qb(),l.Rb(21,"td"),l.Ic(22),l.Qb(),l.Rb(23,"td"),l.Ic(24),l.Qb(),l.Qb()}if(2&e){const e=t.$implicit,i=l.dc(2);l.yb(3),l.kc("id",e.overtime_code),l.jc("checked",i.isChecked),l.yb(1),l.kc("for",e.overtime_code),l.yb(2),l.Jc(e.employee_code),l.yb(2),l.Jc(e.display_name),l.yb(2),l.Jc(e.schedule_in),l.yb(2),l.Jc(e.schedule_out),l.yb(2),l.Jc(e.time_in),l.yb(2),l.Jc(e.time_out),l.yb(2),l.Jc(e.file_ot_in),l.yb(2),l.Jc(e.file_ot_out),l.yb(2),l.Jc(e.final_in),l.yb(2),l.Jc(e.final_out)}}function ee(e,t){if(1&e){const e=l.Sb();l.Rb(0,"div",4),l.Rb(1,"nav",5),l.Rb(2,"ol",6),l.Rb(3,"li",7),l.Rb(4,"a",8),l.Ic(5,"Timekeeping"),l.Qb(),l.Qb(),l.Rb(6,"li",9),l.Ic(7,"Overtime Render"),l.Qb(),l.Qb(),l.Qb(),l.Rb(8,"div",10),l.Rb(9,"div",11),l.Rb(10,"div",12),l.Rb(11,"div",13),l.Rb(12,"div",14),l.Rb(13,"div",10),l.Rb(14,"div",15),l.Rb(15,"h6"),l.Ic(16,"Overtime Render"),l.Qb(),l.Qb(),l.Qb(),l.Mb(17,"hr"),l.Qb(),l.Rb(18,"form",16),l.Rb(19,"div",10),l.Rb(20,"div",17),l.Rb(21,"div",18),l.Rb(22,"label",19),l.Ic(23,"Date From"),l.Qb(),l.Rb(24,"div",20),l.Rb(25,"input",21,22),l.bc("click",function(){return l.xc(e),l.vc(26).toggle()}),l.Qb(),l.Rb(27,"div",23),l.Rb(28,"button",24),l.bc("click",function(){return l.xc(e),l.vc(26).toggle()}),l.Mb(29,"i",25),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Rb(30,"div",17),l.Rb(31,"div",18),l.Rb(32,"label",19),l.Ic(33,"Date To"),l.Qb(),l.Rb(34,"div",20),l.Rb(35,"input",26,27),l.bc("click",function(){return l.xc(e),l.vc(36).toggle()}),l.Qb(),l.Rb(37,"div",23),l.Rb(38,"button",24),l.bc("click",function(){return l.xc(e),l.vc(36).toggle()}),l.Mb(39,"i",25),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Rb(40,"div",28),l.Rb(41,"div",18),l.Rb(42,"label",19),l.Ic(43,"Employee"),l.Qb(),l.Mb(44,"ng-select",29),l.Gc(45,K,2,0,"p",30),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Rb(46,"div",10),l.Rb(47,"div",31),l.Rb(48,"div",32),l.Gc(49,q,3,0,"button",33),l.Gc(50,X,3,0,"button",34),l.Ic(51," \xa0 "),l.Rb(52,"button",35),l.bc("click",function(){return l.xc(e),l.dc().submit()}),l.Mb(53,"i",36),l.Ic(54," Save Changes "),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Mb(55,"hr"),l.Rb(56,"div",10),l.Rb(57,"div",31),l.Rb(58,"div",37),l.Rb(59,"table",38),l.Rb(60,"thead"),l.Rb(61,"tr"),l.Rb(62,"th"),l.Rb(63,"div",39),l.Rb(64,"input",40),l.bc("change",function(t){return l.xc(e),l.dc().checkAll(t)}),l.Qb(),l.Mb(65,"label",41),l.Qb(),l.Qb(),l.Rb(66,"th"),l.Ic(67,"Employee Code"),l.Qb(),l.Rb(68,"th"),l.Ic(69,"Employee Name"),l.Qb(),l.Rb(70,"th"),l.Ic(71,"Schedule In"),l.Qb(),l.Rb(72,"th"),l.Ic(73,"Schedule Out"),l.Qb(),l.Rb(74,"th"),l.Ic(75,"Time In"),l.Qb(),l.Rb(76,"th"),l.Ic(77,"Time Out"),l.Qb(),l.Rb(78,"th"),l.Ic(79,"Filed OT In"),l.Qb(),l.Rb(80,"th"),l.Ic(81,"Filed OT Out"),l.Qb(),l.Rb(82,"th"),l.Ic(83,"Final In"),l.Qb(),l.Rb(84,"th"),l.Ic(85,"Final Out"),l.Qb(),l.Qb(),l.Qb(),l.Rb(86,"tbody"),l.Gc(87,Z,25,13,"tr",42),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb()}if(2&e){const e=l.dc();l.yb(18),l.jc("formGroup",e.renderForm),l.yb(26),l.jc("items",e.employeeList),l.yb(1),l.jc("ngIf",e.errEmployee),l.yb(4),l.jc("ngIf",e.isSearch),l.yb(1),l.jc("ngIf",!e.isSearch),l.yb(9),l.jc("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),l.yb(28),l.jc("ngForOf",e.renderList)}}let te=(()=>{class e{constructor(e,t,i){this.filingManagementService=e,this.userManagementService=t,this.fb=i,this.isLoading=!0,this.isSearch=!1,this.errEmployee=!1,this.isChecked=!1,this.employeeList=[],this.renderList=[],this.dtOptions={},this.dtTrigger=new d.a,this.startDate={day:new Date(sessionStorage.getItem("s")).getDate(),month:new Date(sessionStorage.getItem("s")).getMonth()+1,year:new Date(sessionStorage.getItem("s")).getFullYear()},this.endDate={day:new Date(sessionStorage.getItem("e")).getDate(),month:new Date(sessionStorage.getItem("e")).getMonth()+1,year:new Date(sessionStorage.getItem("e")).getFullYear()},this.pipe=new n.e("en-US")}ngOnInit(){this.dtOptions={pagingType:"full_numbers",pageLength:10,lengthMenu:[5,10,25],processing:!0},this.renderForm=this.fb.group({dateFrom:this.startDate,dateTo:this.endDate,selectedEmployee:null}),this.userManagementService.employeeList().subscribe(e=>{this.employeeList=Object(E.merge)([{encrypt_employee_id:0,display_name:"All"}],e),this.isLoading=!1,setTimeout(()=>{this.dtTrigger.next()},100)},e=>{console.log(e.error)})}validation(){let e=!0;return this.errEmployee=!1,""!==this.renderForm.get("selectedEmployee").value&&null!==this.renderForm.get("selectedEmployee").value||(e=!1,this.errEmployee=!0),e}search(){if(this.validation()){this.isSearch=!0;const e=this.pipe.transform(this.renderForm.get("dateFrom").value.year+"/"+this.renderForm.get("dateFrom").value.month+"/"+this.renderForm.get("dateFrom").value.day,"MM/dd/yyyy"),t=this.pipe.transform(this.renderForm.get("dateTo").value.year+"/"+this.renderForm.get("dateTo").value.month+"/"+this.renderForm.get("dateTo").value.day,"MM/dd/yyyy"),i=this.renderForm.get("selectedEmployee").value;this.filingManagementService.renderView(i,e,t).subscribe(e=>{this.renderList=e,console.log(e),this.rerender(),this.isSearch=!1},e=>{console.log(e.error),this.isSearch=!1})}}rerender(){this.dtElement.dtInstance.then(e=>{e.clear().draw(),e.destroy(),this.dtTrigger.next()})}checkAll(e){1==this.isChecked?(this.isChecked=!1,this.renderList.map(e=>e.is_edit=!1)):(this.isChecked=!0,this.renderList.map(e=>e.is_edit=!0))}checkTrans(e,t){this.renderList[e].is_edit=t.currentTarget.checked}submit(){b.a.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showLoaderOnConfirm:!0}).then(e=>{e.isConfirmed&&b.a.fire({title:"Please Wait !",allowOutsideClick:!1,onBeforeOpen:()=>{b.a.showLoading();var e=this.renderList.filter(e=>!0===e.is_edit).map(e=>({overtime_id:e.overtime_id,final_in:e.final_in,final_out:e.final_out,created_by:sessionStorage.getItem("u"),series_code:sessionStorage.getItem("sc")}));this.filingManagementService.renderI(e).subscribe(e=>{console.log(e),0===e.id?b.a.fire("Failed!","Transaction failed!","error"):(b.a.fire("Ok!","Transaction successful!","success"),this.search())},e=>{console.log(e.error),b.a.fire("Failed!","Transaction failed!","error")})}})})}}return e.\u0275fac=function(t){return new(t||e)(l.Lb(W.a),l.Lb(m.a),l.Lb(p.c))},e.\u0275cmp=l.Fb({type:e,selectors:[["app-overtime-render"]],viewQuery:function(e,t){if(1&e&&l.Nc(r.a,!0),2&e){let e;l.uc(e=l.cc())&&(t.dtElement=e.first)}},decls:2,vars:2,consts:[["class","spinner-wrapper",4,"ngIf"],["class","animate__animated animate__fadeInUp",4,"ngIf"],[1,"spinner-wrapper"],[1,"spinner"],[1,"animate__animated","animate__fadeInUp"],[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"col-md-6"],[3,"formGroup"],[1,"col-md-3"],[1,"form-group"],[1,"control-label"],[1,"input-group"],["placeholder","mm/dd/yyyy","name","dp","formControlName","dateFrom","value","dateFrom","ngbDatepicker","",1,"form-control",3,"click"],["d","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-light","btn-icon","calendar",3,"click"],["data-feather","calendar","appFeatherIcon","",1,"text-secondary"],["placeholder","mm/dd/yyyy","name","dp","formControlName","dateTo","ngbDatepicker","",1,"form-control",3,"click"],["dt","ngbDatepicker"],[1,"col-md-4"],["name","Employee","bindLabel","display_name","bindValue","encrypt_employee_id","placeholder","Select Employee","formControlName","selectedEmployee",3,"items"],["class","text-danger mt-1",4,"ngIf"],[1,"col-md-12"],[1,"text-right"],["class","btn btn-primary","type","button","disabled","",4,"ngIf"],["type","button","class","btn btn-primary btn-icon-text",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary","btn-icon-text",3,"click"],["data-feather","save","appFeatherIcon","",1,"btn-icon-prepend"],[1,"table-responsive"],["datatable","","id","dataTableExample",1,"table",3,"dtOptions","dtTrigger"],[1,"custom-control","custom-switch"],["type","checkbox","id","check-all",1,"custom-control-input",3,"change"],["for","check-all",1,"custom-control-label"],[4,"ngFor","ngForOf"],[1,"text-danger","mt-1"],["type","button","disabled","",1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["data-feather","search","appFeatherIcon","",1,"btn-icon-prepend"],["type","checkbox",1,"custom-control-input",3,"checked","id","change"],[1,"custom-control-label",3,"for"]],template:function(e,t){1&e&&(l.Gc(0,z,3,0,"div",0),l.Gc(1,ee,88,8,"div",1)),2&e&&(l.jc("ngIf",t.isLoading),l.yb(1),l.jc("ngIf",!t.isLoading))},directives:[n.n,o.f,p.s,p.j,p.e,p.b,h.i,p.i,p.d,f.a,y.a,r.a,n.m],styles:[""]}),e})(),ie=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Fb({type:e,selectors:[["app-leave-entitlement"]],decls:2,vars:0,template:function(e,t){1&e&&(l.Rb(0,"p"),l.Ic(1," leave-entitlement works!\n"),l.Qb())},styles:[""]}),e})();var ne=i("Jfpn"),ae=i("tyVc"),oe=i("mkVx"),re=i("Kdsb"),de=i("mWvJ");function ce(e,t){1&e&&(l.Rb(0,"div",2),l.Rb(1,"div",3),l.Ic(2,"Loading..."),l.Qb(),l.Qb())}function be(e,t){if(1&e){const e=l.Sb();l.Rb(0,"tr"),l.Rb(1,"td"),l.Ic(2),l.Qb(),l.Rb(3,"td"),l.Ic(4),l.Qb(),l.Rb(5,"td"),l.Ic(6),l.Qb(),l.Rb(7,"td"),l.Ic(8),l.Qb(),l.Rb(9,"td"),l.Ic(10),l.Qb(),l.Rb(11,"td"),l.Ic(12),l.Qb(),l.Rb(13,"td"),l.Ic(14),l.Qb(),l.Rb(15,"td"),l.Ic(16),l.Qb(),l.Rb(17,"td"),l.Ic(18),l.Qb(),l.Rb(19,"td"),l.Ic(20),l.Qb(),l.Rb(21,"td"),l.Rb(22,"button",22),l.bc("click",function(){l.xc(e);const i=t.$implicit;return l.dc(2).viewTimekeeping(i.encrypttimekeepingId)}),l.Mb(23,"i",23),l.Qb(),l.Qb(),l.Qb()}if(2&e){const e=t.$implicit;l.yb(2),l.Jc(e.timekeepingCode),l.yb(2),l.Jc(e.payrollType),l.yb(2),l.Jc(e.dateFrom),l.yb(2),l.Jc(e.dateTo),l.yb(2),l.Jc(e.category),l.yb(2),l.Jc(e.branch),l.yb(2),l.Jc(e.confidentiality),l.yb(2),l.Jc(e.createdDesc),l.yb(2),l.Jc(e.dateCreated),l.yb(2),l.Jc(e.generatedCount)}}const se=function(){return["/layout/timekeeping/timekeeping-generation-detail"]};function le(e,t){if(1&e&&(l.Rb(0,"div",4),l.Rb(1,"nav",5),l.Rb(2,"ol",6),l.Rb(3,"li",7),l.Rb(4,"a",8),l.Ic(5,"Timekeeping"),l.Qb(),l.Qb(),l.Rb(6,"li",9),l.Ic(7,"Timekeeping Generation"),l.Qb(),l.Qb(),l.Qb(),l.Rb(8,"div",10),l.Rb(9,"div",11),l.Rb(10,"div",12),l.Rb(11,"div",13),l.Rb(12,"div",14),l.Rb(13,"div",10),l.Rb(14,"div",15),l.Rb(15,"h6"),l.Ic(16,"Timekeeping Generation"),l.Qb(),l.Qb(),l.Rb(17,"div",15),l.Rb(18,"ul",16),l.Rb(19,"button",17),l.Mb(20,"i",18),l.Ic(21," Add Timekeeping "),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Mb(22,"hr"),l.Rb(23,"div",19),l.Rb(24,"table",20),l.Rb(25,"thead"),l.Rb(26,"tr"),l.Rb(27,"th"),l.Ic(28,"Timekeeping Code"),l.Qb(),l.Rb(29,"th"),l.Ic(30,"Payroll Type"),l.Qb(),l.Rb(31,"th"),l.Ic(32,"Date From"),l.Qb(),l.Rb(33,"th"),l.Ic(34,"Date To"),l.Qb(),l.Rb(35,"th"),l.Ic(36,"Category"),l.Qb(),l.Rb(37,"th"),l.Ic(38,"Branch"),l.Qb(),l.Rb(39,"th"),l.Ic(40,"Confidential"),l.Qb(),l.Rb(41,"th"),l.Ic(42,"Created By"),l.Qb(),l.Rb(43,"th"),l.Ic(44,"Date Created"),l.Qb(),l.Rb(45,"th"),l.Ic(46,"Generated"),l.Qb(),l.Mb(47,"th"),l.Qb(),l.Qb(),l.Rb(48,"tbody"),l.Gc(49,be,24,10,"tr",21),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb()),2&e){const e=l.dc();l.yb(19),l.jc("routerLink",l.mc(4,se)),l.yb(5),l.jc("dtOptions",e.dtOptions)("dtTrigger",e.dtTrigger),l.yb(25),l.jc("ngForOf",e.table)}}let he=(()=>{class e{constructor(e,t,i){this.userManagementService=e,this.timekeepingManagementService=t,this.router=i,this.isLoading=!0,this.dtOptions={},this.dtTrigger=new d.a,this.table=[],this.pipe=new n.e("en-US")}ngOnInit(){this.dtOptions={pagingType:"full_numbers",pageLength:5,lengthMenu:[5,10,25],processing:!0,order:[0,"desc"]},this.timekeepingManagementService.timekeepingView(0).subscribe(e=>{this.table=e.map(e=>({active:e.active,status:e.status,createdBy:e.created_by,createdDesc:e.created_by_name,dateCreated:this.pipe.transform(e.date_created,"MM/dd/yyyy"),timekeepingCode:e.timekeeping_header_code,dateFrom:this.pipe.transform(e.date_from,"MM/dd/yyyy"),dateTo:this.pipe.transform(e.date_to,"MM/dd/yyyy"),payrollType:e.payroll_type,month:e.month,cutoff:e.cutoff,confidentiality:e.confidentiality,branch:e.branch,category:e.category,generatedCount:e.tk_count,encrypttimekeepingId:e.encrypt_timekeeping_header_id})),this.isLoading=!1,setTimeout(()=>{this.dtTrigger.next()},100)},e=>{console.log(e.error)})}viewTimekeeping(e){this.router.navigate(["/layout/timekeeping/timekeeping-generation-detail",e])}}return e.\u0275fac=function(t){return new(t||e)(l.Lb(m.a),l.Lb(de.a),l.Lb(o.c))},e.\u0275cmp=l.Fb({type:e,selectors:[["app-timekeeping-generation-view"]],decls:2,vars:2,consts:[["class","spinner-wrapper",4,"ngIf"],["class","animate__animated animate__fadeInUp",4,"ngIf"],[1,"spinner-wrapper"],[1,"spinner"],[1,"animate__animated","animate__fadeInUp"],[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"col-md-6"],[1,"nav","justify-content-end"],[1,"btn","btn-primary","btn-icon-text",3,"routerLink"],["data-feather","edit","appFeatherIcon","",1,"btn-icon-prepend"],[1,"table-responsive"],["datatable","",1,"row-border","hover",3,"dtOptions","dtTrigger"],[4,"ngFor","ngForOf"],["type","button","title","Edit",1,"btn","btn-sm","btn-primary","btn-icon",3,"click"],[1,"feather","icon-edit-2"]],template:function(e,t){1&e&&(l.Gc(0,ce,3,0,"div",0),l.Gc(1,le,50,5,"div",1)),2&e&&(l.jc("ngIf",t.isLoading),l.yb(1),l.jc("ngIf",!t.isLoading))},directives:[n.n,o.f,o.d,f.a,r.a,n.m],styles:[""]}),e})();var me=i("/oZC"),pe=i("wVlD"),ue=i("tinS");const ge=["generatedModal"];function ye(e,t){1&e&&(l.Rb(0,"div",3),l.Rb(1,"div",4),l.Ic(2,"Loading..."),l.Qb(),l.Qb())}function fe(e,t){1&e&&(l.Rb(0,"p",50),l.Ic(1,"Payroll Type is needed!"),l.Qb())}function Re(e,t){1&e&&(l.Rb(0,"p",50),l.Ic(1,"Payroll Cutoff is needed!"),l.Qb())}function Qe(e,t){if(1&e){const e=l.Sb();l.Rb(0,"div",18),l.Rb(1,"div",19),l.Rb(2,"label",20),l.Ic(3,"Payroll Cutoff"),l.Qb(),l.Rb(4,"ng-select",51),l.bc("change",function(){return l.xc(e),l.dc(2).changePayrollType()}),l.Qb(),l.Gc(5,Re,2,0,"p",22),l.Qb(),l.Qb()}if(2&e){const e=l.dc(2);l.yb(4),l.jc("items",e.cutoffList),l.yb(1),l.jc("ngIf",e.errCutoff)}}function ve(e,t){1&e&&(l.Rb(0,"p",50),l.Ic(1,"Month is needed!"),l.Qb())}function Ie(e,t){1&e&&(l.Rb(0,"p",50),l.Ic(1,"Date From is needed!"),l.Qb())}function _e(e,t){1&e&&(l.Rb(0,"p",50),l.Ic(1,"Date To is needed!"),l.Qb())}function ke(e,t){1&e&&(l.Rb(0,"p",50),l.Ic(1,"Category is needed!"),l.Qb())}function Te(e,t){1&e&&(l.Rb(0,"p",50),l.Ic(1,"Branch is needed!"),l.Qb())}function De(e,t){1&e&&(l.Rb(0,"p",50),l.Ic(1,"Confidential is needed!"),l.Qb())}function Me(e,t){if(1&e){const e=l.Sb();l.Rb(0,"button",52),l.bc("click",function(){return l.xc(e),l.dc(2).submitHeader()}),l.Mb(1,"i",53),l.Ic(2," Save Changes "),l.Qb()}}function Fe(e,t){1&e&&(l.Rb(0,"button",47),l.Ic(1,"Continue"),l.Qb())}function Le(e,t){1&e&&(l.Rb(0,"button",54),l.Mb(1,"span",55),l.Ic(2," Loading... "),l.Qb())}function we(e,t){if(1&e){const e=l.Sb();l.Rb(0,"button",56),l.bc("click",function(){return l.xc(e),l.dc(2).generate()}),l.Mb(1,"i",57),l.Ic(2," Generate "),l.Qb()}}function Se(e,t){if(1&e){const e=l.Sb();l.Rb(0,"div",5),l.Rb(1,"nav",6),l.Rb(2,"ol",7),l.Rb(3,"li",8),l.Rb(4,"a",9),l.Ic(5,"Timekeeping"),l.Qb(),l.Qb(),l.Rb(6,"li",8),l.Rb(7,"a",10),l.Ic(8,"Timekeeping Generation"),l.Qb(),l.Qb(),l.Rb(9,"li",11),l.Ic(10,"Detail"),l.Qb(),l.Qb(),l.Qb(),l.Rb(11,"div",12),l.Rb(12,"div",13),l.Rb(13,"div",14),l.Rb(14,"div",15),l.Rb(15,"form",16),l.Rb(16,"aw-wizard"),l.Rb(17,"aw-wizard-step",17),l.Mb(18,"hr"),l.Rb(19,"div",12),l.Rb(20,"div",18),l.Rb(21,"div",19),l.Rb(22,"label",20),l.Ic(23,"Payroll Type"),l.Qb(),l.Rb(24,"ng-select",21),l.bc("change",function(){return l.xc(e),l.dc().changePayrollType()}),l.Qb(),l.Gc(25,fe,2,0,"p",22),l.Qb(),l.Qb(),l.Gc(26,Qe,6,2,"div",23),l.Rb(27,"div",18),l.Rb(28,"div",19),l.Rb(29,"label",20),l.Ic(30,"Month"),l.Qb(),l.Rb(31,"ng-select",24),l.bc("change",function(){return l.xc(e),l.dc().changePayrollType()}),l.Qb(),l.Gc(32,ve,2,0,"p",22),l.Qb(),l.Qb(),l.Qb(),l.Rb(33,"div",12),l.Rb(34,"div",18),l.Rb(35,"div",19),l.Rb(36,"label",20),l.Ic(37,"Date From"),l.Qb(),l.Rb(38,"div",25),l.Rb(39,"input",26,27),l.bc("click",function(){return l.xc(e),l.vc(40).toggle()}),l.Qb(),l.Rb(41,"div",28),l.Rb(42,"button",29),l.bc("click",function(){return l.xc(e),l.vc(40).toggle()}),l.Mb(43,"i",30),l.Qb(),l.Qb(),l.Qb(),l.Gc(44,Ie,2,0,"p",22),l.Qb(),l.Qb(),l.Rb(45,"div",18),l.Rb(46,"div",19),l.Rb(47,"label",20),l.Ic(48,"Date To"),l.Qb(),l.Rb(49,"div",25),l.Rb(50,"input",31,32),l.bc("click",function(){return l.xc(e),l.vc(51).toggle()}),l.Qb(),l.Rb(52,"div",28),l.Rb(53,"button",29),l.bc("click",function(){return l.xc(e),l.vc(51).toggle()}),l.Mb(54,"i",30),l.Qb(),l.Qb(),l.Qb(),l.Gc(55,_e,2,0,"p",22),l.Qb(),l.Qb(),l.Rb(56,"div",18),l.Rb(57,"div",19),l.Rb(58,"label",20),l.Ic(59,"Category"),l.Qb(),l.Mb(60,"ng-select",33),l.Gc(61,ke,2,0,"p",22),l.Qb(),l.Qb(),l.Qb(),l.Rb(62,"div",12),l.Rb(63,"div",18),l.Rb(64,"div",19),l.Rb(65,"label",20),l.Ic(66,"Branch"),l.Qb(),l.Mb(67,"ng-select",34),l.Gc(68,Te,2,0,"p",22),l.Qb(),l.Qb(),l.Rb(69,"div",18),l.Rb(70,"div",19),l.Rb(71,"label",20),l.Ic(72,"Confidential"),l.Qb(),l.Mb(73,"ng-select",35),l.Gc(74,De,2,0,"p",22),l.Qb(),l.Qb(),l.Qb(),l.Rb(75,"div",36),l.Gc(76,Me,3,0,"button",37),l.Gc(77,Fe,2,0,"button",38),l.Qb(),l.Qb(),l.Rb(78,"aw-wizard-step",39),l.Mb(79,"hr"),l.Rb(80,"div",12),l.Rb(81,"div",40),l.Rb(82,"div",41),l.Gc(83,Le,3,0,"button",42),l.Gc(84,we,3,0,"button",43),l.Qb(),l.Qb(),l.Qb(),l.Rb(85,"div",12),l.Rb(86,"div",40),l.Rb(87,"div",44),l.Rb(88,"table",45),l.Rb(89,"thead"),l.Rb(90,"tr"),l.Rb(91,"th"),l.Ic(92,"Timekeeping Code"),l.Qb(),l.Rb(93,"th"),l.Ic(94,"Date From"),l.Qb(),l.Rb(95,"th"),l.Ic(96,"Date To"),l.Qb(),l.Rb(97,"th"),l.Ic(98,"Created By"),l.Qb(),l.Rb(99,"th"),l.Ic(100,"Date Created"),l.Qb(),l.Rb(101,"th"),l.Ic(102,"Action"),l.Qb(),l.Qb(),l.Qb(),l.Mb(103,"tbody"),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Rb(104,"div",36),l.Rb(105,"button",46),l.Ic(106,"Back"),l.Qb(),l.Rb(107,"button",47),l.Ic(108,"Continue"),l.Qb(),l.Qb(),l.Qb(),l.Rb(109,"aw-wizard-step",48),l.Rb(110,"div",12),l.Rb(111,"div",40),l.Rb(112,"div",12),l.Rb(113,"div",40),l.Rb(114,"div",44),l.Rb(115,"table",49),l.Rb(116,"thead"),l.Rb(117,"tr"),l.Rb(118,"th"),l.Ic(119,"EMPLOYEE CODE"),l.Qb(),l.Rb(120,"th"),l.Ic(121,"EMPLOYEE"),l.Qb(),l.Rb(122,"th"),l.Ic(123,"DATE"),l.Qb(),l.Rb(124,"th"),l.Ic(125,"RESTDAY"),l.Qb(),l.Rb(126,"th"),l.Ic(127,"SCHEDULE IN"),l.Qb(),l.Rb(128,"th"),l.Ic(129,"SCHEDULE OUT"),l.Qb(),l.Rb(130,"th"),l.Ic(131,"TIME IN"),l.Qb(),l.Rb(132,"th"),l.Ic(133,"TIME OUT"),l.Qb(),l.Rb(134,"th"),l.Ic(135,"RG"),l.Qb(),l.Rb(136,"th"),l.Ic(137,"TARDY"),l.Qb(),l.Rb(138,"th"),l.Ic(139,"UT"),l.Qb(),l.Rb(140,"th"),l.Ic(141,"ABSNT"),l.Qb(),l.Rb(142,"th"),l.Ic(143,"LWOP"),l.Qb(),l.Rb(144,"th"),l.Ic(145,"VL"),l.Qb(),l.Rb(146,"th"),l.Ic(147,"SL"),l.Qb(),l.Rb(148,"th"),l.Ic(149,"OTLV"),l.Qb(),l.Rb(150,"th"),l.Ic(151,"ND"),l.Qb(),l.Rb(152,"th"),l.Ic(153,"RGOT"),l.Qb(),l.Rb(154,"th"),l.Ic(155,"RGOTND"),l.Qb(),l.Rb(156,"th"),l.Ic(157,"LHOT"),l.Qb(),l.Rb(158,"th"),l.Ic(159,"LHOTND"),l.Qb(),l.Rb(160,"th"),l.Ic(161,"LHOT>8"),l.Qb(),l.Rb(162,"th"),l.Ic(163,"LHOTND>8"),l.Qb(),l.Rb(164,"th"),l.Ic(165,"LHRD"),l.Qb(),l.Rb(166,"th"),l.Ic(167,"LHRDND"),l.Qb(),l.Rb(168,"th"),l.Ic(169,"LHRD>8"),l.Qb(),l.Rb(170,"th"),l.Ic(171,"LHRDND>8"),l.Qb(),l.Rb(172,"th"),l.Ic(173,"SHOT"),l.Qb(),l.Rb(174,"th"),l.Ic(175,"SHOTND"),l.Qb(),l.Rb(176,"th"),l.Ic(177,"SHOT>8"),l.Qb(),l.Rb(178,"th"),l.Ic(179,"SHOTND>8"),l.Qb(),l.Rb(180,"th"),l.Ic(181,"SHRD"),l.Qb(),l.Rb(182,"th"),l.Ic(183,"SHRDND"),l.Qb(),l.Rb(184,"th"),l.Ic(185,"SHRD>8"),l.Qb(),l.Rb(186,"th"),l.Ic(187,"SHRDND>8"),l.Qb(),l.Rb(188,"th"),l.Ic(189,"RDOT"),l.Qb(),l.Rb(190,"th"),l.Ic(191,"RDOTND"),l.Qb(),l.Rb(192,"th"),l.Ic(193,"RDOT>8"),l.Qb(),l.Rb(194,"th"),l.Ic(195,"RDOTND>8"),l.Qb(),l.Rb(196,"th"),l.Ic(197,"DHOT"),l.Qb(),l.Rb(198,"th"),l.Ic(199,"DHOTND"),l.Qb(),l.Rb(200,"th"),l.Ic(201,"DHOT>8"),l.Qb(),l.Rb(202,"th"),l.Ic(203,"DHOTND>8"),l.Qb(),l.Rb(204,"th"),l.Ic(205,"DHRD"),l.Qb(),l.Rb(206,"th"),l.Ic(207,"DHRDND"),l.Qb(),l.Rb(208,"th"),l.Ic(209,"DHRD>8"),l.Qb(),l.Rb(210,"th"),l.Ic(211,"DHRDND>8"),l.Qb(),l.Rb(212,"th"),l.Ic(213,"REMARKS"),l.Qb(),l.Qb(),l.Qb(),l.Mb(214,"tbody"),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Rb(215,"div",36),l.Rb(216,"button",46),l.Ic(217,"Back"),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb()}if(2&e){const e=l.dc();l.yb(15),l.jc("formGroup",e.timekeepingForm),l.yb(2),l.jc("awCompletedStep",e.complete),l.yb(7),l.jc("items",e.payrolltype),l.yb(1),l.jc("ngIf",e.errPayrollType),l.yb(1),l.jc("ngIf",e.isCutoff),l.yb(5),l.jc("items",e.monthList),l.yb(1),l.jc("ngIf",e.errMonth),l.yb(12),l.jc("ngIf",e.errdateFrom),l.yb(11),l.jc("ngIf",e.errdateTo),l.yb(5),l.jc("items",e.category),l.yb(1),l.jc("ngIf",e.errCategory),l.yb(6),l.jc("items",e.branch),l.yb(1),l.jc("ngIf",e.errBranch),l.yb(5),l.jc("items",e.confidential),l.yb(1),l.jc("ngIf",e.errConfidential),l.yb(2),l.jc("ngIf",!e.isView),l.yb(1),l.jc("ngIf",e.isView),l.yb(1),l.jc("awCompletedStep",e.complete),l.yb(5),l.jc("ngIf",e.isGenerate),l.yb(1),l.jc("ngIf",!e.isGenerate),l.yb(4),l.jc("dtTrigger",e.dtTriggerTkList)("dtOptions",e.dtOptions.tkList),l.yb(21),l.jc("awCompletedStep",e.complete),l.yb(6),l.jc("dtTrigger",e.dtTriggerFinal)("dtOptions",e.dtOptions.tkFinal)}}function Ce(e,t){if(1&e){const e=l.Sb();l.Rb(0,"div",58),l.Rb(1,"h5",59),l.Ic(2,"Timekeeping Detail"),l.Qb(),l.Rb(3,"button",60),l.bc("click",function(){return t.$implicit.close("by: close icon")}),l.Rb(4,"span",61),l.Ic(5,"\xd7"),l.Qb(),l.Qb(),l.Qb(),l.Rb(6,"div",62),l.Rb(7,"div",12),l.Rb(8,"div",40),l.Rb(9,"div",44),l.Rb(10,"table",63),l.Rb(11,"thead"),l.Rb(12,"tr"),l.Rb(13,"th"),l.Ic(14,"EMPLOYEE CODE"),l.Qb(),l.Rb(15,"th"),l.Ic(16,"EMPLOYEE"),l.Qb(),l.Rb(17,"th"),l.Ic(18,"DATE"),l.Qb(),l.Rb(19,"th"),l.Ic(20,"RESTDAY"),l.Qb(),l.Rb(21,"th"),l.Ic(22,"SCHEDULE IN"),l.Qb(),l.Rb(23,"th"),l.Ic(24,"SCHEDULE OUT"),l.Qb(),l.Rb(25,"th"),l.Ic(26,"TIME IN"),l.Qb(),l.Rb(27,"th"),l.Ic(28,"TIME OUT"),l.Qb(),l.Rb(29,"th"),l.Ic(30,"RG"),l.Qb(),l.Rb(31,"th"),l.Ic(32,"TARDY"),l.Qb(),l.Rb(33,"th"),l.Ic(34,"UT"),l.Qb(),l.Rb(35,"th"),l.Ic(36,"ABSNT"),l.Qb(),l.Rb(37,"th"),l.Ic(38,"LWOP"),l.Qb(),l.Rb(39,"th"),l.Ic(40,"VL"),l.Qb(),l.Rb(41,"th"),l.Ic(42,"SL"),l.Qb(),l.Rb(43,"th"),l.Ic(44,"OTLV"),l.Qb(),l.Rb(45,"th"),l.Ic(46,"ND"),l.Qb(),l.Rb(47,"th"),l.Ic(48,"RGOT"),l.Qb(),l.Rb(49,"th"),l.Ic(50,"RGOTND"),l.Qb(),l.Rb(51,"th"),l.Ic(52,"LHOT"),l.Qb(),l.Rb(53,"th"),l.Ic(54,"LHOTND"),l.Qb(),l.Rb(55,"th"),l.Ic(56,"LHOT>8"),l.Qb(),l.Rb(57,"th"),l.Ic(58,"LHOTND>8"),l.Qb(),l.Rb(59,"th"),l.Ic(60,"LHRD"),l.Qb(),l.Rb(61,"th"),l.Ic(62,"LHRDND"),l.Qb(),l.Rb(63,"th"),l.Ic(64,"LHRD>8"),l.Qb(),l.Rb(65,"th"),l.Ic(66,"LHRDND>8"),l.Qb(),l.Rb(67,"th"),l.Ic(68,"SHOT"),l.Qb(),l.Rb(69,"th"),l.Ic(70,"SHOTND"),l.Qb(),l.Rb(71,"th"),l.Ic(72,"SHOT>8"),l.Qb(),l.Rb(73,"th"),l.Ic(74,"SHOTND>8"),l.Qb(),l.Rb(75,"th"),l.Ic(76,"SHRD"),l.Qb(),l.Rb(77,"th"),l.Ic(78,"SHRDND"),l.Qb(),l.Rb(79,"th"),l.Ic(80,"SHRD>8"),l.Qb(),l.Rb(81,"th"),l.Ic(82,"SHRDND>8"),l.Qb(),l.Rb(83,"th"),l.Ic(84,"RDOT"),l.Qb(),l.Rb(85,"th"),l.Ic(86,"RDOTND"),l.Qb(),l.Rb(87,"th"),l.Ic(88,"RDOT>8"),l.Qb(),l.Rb(89,"th"),l.Ic(90,"RDOTND>8"),l.Qb(),l.Rb(91,"th"),l.Ic(92,"DHOT"),l.Qb(),l.Rb(93,"th"),l.Ic(94,"DHOTND"),l.Qb(),l.Rb(95,"th"),l.Ic(96,"DHOT>8"),l.Qb(),l.Rb(97,"th"),l.Ic(98,"DHOTND>8"),l.Qb(),l.Rb(99,"th"),l.Ic(100,"DHRD"),l.Qb(),l.Rb(101,"th"),l.Ic(102,"DHRDND"),l.Qb(),l.Rb(103,"th"),l.Ic(104,"DHRD>8"),l.Qb(),l.Rb(105,"th"),l.Ic(106,"DHRDND>8"),l.Qb(),l.Rb(107,"th"),l.Ic(108,"REMARKS"),l.Qb(),l.Qb(),l.Qb(),l.Mb(109,"tbody"),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Rb(110,"div",64),l.Rb(111,"button",65),l.bc("click",function(){return t.$implicit.close("by: close button")}),l.Ic(112,"Close"),l.Qb(),l.Rb(113,"button",66),l.bc("click",function(){return l.xc(e),l.dc().saveTimekeeping()}),l.Ic(114,"Save changes"),l.Qb(),l.Qb()}if(2&e){const e=l.dc();l.yb(10),l.jc("dtOptions",e.dtOptions.generated)}}const Oe=[{path:"",component:a.a,children:[{path:"attendance-log",component:x,children:[{path:"file-upload",component:_}]},{path:"employee-attendance",component:Y},{path:"leave-entitlement",component:ie},{path:"overtime-render",component:te},{path:"timekeeping-generation-view",component:he},{path:"timekeeping-generation-detail",redirectTo:"timekeeping-generation-detail/",pathMatch:"full"},{path:"timekeeping-generation-detail/:id",component:(()=>{class e{constructor(e,t,i,a,o,r,c,b){this.fb=e,this.route=t,this.modalService=i,this.tenantMasterService=a,this.employeeCategory=o,this.branchManagement=r,this.timekeepingManagementService=c,this.renderer=b,this.isLoading=!0,this.isGenerate=!1,this.isDate=!0,this.isView=!1,this.isCutoff=!0,this.complete=!0,this.payrolltype=[],this.confidential=[],this.branch=[],this.category=[],this.cutoffList=[],this.monthList=[],this.generatedTimekeeping=[],this.finalTimekeeping=[],this.dateToday={day:new Date(new Date).getDate(),month:new Date(new Date).getMonth()+1,year:new Date(new Date).getFullYear()},this.pipe=new n.e("en-US"),this.dtOptions=[],this.dtTriggerFinal=new d.a,this.dtTriggerTkList=new d.a}ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.timekeepingForm=this.fb.group({timekeepingCode:"",selectedPayrollType:null,selectedCutoff:null,selectedMonth:null,dateFrom:{value:this.dateToday,disabled:this.isDate},dateTo:{value:this.dateToday,disabled:this.isDate},selectedCategory:0,selectedBranch:0,selectedConfidential:0}),this.resetError(!1),this.tenantMasterService.dropdownList("41, 42, 53, 54,").subscribe(e=>{this.payrolltype=e.filter(e=>41===e.type_id),this.cutoffList=e.filter(e=>53===e.type_id),this.monthList=e.filter(e=>54===e.type_id),this.confidential=Object(E.merge)([{id:0,description:"All"}],e.filter(e=>42===e.type_id)),this.employeeCategory.categoryList(0).subscribe(e=>{this.category=Object(E.merge)([{category_id:0,category_name:"All"}],e),this.branchManagement.branchList().subscribe(e=>{this.branch=Object(E.merge)([{branch_id:0,branch_name:"All"}],e),""!==this.id?this.timekeepingManagementService.timekeepingView(this.id).subscribe(e=>{this.timekeepingForm.setValue({timekeepingCode:e[0].timekeeping_header_code,selectedPayrollType:e[0].payroll_type_id,selectedCutoff:e[0].cutoff_id,selectedMonth:e[0].month_id,selectedCategory:e[0].category_id,selectedBranch:e[0].branch_id,selectedConfidential:e[0].confidentiality_id,dateFrom:{year:new Date(e[0].date_from).getFullYear(),month:new Date(e[0].date_from).getMonth()+1,day:new Date(e[0].date_from).getDate()},dateTo:{year:new Date(e[0].date_to).getFullYear(),month:new Date(e[0].date_to).getMonth()+1,day:new Date(e[0].date_to).getDate()}}),this.isView=!0,this.isLoading=!1,this.reloadTimekeeping()},e=>{console.log(e.error)}):(this.id="0",this.isLoading=!1)},e=>{console.log(e.error)})},e=>{console.log(e.error)})},e=>{console.log(e.error)})}ngAfterViewInit(){this.renderButton()}renderButton(){this.renderer.listen("document","click",e=>{e.target.classList.contains("viewTimekeeping")&&this.viewTimekeeping(e.target.id)})}changePayrollType(){var e=!0;let t=0;switch(this.timekeepingForm.get("selectedPayrollType").value){case 68:this.isCutoff=!1,t=0,""!==this.timekeepingForm.get("selectedPayrollType").value&&null!==this.timekeepingForm.get("selectedPayrollType").value||(e=!1),""!==this.timekeepingForm.get("selectedMonth").value&&null!==this.timekeepingForm.get("selectedMonth").value||(e=!1);break;case 67:this.isCutoff=!0,t=this.timekeepingForm.get("selectedCutoff").value,""!==this.timekeepingForm.get("selectedPayrollType").value&&null!==this.timekeepingForm.get("selectedPayrollType").value||(e=!1),""!==this.timekeepingForm.get("selectedCutoff").value&&null!==this.timekeepingForm.get("selectedCutoff").value||(e=!1),""!==this.timekeepingForm.get("selectedMonth").value&&null!==this.timekeepingForm.get("selectedMonth").value||(e=!1)}if(e){const e=this.timekeepingForm.get("selectedMonth").value;this.timekeepingManagementService.cutoffView(t,e).subscribe(e=>{this.timekeepingForm.get("dateFrom").setValue({year:new Date(e[0].date_from).getFullYear(),month:new Date(e[0].date_from).getMonth()+1,day:new Date(e[0].date_from).getDate()}),this.timekeepingForm.get("dateTo").setValue({year:new Date(e[0].date_to).getFullYear(),month:new Date(e[0].date_to).getMonth()+1,day:new Date(e[0].date_to).getDate()})},e=>{console.log(e.error)})}}validationHeader(){this.resetError(!1);var e=!0;return""!==this.timekeepingForm.get("selectedPayrollType").value&&null!==this.timekeepingForm.get("selectedPayrollType").value||(e=!1,this.errPayrollType=!0),""!==this.timekeepingForm.get("selectedCutoff").value&&null!==this.timekeepingForm.get("selectedCutoff").value||(e=!1,this.errCutoff=!0),""!==this.timekeepingForm.get("selectedMonth").value&&null!==this.timekeepingForm.get("selectedMonth").value||(e=!1,this.errMonth=!0),""!==this.timekeepingForm.get("dateFrom").value&&null!==this.timekeepingForm.get("dateFrom").value||(e=!1,this.errdateFrom=!0),""!==this.timekeepingForm.get("dateTo").value&&null!==this.timekeepingForm.get("dateTo").value||(e=!1,this.errdateTo=!0),""!==this.timekeepingForm.get("selectedCategory").value&&null!==this.timekeepingForm.get("selectedCategory").value||(e=!1,this.errCategory=!0),""!==this.timekeepingForm.get("selectedBranch").value&&null!==this.timekeepingForm.get("selectedBranch").value||(e=!1,this.errBranch=!0),""!==this.timekeepingForm.get("selectedConfidential").value&&null!==this.timekeepingForm.get("selectedConfidential").value||(e=!1,this.errConfidential=!0),e}reloadTimekeeping(){this.timekeepingManagementService.generatedView(this.id,"0").subscribe(e=>{this.generatedTimekeeping=e,this.dtOptions.tkList={data:this.generatedTimekeeping,columns:[{data:"timekeeping_code"},{data:"date_from",render:function(e){var t=new Date(e),i=t.getMonth()+1;return(i.toString().length>1?i:"0"+i)+"/"+("0"+t.getDate()).slice(-2)+"/"+t.getFullYear()}},{data:"date_to",render:function(e){var t=new Date(e),i=t.getMonth()+1;return(i.toString().length>1?i:"0"+i)+"/"+("0"+t.getDate()).slice(-2)+"/"+t.getFullYear()}},{data:"display_name"},{data:"date_created",render:function(e){var t=new Date(e),i=t.getMonth()+1;return(i.toString().length>1?i:"0"+i)+"/"+("0"+t.getDate()).slice(-2)+"/"+t.getFullYear()}},{data:"encrypt_timekeeping_id",render:function(e,t,i,n){return'<button type="button" id="'+e+'" class="btn btn-sm btn-primary btn-icon viewTimekeeping"><i class="feather icon-search viewTimekeeping" id="'+e+'" ></i></button>'}}],order:[0,"desc"]},setTimeout(()=>{this.dtTriggerTkList.next()},100),this.timekeepingManagementService.finalView(this.id,"0","","").subscribe(e=>{this.finalTimekeeping=e,this.dtOptions.tkFinal={data:this.finalTimekeeping,dom:"Bfrtip",buttons:["copy","csv","excel","print"],columns:[{data:"employee_code"},{data:"display_name"},{data:"date",render:function(e){var t=new Date(e),i=t.getMonth()+1;return(i.toString().length>1?i:"0"+i)+"/"+("0"+t.getDate()).slice(-2)+"/"+t.getFullYear()}},{data:"rest_day"},{data:"schedule_time_in"},{data:"schedule_time_out"},{data:"actual_time_in"},{data:"actual_time_out"},{data:"reg"},{data:"late"},{data:"undertime"},{data:"is_absent"},{data:"lwop_hour"},{data:"vl_hour"},{data:"sl_hour"},{data:"otherl_hour"},{data:"regnd"},{data:"ot"},{data:"otnd"},{data:"lhot"},{data:"lhotnd"},{data:"lhot_e8"},{data:"lhotnd_e8"},{data:"lhrdot"},{data:"lhrdotnd"},{data:"lhrdot_e8"},{data:"lhrdotnd_e8"},{data:"shot"},{data:"shotnd"},{data:"shot_e8"},{data:"shotnd_e8"},{data:"shrdot"},{data:"shrdotnd"},{data:"shrdot_e8"},{data:"shrdotnd_e8"},{data:"otrd"},{data:"otrdnd"},{data:"otrd_e8"},{data:"otrdnd_e8"},{data:"dhot"},{data:"dhotnd"},{data:"dhot_e8"},{data:"dhotnd_e8"},{data:"dhrdot"},{data:"dhrdotnd"},{data:"dhrdot_e8"},{data:"dhrdotnd_e8"},{data:"remarks"}],order:[[0,"desc"],[2,"asc"]]},setTimeout(()=>{this.dtTriggerFinal.next()},100)},e=>{console.log(e.error)})},e=>{console.log(e.error)})}submitHeader(){this.validationHeader()&&b.a.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showLoaderOnConfirm:!0}).then(e=>{e.isConfirmed&&b.a.fire({title:"Please Wait !",allowOutsideClick:!1,onBeforeOpen:()=>{b.a.showLoading();var e={timekeeping_header_id:this.id,timekeeping_header_code:this.timekeepingForm.get("timekeepingCode").value,date_from:this.pipe.transform(this.timekeepingForm.get("dateFrom").value.year+"/"+this.timekeepingForm.get("dateFrom").value.month+"/"+this.timekeepingForm.get("dateFrom").value.day,"MM/dd/yyyy"),date_to:this.pipe.transform(this.timekeepingForm.get("dateTo").value.year+"/"+this.timekeepingForm.get("dateTo").value.month+"/"+this.timekeepingForm.get("dateTo").value.day,"MM/dd/yyyy"),payroll_type_id:this.timekeepingForm.get("selectedPayrollType").value,cutoff_id:68===this.timekeepingForm.get("selectedPayrollType").value?0:this.timekeepingForm.get("selectedCutoff").value,month_id:this.timekeepingForm.get("selectedMonth").value,category_id:this.timekeepingForm.get("selectedCategory").value,branch_id:this.timekeepingForm.get("selectedBranch").value,confidentiality_id:this.timekeepingForm.get("selectedConfidential").value,active:!0,approval_level_id:sessionStorage.getItem("apl"),series_code:sessionStorage.getItem("sc"),created_by:sessionStorage.getItem("u")};this.timekeepingManagementService.timekeepingIU(e).subscribe(e=>{0===e.id?b.a.fire("Failed!","Transaction failed!","error"):(b.a.fire("Ok!","Transaction successful!","success"),this.id=e.encrypted_id,this.isView=!0)},e=>{console.log(e.error),b.a.fire("Failed!","Transaction failed!","error")})}})})}generate(){this.isGenerate=!0,this.generatedTimekeeping=[],this.timekeepingManagementService.generationView(this.id).subscribe(e=>{this.generatedTimekeeping=e,this.isGenerate=!1,this.modalService.open(this.generatedModal,{size:"xl"}),this.dtOptions.generated={data:this.generatedTimekeeping,dom:"Bfrtip",buttons:["copy","csv","excel","print"],columns:[{data:"employee_code"},{data:"display_name"},{data:"date",render:function(e){var t=new Date(e),i=t.getMonth()+1;return(i.toString().length>1?i:"0"+i)+"/"+("0"+t.getDate()).slice(-2)+"/"+t.getFullYear()}},{data:"rest_day"},{data:"schedule_time_in"},{data:"schedule_time_out"},{data:"actual_time_in"},{data:"actual_time_out"},{data:"reg"},{data:"late"},{data:"undertime"},{data:"is_absent"},{data:"lwop_hour"},{data:"vl_hour"},{data:"sl_hour"},{data:"otherl_hour"},{data:"regnd"},{data:"ot"},{data:"otnd"},{data:"lhot"},{data:"lhotnd"},{data:"lhot_e8"},{data:"lhotnd_e8"},{data:"lhrdot"},{data:"lhrdotnd"},{data:"lhrdot_e8"},{data:"lhrdotnd_e8"},{data:"shot"},{data:"shotnd"},{data:"shot_e8"},{data:"shotnd_e8"},{data:"shrdot"},{data:"shrdotnd"},{data:"shrdot_e8"},{data:"shrdotnd_e8"},{data:"otrd"},{data:"otrdnd"},{data:"otrd_e8"},{data:"otrdnd_e8"},{data:"dhot"},{data:"dhotnd"},{data:"dhot_e8"},{data:"dhotnd_e8"},{data:"dhrdot"},{data:"dhrdotnd"},{data:"dhrdot_e8"},{data:"dhrdotnd_e8"},{data:"remarks"}]}},e=>{console.log(e.error)})}saveTimekeeping(){var e=!0;this.generatedTimekeeping.length<=0&&(e=!1),e&&b.a.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showLoaderOnConfirm:!0}).then(e=>{e.isConfirmed&&b.a.fire({title:"Please Wait !",allowOutsideClick:!1,onBeforeOpen:()=>{b.a.showLoading();var e={timekeeping_header_id:this.id,timekeeping_header_code:this.timekeepingForm.get("timekeepingCode").value,active:!0,series_code:sessionStorage.getItem("sc"),created_by:sessionStorage.getItem("u")};this.timekeepingManagementService.generationIU(e).subscribe(e=>{0===e.id?b.a.fire("Failed!","Transaction failed!","error"):(b.a.fire("Ok!","Transaction successful!","success"),this.timekeepingManagementService.generatedView(this.id,"0").subscribe(e=>{this.dtElements.forEach(e=>{e.dtInstance&&e.dtInstance.then(e=>{e.destroy()})}),this.reloadTimekeeping(),this.modalService.dismissAll()},e=>{console.log(e.error)}))},e=>{console.log(e.error),b.a.fire("Failed!","Transaction failed!","error")})}})})}viewTimekeeping(e){this.timekeepingManagementService.generatedDetailView(this.id,e).subscribe(e=>{this.generatedTimekeeping=e,this.modalService.open(this.generatedModal,{size:"xl"}),this.dtOptions.generated={data:this.generatedTimekeeping,dom:"Bfrtip",buttons:["copy","csv","excel","print"],columns:[{data:"employee_code"},{data:"display_name"},{data:"date",render:function(e){var t=new Date(e),i=t.getMonth()+1;return(i.toString().length>1?i:"0"+i)+"/"+("0"+t.getDate()).slice(-2)+"/"+t.getFullYear()}},{data:"rest_day"},{data:"schedule_time_in"},{data:"schedule_time_out"},{data:"actual_time_in"},{data:"actual_time_out"},{data:"reg"},{data:"late"},{data:"undertime"},{data:"is_absent"},{data:"lwop_hour"},{data:"vl_hour"},{data:"sl_hour"},{data:"otherl_hour"},{data:"regnd"},{data:"ot"},{data:"otnd"},{data:"lhot"},{data:"lhotnd"},{data:"lhot_e8"},{data:"lhotnd_e8"},{data:"lhrdot"},{data:"lhrdotnd"},{data:"lhrdot_e8"},{data:"lhrdotnd_e8"},{data:"shot"},{data:"shotnd"},{data:"shot_e8"},{data:"shotnd_e8"},{data:"shrdot"},{data:"shrdotnd"},{data:"shrdot_e8"},{data:"shrdotnd_e8"},{data:"otrd"},{data:"otrdnd"},{data:"otrd_e8"},{data:"otrdnd_e8"},{data:"dhot"},{data:"dhotnd"},{data:"dhot_e8"},{data:"dhotnd_e8"},{data:"dhrdot"},{data:"dhrdotnd"},{data:"dhrdot_e8"},{data:"dhrdotnd_e8"},{data:"remarks"}]}},e=>{console.log(e.error)})}resetError(e){this.errPayrollType=e,this.errCutoff=e,this.errMonth=e,this.errdateFrom=e,this.errdateTo=e,this.errCategory=e,this.errBranch=e,this.errConfidential=e}}return e.\u0275fac=function(t){return new(t||e)(l.Lb(p.c),l.Lb(o.a),l.Lb(h.j),l.Lb(me.a),l.Lb(pe.a),l.Lb(ue.a),l.Lb(de.a),l.Lb(l.E))},e.\u0275cmp=l.Fb({type:e,selectors:[["app-timekeeping-generation-detail"]],viewQuery:function(e,t){if(1&e&&(l.Nc(ge,!0),l.Nc(r.a,!0)),2&e){let e;l.uc(e=l.cc())&&(t.generatedModal=e.first),l.uc(e=l.cc())&&(t.dtElements=e)}},decls:4,vars:2,consts:[["class","spinner-wrapper",4,"ngIf"],["class","animate__animated animate__fadeInUp",4,"ngIf"],["generatedModal",""],[1,"spinner-wrapper"],[1,"spinner"],[1,"animate__animated","animate__fadeInUp"],[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["routerLink","/layout/timekeeping/timekeeping-generation-view"],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body"],[3,"formGroup"],["stepTitle","Details",3,"awCompletedStep"],[1,"col-md-4"],[1,"form-group"],[1,"control-label"],["formControlName","selectedPayrollType","name","Payroll Type","bindLabel","description","bindValue","id","placeholder","Select Payroll Type",3,"items","change"],["class","text-danger mt-1",4,"ngIf"],["class","col-md-4",4,"ngIf"],["formControlName","selectedMonth","name","Payroll Month","bindLabel","description","bindValue","id","placeholder","Select Month",3,"items","change"],[1,"input-group"],["placeholder","mm/dd/yyyy","name","dp","formControlName","dateFrom","ngbDatepicker","",1,"form-control",3,"click"],["df","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-light","btn-icon","calendar",3,"click"],["data-feather","calendar","appFeatherIcon","",1,"text-secondary"],["placeholder","mm/dd/yyyy","name","dp","formControlName","dateTo","ngbDatepicker","",1,"form-control",3,"click"],["dt","ngbDatepicker"],["formControlName","selectedCategory","name","Category","bindLabel","category_name","bindValue","category_id","placeholder","Select Category",3,"items"],["formControlName","selectedBranch","name","Department","bindLabel","branch_name","bindValue","branch_id","placeholder","Select Department",3,"items"],["formControlName","selectedConfidential","name","Confidential","bindLabel","description","bindValue","id","placeholder","Select Confidential",3,"items"],[1,"d-flex","justify-content-center","mt-2"],["class","btn btn-primary btn-icon-text",3,"click",4,"ngIf"],["class","btn btn-primary","type","button","awNextStep","",4,"ngIf"],["stepTitle","Timekeeping Generation",3,"awCompletedStep"],[1,"col-md-12"],[1,"text-right"],["class","btn btn-primary","type","button","disabled","",4,"ngIf"],["type","button","class","btn btn-primary btn-icon-text",3,"click",4,"ngIf"],[1,"table-responsive"],["id","tkList","datatable","",1,"table",2,"width","100%",3,"dtTrigger","dtOptions"],["type","button","awPreviousStep","",1,"btn","btn-light","mr-2"],["type","button","awNextStep","",1,"btn","btn-primary"],["stepTitle","Final Timekeeping",3,"awCompletedStep"],["id","tkFinal","datatable","",1,"table",3,"dtTrigger","dtOptions"],[1,"text-danger","mt-1"],["formControlName","selectedCutoff","name","Payroll Type","bindLabel","description","bindValue","id","placeholder","Select Payroll Type",3,"items","change"],[1,"btn","btn-primary","btn-icon-text",3,"click"],["data-feather","save","appFeatherIcon","",1,"btn-icon-prepend"],["type","button","disabled","",1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["type","button",1,"btn","btn-primary","btn-icon-text",3,"click"],["data-feather","clock","appFeatherIcon","",1,"btn-icon-prepend"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["id","modalTable","datatable","",1,"table",3,"dtOptions"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(l.Gc(0,ye,3,0,"div",0),l.Gc(1,Se,218,25,"div",1),l.Gc(2,Ce,115,1,"ng-template",null,2,l.Hc)),2&e&&(l.jc("ngIf",t.isLoading),l.yb(1),l.jc("ngIf",!t.isLoading))},directives:[n.n,o.f,p.s,p.j,p.e,oe.f,oe.g,oe.b,y.a,p.i,p.d,p.b,h.i,f.a,r.a,oe.e,oe.d],styles:[""]}),e})()}]}];let xe=(()=>{class e{}return e.\u0275mod=l.Jb({type:e}),e.\u0275inj=l.Ib({factory:function(t){return new(t||e)},providers:[n.f,{provide:h.b,useClass:ne.a}],imports:[[n.c,p.f,p.p,o.g.forChild(Oe),ae.a,y.b,R.b.forRoot(),h.k,ae.a,oe.a,r.b,re.c,Q.b.forRoot()]]}),e})()}}]);