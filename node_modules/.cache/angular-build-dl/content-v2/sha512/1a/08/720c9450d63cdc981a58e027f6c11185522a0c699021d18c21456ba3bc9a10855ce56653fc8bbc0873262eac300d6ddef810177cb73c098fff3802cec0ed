!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function i(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"/rOv":function(t,a,n){"use strict";n.r(a),n.d(a,"HomeModule",function(){return re});var o,r=n("ofXK"),c=n("njyG"),s=n("AytR"),d=n("fXoL"),l=n("J1nh"),b=n("1kSV"),u=n("xNm2"),f=n("oYuu"),p=n("mWvJ"),h=n("IYwT"),m=n("3Pt+"),g=n("ZOsW"),v=n("IvIE"),y=n("mEZC"),R=n("NvFN"),Q=n("EIwK"),I=n("TEbG"),_=n("a48+"),D=n("4rDk"),M=((o=function(){function t(){e(this,t)}return i(t,[{key:"transform",value:function(e,t){return e.length<=0?e:e.filter(function(e){return e.detail_group_id===t})}}]),t}()).\u0275fac=function(e){return new(e||o)},o.\u0275pipe=d.Kb({name:"filterArray",type:o,pure:!1}),o),k=["calendar"],F=["filingModal"],w=["attendanceModal"],S=["payslipModal"],T=["htmlData"];function x(e,t){1&e&&(d.Rb(0,"div",5),d.Rb(1,"div",6),d.Ic(2,"Loading..."),d.Qb(),d.Qb())}function C(e,t){if(1&e){var i=d.Sb();d.Rb(0,"div",40),d.Rb(1,"button",41),d.bc("click",function(){return d.xc(i),d.dc(2).reload()}),d.Mb(2,"i",42),d.Qb(),d.Qb()}}function L(e,t){if(1&e){var i=d.Sb();d.Rb(0,"li",46),d.Rb(1,"div",9),d.Rb(2,"div",47),d.Ic(3),d.Qb(),d.Rb(4,"div",48),d.Rb(5,"a",49),d.bc("click",function(){d.xc(i);var e=t.index;return d.dc(3).view(e)}),d.Rb(6,"span",50),d.Ic(7),d.Qb(),d.Qb(),d.Qb(),d.Qb(),d.Qb()}if(2&e){var a=t.$implicit;d.yb(3),d.Kc(" ",a.title," "),d.yb(3),d.Dc(a.backgroundColor),d.yb(1),d.Jc(a.status)}}function O(e,t){if(1&e&&(d.Rb(0,"div",43),d.Rb(1,"ul",44),d.Gc(2,L,8,5,"li",45),d.Qb(),d.Qb()),2&e){var i=d.dc(2);d.yb(2),d.jc("ngForOf",i.filingList)}}function j(e,t){if(1&e){var i=d.Sb();d.Rb(0,"div",7),d.Mb(1,"link",8),d.Rb(2,"div",9),d.Rb(3,"div",10),d.Rb(4,"div",11),d.Rb(5,"div",12),d.Rb(6,"div",13),d.Rb(7,"h6",14),d.Ic(8),d.Qb(),d.Gc(9,C,3,0,"div",15),d.Qb(),d.Qb(),d.Rb(10,"div",16),d.Gc(11,O,3,1,"div",17),d.Qb(),d.Rb(12,"div",18),d.Rb(13,"ul",19),d.Rb(14,"button",20),d.bc("click",function(){return d.xc(i),d.dc().prev()}),d.Mb(15,"i",21),d.Ic(16," Prev "),d.Qb(),d.Ic(17," \xa0 "),d.Rb(18,"button",20),d.bc("click",function(){return d.xc(i),d.dc().next()}),d.Mb(19,"i",22),d.Ic(20," Next "),d.Qb(),d.Qb(),d.Qb(),d.Qb(),d.Rb(21,"div",11),d.Rb(22,"div",23),d.Rb(23,"div",24),d.Rb(24,"label",25),d.Ic(25,"Attendance"),d.Qb(),d.Rb(26,"button",26),d.bc("click",function(){return d.xc(i),d.dc().viewLogs()}),d.Ic(27,"View"),d.Qb(),d.Rb(28,"div",27),d.Rb(29,"input",28,29),d.bc("ngModelChange",function(e){return d.xc(i),d.dc().dateFrom=e})("click",function(){return d.xc(i),d.vc(30).toggle()}),d.Qb(),d.Rb(31,"div",30),d.Rb(32,"button",31),d.bc("click",function(){return d.xc(i),d.vc(30).toggle()}),d.Mb(33,"i",32),d.Qb(),d.Qb(),d.Qb(),d.Rb(34,"div",27),d.Rb(35,"input",33,34),d.bc("ngModelChange",function(e){return d.xc(i),d.dc().dateTo=e})("click",function(){return d.xc(i),d.vc(36).toggle()}),d.Qb(),d.Rb(37,"div",30),d.Rb(38,"button",31),d.bc("click",function(){return d.xc(i),d.vc(36).toggle()}),d.Mb(39,"i",32),d.Qb(),d.Qb(),d.Qb(),d.Qb(),d.Rb(40,"div",24),d.Rb(41,"label",25),d.Ic(42,"Payslip"),d.Qb(),d.Rb(43,"ng-select",35),d.bc("change",function(e){return d.xc(i),d.dc().selectedPayslip(e)}),d.Qb(),d.Qb(),d.Qb(),d.Qb(),d.Qb(),d.Rb(44,"div",36),d.Rb(45,"div",11),d.Rb(46,"div",23),d.Mb(47,"full-calendar",37,38),d.Qb(),d.Qb(),d.Rb(49,"div",11),d.Rb(50,"div",23),d.Rb(51,"h6",39),d.Ic(52,"Announcement"),d.Qb(),d.Qb(),d.Qb(),d.Qb(),d.Qb(),d.Qb()}if(2&e){var a=d.dc();d.yb(8),d.Jc(a.appTitle),d.yb(1),d.jc("ngIf",a.isButton),d.yb(2),d.jc("ngIf",a.reloadApp),d.yb(18),d.jc("ngModel",a.dateFrom),d.yb(6),d.jc("ngModel",a.dateTo),d.yb(8),d.jc("items",a.payslipList),d.yb(4),d.jc("options",a.calendarOptions)}}function P(e,t){if(1&e&&(d.Rb(0,"div",51),d.Rb(1,"h5",52),d.Ic(2,"Attendance"),d.Qb(),d.Rb(3,"button",53),d.bc("click",function(){return t.$implicit.close("by: close icon")}),d.Rb(4,"span",54),d.Ic(5,"\xd7"),d.Qb(),d.Qb(),d.Qb(),d.Rb(6,"div",55),d.Rb(7,"div",56),d.Rb(8,"div",9),d.Rb(9,"div",57),d.Rb(10,"table",58),d.Rb(11,"thead"),d.Rb(12,"tr"),d.Rb(13,"th"),d.Ic(14,"EMPLOYEE CODE"),d.Qb(),d.Rb(15,"th"),d.Ic(16,"EMPLOYEE"),d.Qb(),d.Rb(17,"th"),d.Ic(18,"DATE"),d.Qb(),d.Rb(19,"th"),d.Ic(20,"RESTDAY"),d.Qb(),d.Rb(21,"th"),d.Ic(22,"SCHEDULE IN"),d.Qb(),d.Rb(23,"th"),d.Ic(24,"SCHEDULE OUT"),d.Qb(),d.Rb(25,"th"),d.Ic(26,"TIME IN"),d.Qb(),d.Rb(27,"th"),d.Ic(28,"TIME OUT"),d.Qb(),d.Rb(29,"th"),d.Ic(30,"RG"),d.Qb(),d.Rb(31,"th"),d.Ic(32,"TARDY"),d.Qb(),d.Rb(33,"th"),d.Ic(34,"UT"),d.Qb(),d.Rb(35,"th"),d.Ic(36,"ABSNT"),d.Qb(),d.Rb(37,"th"),d.Ic(38,"LWOP"),d.Qb(),d.Rb(39,"th"),d.Ic(40,"VL"),d.Qb(),d.Rb(41,"th"),d.Ic(42,"SL"),d.Qb(),d.Rb(43,"th"),d.Ic(44,"OTLV"),d.Qb(),d.Rb(45,"th"),d.Ic(46,"ND"),d.Qb(),d.Rb(47,"th"),d.Ic(48,"RGOT"),d.Qb(),d.Rb(49,"th"),d.Ic(50,"RGOTND"),d.Qb(),d.Rb(51,"th"),d.Ic(52,"LHOT"),d.Qb(),d.Rb(53,"th"),d.Ic(54,"LHOTND"),d.Qb(),d.Rb(55,"th"),d.Ic(56,"LHOT>8"),d.Qb(),d.Rb(57,"th"),d.Ic(58,"LHOTND>8"),d.Qb(),d.Rb(59,"th"),d.Ic(60,"LHRD"),d.Qb(),d.Rb(61,"th"),d.Ic(62,"LHRDND"),d.Qb(),d.Rb(63,"th"),d.Ic(64,"LHRD>8"),d.Qb(),d.Rb(65,"th"),d.Ic(66,"LHRDND>8"),d.Qb(),d.Rb(67,"th"),d.Ic(68,"SHOT"),d.Qb(),d.Rb(69,"th"),d.Ic(70,"SHOTND"),d.Qb(),d.Rb(71,"th"),d.Ic(72,"SHOT>8"),d.Qb(),d.Rb(73,"th"),d.Ic(74,"SHOTND>8"),d.Qb(),d.Rb(75,"th"),d.Ic(76,"SHRD"),d.Qb(),d.Rb(77,"th"),d.Ic(78,"SHRDND"),d.Qb(),d.Rb(79,"th"),d.Ic(80,"SHRD>8"),d.Qb(),d.Rb(81,"th"),d.Ic(82,"SHRDND>8"),d.Qb(),d.Rb(83,"th"),d.Ic(84,"RDOT"),d.Qb(),d.Rb(85,"th"),d.Ic(86,"RDOTND"),d.Qb(),d.Rb(87,"th"),d.Ic(88,"RDOT>8"),d.Qb(),d.Rb(89,"th"),d.Ic(90,"RDOTND>8"),d.Qb(),d.Rb(91,"th"),d.Ic(92,"DHOT"),d.Qb(),d.Rb(93,"th"),d.Ic(94,"DHOTND"),d.Qb(),d.Rb(95,"th"),d.Ic(96,"DHOT>8"),d.Qb(),d.Rb(97,"th"),d.Ic(98,"DHOTND>8"),d.Qb(),d.Rb(99,"th"),d.Ic(100,"DHRD"),d.Qb(),d.Rb(101,"th"),d.Ic(102,"DHRDND"),d.Qb(),d.Rb(103,"th"),d.Ic(104,"DHRD>8"),d.Qb(),d.Rb(105,"th"),d.Ic(106,"DHRDND>8"),d.Qb(),d.Rb(107,"th"),d.Ic(108,"REMARKS"),d.Qb(),d.Qb(),d.Qb(),d.Mb(109,"tbody"),d.Qb(),d.Qb(),d.Qb(),d.Qb(),d.Qb()),2&e){var i=d.dc();d.yb(10),d.jc("dtOptions",i.dtOptions.generated)}}function B(e,t){if(1&e){var i=d.Sb();d.Rb(0,"div",56),d.Rb(1,"app-change-log-detail",61),d.bc("isSuccess",function(e){return d.xc(i),d.dc(2).isSuccess(e)}),d.Qb(),d.Qb()}if(2&e){var a=d.dc(2);d.yb(1),d.jc("parentDetail",a.parentDetail)("fileType",a.fileType)}}function G(e,t){if(1&e){var i=d.Sb();d.Rb(0,"div",56),d.Rb(1,"app-change-schedule-detail",61),d.bc("isSuccess",function(e){return d.xc(i),d.dc(2).isSuccess(e)}),d.Qb(),d.Qb()}if(2&e){var a=d.dc(2);d.yb(1),d.jc("parentDetail",a.parentDetail)("fileType",a.fileType)}}function A(e,t){if(1&e){var i=d.Sb();d.Rb(0,"div",56),d.Rb(1,"app-leave-detail",61),d.bc("isSuccess",function(e){return d.xc(i),d.dc(2).isSuccess(e)}),d.Qb(),d.Qb()}if(2&e){var a=d.dc(2);d.yb(1),d.jc("parentDetail",a.parentDetail)("fileType",a.fileType)}}function N(e,t){if(1&e){var i=d.Sb();d.Rb(0,"div",56),d.Rb(1,"app-official-business-detail",61),d.bc("isSuccess",function(e){return d.xc(i),d.dc(2).isSuccess(e)}),d.Qb(),d.Qb()}if(2&e){var a=d.dc(2);d.yb(1),d.jc("parentDetail",a.parentDetail)("fileType",a.fileType)}}function V(e,t){if(1&e){var i=d.Sb();d.Rb(0,"div",56),d.Rb(1,"app-overtime-detail",61),d.bc("isSuccess",function(e){return d.xc(i),d.dc(2).isSuccess(e)}),d.Qb(),d.Qb()}if(2&e){var a=d.dc(2);d.yb(1),d.jc("parentDetail",a.parentDetail)("fileType",a.fileType)}}function E(e,t){if(1&e){var i=d.Sb();d.Rb(0,"div",56),d.Rb(1,"app-offset-detail",61),d.bc("isSuccess",function(e){return d.xc(i),d.dc(2).isSuccess(e)}),d.Qb(),d.Qb()}if(2&e){var a=d.dc(2);d.yb(1),d.jc("parentDetail",a.parentDetail)("fileType",a.fileType)}}function H(e,t){if(1&e){var i=d.Sb();d.Rb(0,"div",51),d.Rb(1,"h5",52),d.Ic(2,"Employee Filing"),d.Qb(),d.Rb(3,"button",53),d.bc("click",function(){return t.$implicit.close("by: close icon")}),d.Rb(4,"span",54),d.Ic(5,"\xd7"),d.Qb(),d.Qb(),d.Qb(),d.Rb(6,"div",55),d.Rb(7,"div",9),d.Rb(8,"div",10),d.Rb(9,"div",24),d.Rb(10,"label",25),d.Ic(11,"Filing Type"),d.Qb(),d.Rb(12,"ng-select",59),d.bc("ngModelChange",function(e){return d.xc(i),d.dc().selectedFiling=e})("change",function(){return d.xc(i),d.dc().selectFiling()}),d.Qb(),d.Qb(),d.Qb(),d.Qb(),d.Rb(13,"div",9),d.Gc(14,B,2,2,"div",60),d.Gc(15,G,2,2,"div",60),d.Gc(16,A,2,2,"div",60),d.Gc(17,N,2,2,"div",60),d.Gc(18,V,2,2,"div",60),d.Gc(19,E,2,2,"div",60),d.Qb(),d.Qb()}if(2&e){var a=d.dc();d.yb(12),d.jc("items",a.filingTypeList)("ngModel",a.selectedFiling),d.yb(2),d.jc("ngIf",a.isChangeLog),d.yb(1),d.jc("ngIf",a.isChangeSchedule),d.yb(1),d.jc("ngIf",a.isLeave),d.yb(1),d.jc("ngIf",a.isOfficialBusiness),d.yb(1),d.jc("ngIf",a.isOvertime),d.yb(1),d.jc("ngIf",a.isOffset)}}function U(e,t){if(1&e&&(d.Rb(0,"div",9),d.Rb(1,"div",68),d.Rb(2,"label"),d.Ic(3),d.Qb(),d.Qb(),d.Rb(4,"div",68),d.Rb(5,"p",74),d.Ic(6),d.ec(7,"number"),d.Qb(),d.Qb(),d.Qb()),2&e){var i=t.$implicit;d.yb(3),d.Jc(i.detail),d.yb(3),d.Kc("P ",d.gc(7,2,i.amount,"1.2-2"),"")}}function Y(e,t){if(1&e&&(d.Rb(0,"div",9),d.Rb(1,"div",68),d.Rb(2,"label"),d.Ic(3),d.Qb(),d.Qb(),d.Rb(4,"div",68),d.Rb(5,"p",74),d.Ic(6),d.ec(7,"number"),d.Qb(),d.Qb(),d.Qb()),2&e){var i=t.$implicit;d.yb(3),d.Jc(i.detail),d.yb(3),d.Kc("P ",d.gc(7,2,i.amount,"1.2-2"),"")}}function J(e,t){if(1&e&&(d.Rb(0,"div",9),d.Rb(1,"div",68),d.Rb(2,"label"),d.Ic(3),d.Qb(),d.Qb(),d.Rb(4,"div",68),d.Rb(5,"p",74),d.Ic(6),d.ec(7,"number"),d.Qb(),d.Qb(),d.Qb()),2&e){var i=t.$implicit;d.yb(3),d.Jc(i.detail),d.yb(3),d.Kc("P ",d.gc(7,2,i.amount,"1.2-2"),"")}}function $(e,t){if(1&e&&(d.Rb(0,"div",9),d.Rb(1,"div",68),d.Rb(2,"label"),d.Ic(3),d.Qb(),d.Qb(),d.Rb(4,"div",68),d.Rb(5,"p",74),d.Ic(6),d.ec(7,"number"),d.Qb(),d.Qb(),d.Qb()),2&e){var i=t.$implicit;d.yb(3),d.Jc(i.detail),d.yb(3),d.Kc("P (",d.gc(7,2,i.amount,"1.2-2"),")")}}function K(e,t){if(1&e&&(d.Rb(0,"div",9),d.Rb(1,"div",68),d.Rb(2,"label"),d.Ic(3),d.Qb(),d.Qb(),d.Rb(4,"div",68),d.Rb(5,"p",74),d.Ic(6),d.ec(7,"number"),d.Qb(),d.Qb(),d.Qb()),2&e){var i=t.$implicit;d.yb(3),d.Jc(i.detail),d.yb(3),d.Kc("P (",d.gc(7,2,i.amount,"1.2-2"),")")}}function W(e,t){if(1&e){var i=d.Sb();d.Rb(0,"div",51),d.Rb(1,"h5",62),d.Rb(2,"button",63),d.bc("click",function(){return d.xc(i),d.dc().openPDF()}),d.Ic(3,"Download PDF"),d.Qb(),d.Qb(),d.Rb(4,"button",53),d.bc("click",function(){return t.$implicit.close("by: close icon")}),d.Rb(5,"span",54),d.Ic(6,"\xd7"),d.Qb(),d.Qb(),d.Qb(),d.Rb(7,"div",55),d.Rb(8,"div",64),d.Mb(9,"br"),d.Rb(10,"div",56),d.Rb(11,"div",9),d.Rb(12,"div",65),d.Rb(13,"h6",66),d.Ic(14),d.Qb(),d.Qb(),d.Rb(15,"div",10),d.Mb(16,"img",67),d.Qb(),d.Qb(),d.Qb(),d.Mb(17,"hr"),d.Rb(18,"div",56),d.Rb(19,"div",9),d.Rb(20,"div",68),d.Rb(21,"div",9),d.Rb(22,"label",69),d.Ic(23,"Employee :"),d.Qb(),d.Rb(24,"label",70),d.Ic(25),d.Qb(),d.Qb(),d.Qb(),d.Rb(26,"div",68),d.Rb(27,"div",9),d.Rb(28,"label",69),d.Ic(29,"Pay Period :"),d.Qb(),d.Rb(30,"label",70),d.Ic(31),d.Qb(),d.Qb(),d.Qb(),d.Qb(),d.Rb(32,"div",9),d.Rb(33,"div",68),d.Rb(34,"div",9),d.Rb(35,"label",69),d.Ic(36,"Department :"),d.Qb(),d.Rb(37,"label",70),d.Ic(38),d.Qb(),d.Qb(),d.Qb(),d.Rb(39,"div",68),d.Rb(40,"div",9),d.Rb(41,"label",69),d.Ic(42,"Payslip # :"),d.Qb(),d.Rb(43,"label",70),d.Ic(44),d.Qb(),d.Qb(),d.Qb(),d.Qb(),d.Qb(),d.Mb(45,"hr"),d.Rb(46,"div",56),d.Rb(47,"div",9),d.Rb(48,"div",71),d.Rb(49,"h6",72),d.Ic(50,"Earnings"),d.Qb(),d.Qb(),d.Rb(51,"div",71),d.Rb(52,"h6",72),d.Ic(53,"Deductions"),d.Qb(),d.Qb(),d.Qb(),d.Qb(),d.Rb(54,"div",56),d.Rb(55,"div",9),d.Rb(56,"div",68),d.Rb(57,"div",73),d.Rb(58,"div",68),d.Rb(59,"h6"),d.Ic(60,"Basic Gross"),d.Qb(),d.Qb(),d.Rb(61,"div",68),d.Rb(62,"h6",74),d.Ic(63),d.ec(64,"number"),d.Qb(),d.Qb(),d.Qb(),d.Rb(65,"div",9),d.Rb(66,"div",68),d.Rb(67,"label"),d.Ic(68,"Regular ND"),d.Qb(),d.Qb(),d.Rb(69,"div",68),d.Rb(70,"p",74),d.Ic(71),d.ec(72,"number"),d.Qb(),d.Qb(),d.Qb(),d.Rb(73,"div",9),d.Rb(74,"div",68),d.Rb(75,"label"),d.Ic(76,"Absent"),d.Qb(),d.Qb(),d.Rb(77,"div",68),d.Rb(78,"p",74),d.Ic(79),d.ec(80,"number"),d.Qb(),d.Qb(),d.Qb(),d.Rb(81,"div",9),d.Rb(82,"div",68),d.Rb(83,"label"),d.Ic(84,"Late"),d.Qb(),d.Qb(),d.Rb(85,"div",68),d.Rb(86,"p",74),d.Ic(87),d.ec(88,"number"),d.Qb(),d.Qb(),d.Qb(),d.Rb(89,"div",9),d.Rb(90,"div",68),d.Rb(91,"label"),d.Ic(92,"Undertime"),d.Qb(),d.Qb(),d.Rb(93,"div",68),d.Rb(94,"p",74),d.Ic(95),d.ec(96,"number"),d.Qb(),d.Qb(),d.Qb(),d.Rb(97,"div",73),d.Rb(98,"div",68),d.Rb(99,"h6"),d.Ic(100,"Basic Salary"),d.Qb(),d.Qb(),d.Rb(101,"div",68),d.Rb(102,"h6",74),d.Ic(103),d.ec(104,"number"),d.Qb(),d.Qb(),d.Qb(),d.Rb(105,"div",75),d.Rb(106,"div",56),d.Rb(107,"h6"),d.Ic(108,"Holiday & Overtime"),d.Qb(),d.Qb(),d.Qb(),d.Gc(109,U,8,5,"div",76),d.ec(110,"filterArray"),d.Rb(111,"div",75),d.Rb(112,"div",56),d.Rb(113,"h6"),d.Ic(114,"Taxable Earnings (+)"),d.Qb(),d.Qb(),d.Qb(),d.Gc(115,Y,8,5,"div",76),d.ec(116,"filterArray"),d.Rb(117,"div",75),d.Rb(118,"div",56),d.Rb(119,"h6"),d.Ic(120,"Non-Taxable Earnings (+)"),d.Qb(),d.Qb(),d.Qb(),d.Gc(121,J,8,5,"div",76),d.ec(122,"filterArray"),d.Rb(123,"div",73),d.Rb(124,"div",68),d.Rb(125,"h6"),d.Ic(126,"Gross Pay"),d.Qb(),d.Qb(),d.Rb(127,"div",68),d.Rb(128,"h6",74),d.Ic(129),d.ec(130,"number"),d.Qb(),d.Qb(),d.Qb(),d.Qb(),d.Rb(131,"div",68),d.Rb(132,"div",9),d.Rb(133,"div",77),d.Rb(134,"h6"),d.Ic(135,"Government Contribution"),d.Qb(),d.Qb(),d.Qb(),d.Rb(136,"div",9),d.Rb(137,"div",68),d.Rb(138,"label"),d.Ic(139,"SSS"),d.Qb(),d.Qb(),d.Rb(140,"div",68),d.Rb(141,"p",74),d.Ic(142),d.ec(143,"number"),d.Qb(),d.Qb(),d.Qb(),d.Rb(144,"div",9),d.Rb(145,"div",68),d.Rb(146,"label"),d.Ic(147,"Pagibig"),d.Qb(),d.Qb(),d.Rb(148,"div",68),d.Rb(149,"p",74),d.Ic(150),d.ec(151,"number"),d.Qb(),d.Qb(),d.Qb(),d.Rb(152,"div",9),d.Rb(153,"div",68),d.Rb(154,"label"),d.Ic(155,"Philhealth"),d.Qb(),d.Qb(),d.Rb(156,"div",68),d.Rb(157,"p",74),d.Ic(158),d.ec(159,"number"),d.Qb(),d.Qb(),d.Qb(),d.Rb(160,"div",78),d.Rb(161,"div",68),d.Rb(162,"h6"),d.Ic(163,"Withholding Tax"),d.Qb(),d.Qb(),d.Rb(164,"div",68),d.Rb(165,"h6",74),d.Ic(166),d.ec(167,"number"),d.Qb(),d.Qb(),d.Qb(),d.Rb(168,"div",79),d.Rb(169,"div",56),d.Rb(170,"h6"),d.Ic(171,"Loan (-)"),d.Qb(),d.Qb(),d.Qb(),d.Gc(172,$,8,5,"div",76),d.ec(173,"filterArray"),d.Rb(174,"div",79),d.Rb(175,"div",56),d.Rb(176,"h6"),d.Ic(177,"Deduction (-)"),d.Qb(),d.Qb(),d.Qb(),d.Gc(178,K,8,5,"div",76),d.ec(179,"filterArray"),d.Rb(180,"div",78),d.Rb(181,"div",68),d.Rb(182,"h6"),d.Ic(183,"Total Deduction"),d.Qb(),d.Qb(),d.Rb(184,"div",68),d.Rb(185,"h6",74),d.Ic(186),d.ec(187,"number"),d.Qb(),d.Qb(),d.Qb(),d.Rb(188,"div",73),d.Rb(189,"div",68),d.Rb(190,"h6"),d.Ic(191,"Net Pay"),d.Qb(),d.Qb(),d.Rb(192,"div",68),d.Rb(193,"h6",74),d.Ic(194),d.ec(195,"number"),d.Qb(),d.Qb(),d.Qb(),d.Qb(),d.Qb(),d.Qb(),d.Qb(),d.Qb()}if(2&e){var a=d.dc();d.yb(14),d.Jc(a.payslipHeader.company_name),d.yb(2),d.kc("src",a.url,d.zc),d.yb(9),d.Jc(a.payslipHeader.display_name),d.yb(6),d.Jc(a.payslipHeader.pay_period),d.yb(7),d.Jc(a.payslipHeader.department),d.yb(6),d.Jc(a.payslipHeader.payroll_code),d.yb(19),d.Kc("P ",d.gc(64,24,a.payslipHeader.salary_rate,"1.2-2"),""),d.yb(8),d.Kc("P ",d.gc(72,27,a.payslipHeader.regnd_ms,"1.2-2"),""),d.yb(8),d.Kc("P (",d.gc(80,30,a.payslipHeader.absent,"1.2-2"),")"),d.yb(8),d.Kc("P (",d.gc(88,33,a.payslipHeader.late,"1.2-2"),")"),d.yb(8),d.Kc("P (",d.gc(96,36,a.payslipHeader.undertime,"1.2-2"),")"),d.yb(8),d.Kc("P ",d.gc(104,39,a.payslipHeader.basic_salary,"1.2-2"),""),d.yb(6),d.jc("ngForOf",d.gc(110,42,a.payslipDetail,1)),d.yb(6),d.jc("ngForOf",d.gc(116,45,a.payslipDetail,2)),d.yb(6),d.jc("ngForOf",d.gc(122,48,a.payslipDetail,3)),d.yb(8),d.Kc("P ",d.gc(130,51,a.payslipHeader.gross_income,"1.2-2"),""),d.yb(13),d.Kc("P (",d.gc(143,54,a.payslipHeader.sss,"1.2-2"),")"),d.yb(8),d.Kc("P (",d.gc(151,57,a.payslipHeader.pagibig,"1.2-2"),")"),d.yb(8),d.Kc("P (",d.gc(159,60,a.payslipHeader.philhealth,"1.2-2"),")"),d.yb(8),d.Kc("P (",d.gc(167,63,a.payslipHeader.witholding_tax,"1.2-2"),")"),d.yb(6),d.jc("ngForOf",d.gc(173,66,a.payslipDetail,4)),d.yb(6),d.jc("ngForOf",d.gc(179,69,a.payslipDetail,5)),d.yb(8),d.Kc("P (",d.gc(187,72,a.payslipHeader.total_deduction,"1.2-2"),")"),d.yb(8),d.Kc("P ",d.gc(195,75,a.payslipHeader.net_salary,"1.2-2"),"")}}var z,X=((z=function(){function t(i,a,n,o,c){e(this,t),this.attendanceManagementService=i,this.modalService=a,this.filingManagementService=n,this.payrollManagementService=o,this.timekeepingManagementService=c,this.image=s.a.exportUrl,this.payslip=s.a.crystalReport,this.isLoading=!0,this.parentDetail=[],this.isChangeLog=!1,this.isChangeSchedule=!1,this.isLeave=!1,this.isOfficialBusiness=!1,this.isOvertime=!1,this.isOffset=!1,this.filterargs={title:"hello"},this.isApprover="true"==sessionStorage.getItem("ap"),this.reloadApp=!0,this.pipe=new r.e("en-US"),this.calendarEvents=[],this.filingList=[],this.attendanceList=[],this.payslipList=[],this.payslipDetail=[],this.filingTypeList=[{id:0,description:"Change Log"},{id:1,description:"Change Schedule"},{id:2,description:"Leave"},{id:3,description:"Official Business"},{id:4,description:"Overtime"},{id:5,description:"Offset"}],this.count=0,this.fileType=0,this.startDate={day:new Date(sessionStorage.getItem("s")).getDate(),month:new Date(sessionStorage.getItem("s")).getMonth()+1,year:new Date(sessionStorage.getItem("s")).getFullYear()},this.endDate={day:new Date(sessionStorage.getItem("e")).getDate(),month:new Date(sessionStorage.getItem("e")).getMonth()+1,year:new Date(sessionStorage.getItem("e")).getFullYear()},this.dtOptions=[],this.calendarOptions={headerToolbar:{left:"prev,today,next",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},initialView:"dayGridMonth",weekends:!0,editable:!0,selectable:!0,selectMirror:!0,dayMaxEvents:!0,select:this.handleDateSelect.bind(this),eventStartEditable:!1,firstDay:1,customButtons:{prev:{text:"<",click:this.getEventsByMonthBefore.bind(this)},next:{text:">",click:this.getEventsByMonthAfter.bind(this,this)}}},this.currentEvents=[],this.payslipPDF=[]}return i(t,[{key:"ngOnInit",value:function(){this.isButton="true"==sessionStorage.getItem("ap")==1,this.appTitle="Application",this.dateFrom=this.startDate,this.dateTo=this.endDate,this.isLoading=!1}},{key:"ngAfterViewInit",value:function(){var e=this,t=this.calendarComponent.getApi(),i=new Date(t.view.activeStart),a=new Date(t.view.activeEnd);this.attendanceManagementService.dashboardDateView(this.pipe.transform(i,"MM/dd/yyyy"),this.pipe.transform(a,"MM/dd/yyyy")).subscribe(function(t){e.calendarEvents=t,e.calendarComponent.getApi().addEventSource(e.calendarEvents),e.filingManagementService.dashboardView(0,!1).subscribe(function(t){e.filingList=t,e.payrollManagementService.payslipList(sessionStorage.getItem("u")).subscribe(function(t){e.payslipList=t},function(e){console.log(e.error)})},function(e){console.log(e.error)})},function(e){console.log(e.error)})}},{key:"getEventsByMonthBefore",value:function(e,t){var i=this.calendarComponent.getApi();i.prev();var a=new Date(i.view.activeStart),n=new Date(i.view.activeEnd);this.attendanceManagementService.dashboardDateView(this.pipe.transform(a,"MM/dd/yyyy"),this.pipe.transform(n,"MM/dd/yyyy")).subscribe(function(e){i.removeAllEventSources(),i.addEventSource(e),i.render()},function(e){console.log(e.error)})}},{key:"getEventsByMonthAfter",value:function(e,t){var i=this,a=this.calendarComponent.getApi();a.next();var n=new Date(a.view.activeStart),o=new Date(a.view.activeEnd);this.attendanceManagementService.dashboardDateView(this.pipe.transform(n,"MM/dd/yyyy"),this.pipe.transform(o,"MM/dd/yyyy")).subscribe(function(e){i.calendarEvents=e,a.removeAllEventSources(),a.addEventSource(e),a.render()},function(e){console.log(e.error)})}},{key:"handleDateSelect",value:function(e){this.resetHidden(!1),this.selectedFiling=null,this.parentDetail.dashboardId=0,this.parentDetail.view=!1,this.parentDetail.dashboardDate=this.pipe.transform(new Date(e.startStr),"MM/dd/yyyy"),this.modalService.open(this.filingModal,{size:"xl"})}},{key:"selectFiling",value:function(){switch(this.resetHidden(!1),this.selectedFiling){case 0:this.isChangeLog=!0;break;case 1:this.isChangeSchedule=!0;break;case 2:this.isLeave=!0;break;case 3:this.isOfficialBusiness=!0;break;case 4:this.isOvertime=!0;break;case 5:this.isOffset=!0}}},{key:"resetHidden",value:function(e){this.isChangeLog=e,this.isChangeSchedule=e,this.isLeave=e,this.isOfficialBusiness=e,this.isOvertime=e,this.isOffset=e}},{key:"isSuccess",value:function(e){var t=this;if(0!==e.id){this.modalService.dismissAll();var i=this.calendarComponent.getApi(),a=new Date(i.view.activeStart),n=new Date(i.view.activeEnd);this.attendanceManagementService.dashboardDateView(this.pipe.transform(a,"MM/dd/yyyy"),this.pipe.transform(n,"MM/dd/yyyy")).subscribe(function(e){t.calendarEvents=e,i.removeAllEventSources(),i.addEventSource(e),i.render()},function(e){console.log(e.error)})}}},{key:"next",value:function(){var e=this;this.count++,this.filingManagementService.dashboardView(this.count,this.isApprover).subscribe(function(t){e.filingList=t},function(e){console.log(e.error)})}},{key:"prev",value:function(){var e=this;this.count--,this.filingManagementService.dashboardView(this.count,this.isApprover).subscribe(function(t){e.filingList=t},function(e){console.log(e.error)})}},{key:"view",value:function(e){var t=this.filingList[e];switch(this.parentDetail.dashboardId=t.id,this.parentDetail.dashboardDate="",this.parentDetail.view=!this.isApprover,this.resetHidden(!1),t.module_id){case 33:this.selectedFiling=0,this.isChangeLog=!0;break;case 32:this.selectedFiling=1,this.isChangeSchedule=!0;break;case 34:this.selectedFiling=2,this.isLeave=!0;break;case 35:this.selectedFiling=3,this.isOfficialBusiness=!0;break;case 36:this.selectedFiling=4,this.isOvertime=!0;break;case 37:this.selectedFiling=5,this.isOffset=!0}this.modalService.open(this.filingModal,{size:"xl"})}},{key:"reload",value:function(){var e=this;this.reloadApp=!1,this.filingManagementService.dashboardView(this.count,this.isApprover).subscribe(function(t){e.appTitle=!0===e.isApprover?"Approval":"Application",e.isApprover=!0!==e.isApprover,e.filingList=t,e.reloadApp=!0},function(e){console.log(e.error)})}},{key:"viewLogs",value:function(){var e=this,t=this.pipe.transform(this.dateFrom.year+"/"+this.dateFrom.month+"/"+this.dateFrom.day,"MM/dd/yyyy"),i=this.pipe.transform(this.dateTo.year+"/"+this.dateTo.month+"/"+this.dateTo.day,"MM/dd/yyyy");this.timekeepingManagementService.employeeTimekeeping(sessionStorage.getItem("u"),t,i).subscribe(function(t){e.modalService.open(e.attendanceModal,{size:"xl"}),e.attendanceList=t,e.dtOptions.generated={data:t,dom:"Bfrtip",buttons:["copy","csv","excel","print"],columns:[{data:"employee_code"},{data:"display_name"},{data:"date",render:function(e){var t=new Date(e),i=t.getMonth()+1;return(i.toString().length>1?i:"0"+i)+"/"+("0"+t.getDate()).slice(-2)+"/"+t.getFullYear()}},{data:"rest_day"},{data:"schedule_time_in"},{data:"schedule_time_out"},{data:"actual_time_in"},{data:"actual_time_out"},{data:"reg"},{data:"late"},{data:"undertime"},{data:"is_absent"},{data:"lwop_hour"},{data:"vl_hour"},{data:"sl_hour"},{data:"otherl_hour"},{data:"regnd"},{data:"ot"},{data:"otnd"},{data:"lhot"},{data:"lhotnd"},{data:"lhot_e8"},{data:"lhotnd_e8"},{data:"lhrdot"},{data:"lhrdotnd"},{data:"lhrdot_e8"},{data:"lhrdotnd_e8"},{data:"shot"},{data:"shotnd"},{data:"shot_e8"},{data:"shotnd_e8"},{data:"shrdot"},{data:"shrdotnd"},{data:"shrdot_e8"},{data:"shrdotnd_e8"},{data:"otrd"},{data:"otrdnd"},{data:"otrd_e8"},{data:"otrdnd_e8"},{data:"dhot"},{data:"dhotnd"},{data:"dhot_e8"},{data:"dhotnd_e8"},{data:"dhrdot"},{data:"dhrdotnd"},{data:"dhrdot_e8"},{data:"dhrdotnd_e8"},{data:"remarks"}]}},function(e){console.log(e.error)})}},{key:"selectedPayslip",value:function(e){var t=this;this.payrollManagementService.postedView("0",e.posted_payslip_id).subscribe(function(i){t.payslipHeader=i[0],t.url=t.image+t.payslipHeader.company_logo,t.payrollManagementService.payslipDetailList("0",e.posted_payslip_id).subscribe(function(i){t.payslipDetail=i,t.modalService.open(t.payslipModal,{size:"lg"}),t.payslipPDF.push({payroll_header_id:0,posted_payslip_id:e.posted_payslip_id,created_by:sessionStorage.getItem("u"),series_code:sessionStorage.getItem("sc"),employee_id:sessionStorage.getItem("u")})},function(e){console.log(e.error)})},function(e){console.log(e.error)})}},{key:"openPDF",value:function(){window.location.href=this.payslip+"reportviewer.aspx?payroll_header_id="+this.payslipPDF[0].payroll_header_id+"&posted_payslip_id="+this.payslipPDF[0].posted_payslip_id+"&created_by="+this.payslipPDF[0].created_by+"&series_code="+this.payslipPDF[0].series_code+"&employee_id="+this.payslipPDF[0].employee_id}}]),t}()).\u0275fac=function(e){return new(e||z)(d.Lb(l.a),d.Lb(b.j),d.Lb(u.a),d.Lb(f.a),d.Lb(p.a))},z.\u0275cmp=d.Fb({type:z,selectors:[["app-dashboard"]],viewQuery:function(e,t){var i;1&e&&(d.Nc(k,!0),d.Nc(F,!0),d.Nc(w,!0),d.Nc(S,!0),d.Nc(T,!0),d.Nc(c.a,!0)),2&e&&(d.uc(i=d.cc())&&(t.calendarComponent=i.first),d.uc(i=d.cc())&&(t.filingModal=i.first),d.uc(i=d.cc())&&(t.attendanceModal=i.first),d.uc(i=d.cc())&&(t.payslipModal=i.first),d.uc(i=d.cc())&&(t.htmlData=i.first),d.uc(i=d.cc())&&(t.dtElement=i.first))},decls:8,vars:2,consts:[["class","spinner-wrapper",4,"ngIf"],["class","animate__animated animate__fadeInUp",4,"ngIf"],["attendanceModal",""],["filingModal",""],["payslipModal",""],[1,"spinner-wrapper"],[1,"spinner"],[1,"animate__animated","animate__fadeInUp"],["href",d.Mc("https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"),"rel","stylesheet"],[1,"row"],[1,"col-md-4"],[1,"card"],[1,"card-header"],[1,"d-flex","justify-content-between","align-items-baseline","mb-2"],[1,"card-title","mb-0"],["class","mb-2",4,"ngIf"],[1,"card-body","scroll"],["class","animate__animated animate__flipInY ",4,"ngIf"],[1,"card-footer"],[1,"nav","justify-content-end"],[1,"btn","btn-primary","btn-icon-text",3,"click"],["data-feather","arrow-left","appFeatherIcon","",1,"btn-icon-prepend"],["data-feather","arrow-right","appFeatherIcon","",1,"btn-icon-prepend"],[1,"card-body"],[1,"form-group"],[1,"control-label"],["type","button",1,"btn","btn-sm","btn-primary","pull-right",3,"click"],[1,"input-group"],["placeholder","mm/dd/yyyy","name","dp","value","dateFrom","ngbDatepicker","",1,"form-control",3,"ngModel","ngModelChange","click"],["d","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-light","btn-icon","calendar",3,"click"],["data-feather","calendar","appFeatherIcon","",1,"text-secondary"],["placeholder","mm/dd/yyyy","name","dp","ngbDatepicker","",1,"form-control",3,"ngModel","ngModelChange","click"],["dt","ngbDatepicker"],["bindLabel","posted_payslip_code","bindValue","posted_payslip_id","placeholder","Select Payslip",3,"items","change"],[1,"col-md-8"],[3,"options"],["calendar",""],[1,"card-title"],[1,"mb-2"],["type","button","id","dropdownMenuButton6",1,"btn","p-0","no-dropdown-toggle-icon",3,"click"],["data-feather","repeat","appFeatherIcon","",1,"icon-lg","text-muted","pb-3px"],[1,"animate__animated","animate__flipInY"],[1,"list-group","list-group-flush"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"],[1,"col-md-9"],[1,"col-md-3"],[3,"click"],[1,"badge"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-md-12"],[1,"table-responsive"],["id","modalTable","datatable","",1,"table",3,"dtOptions"],["name","Filing Type","bindLabel","description","bindValue","id","placeholder","Select Filing Type",3,"items","ngModel","ngModelChange","change"],["class","col-md-12",4,"ngIf"],[3,"parentDetail","fileType","isSuccess"],[1,"modal-title"],[1,"btn","btn-success","btn-block",3,"click"],["id","htmlData"],[1,"col-md-8","align-self-center"],[1,""],[2,"width","150px","height","100px",3,"src"],[1,"col-md-6"],[1,"col-sm-4"],[1,"col-sm-8",2,"font-weight","lighter"],[1,"col-md-6","alert","alert-fill-secondary"],[1,"text-center"],[1,"row","alert","alert-success",2,"padding-left","0","padding-right","0","padding-top","5px","padding-bottom","5px"],[1,"text-right"],[1,"row","alert","alert-info",2,"padding-left","0","padding-right","0","padding-top","5px","padding-bottom","5px"],["class","row",4,"ngFor","ngForOf"],[1,"col-md-12","alert","alert-warning",2,"padding-left","0","padding-right","0","padding-top","5px","padding-bottom","5px"],[1,"row","alert","alert-danger",2,"padding-left","0","padding-right","0","padding-top","5px","padding-bottom","5px"],[1,"row","alert","alert-warning",2,"padding-left","0","padding-right","0","padding-top","5px","padding-bottom","5px"]],template:function(e,t){1&e&&(d.Gc(0,x,3,0,"div",0),d.Gc(1,j,53,7,"div",1),d.Gc(2,P,110,1,"ng-template",null,2,d.Hc),d.Gc(4,H,20,8,"ng-template",null,3,d.Hc),d.Gc(6,W,196,78,"ng-template",null,4,d.Hc)),2&e&&(d.jc("ngIf",t.isLoading),d.yb(1),d.jc("ngIf",!t.isLoading))},directives:[r.n,h.a,b.i,m.b,m.i,m.l,g.a,v.a,r.m,c.a,y.a,R.a,Q.a,I.a,_.a,D.a],pipes:[r.f,M],styles:[".scroll[_ngcontent-%COMP%]{height:350px;overflow:scroll}.dasboard-button[_ngcontent-%COMP%]{background-color:transparent;background-repeat:no-repeat;border:none;cursor:pointer;overflow:hidden;outline:none}"]}),z),q=n("PN1e"),Z=n("ogxq"),ee=n("tyNb"),te=n("tyVc"),ie=n("EDFS"),ae=n("kUHs");v.b.registerPlugins([q.a,Z.a]);var ne,oe=[{path:"",component:X}],re=((ne=function t(){e(this,t)}).\u0275mod=d.Jb({type:ne}),ne.\u0275inj=d.Ib({factory:function(e){return new(e||ne)},imports:[[r.c,m.f,m.p,ee.g.forChild(oe),te.a,g.b,ie.b.forRoot(),b.k,c.b,ae.b.forRoot(),b.g,b.d,v.b]]}),ne)},"4rDk":function(t,a,n){"use strict";n.d(a,"a",function(){return x});var o=n("ofXK"),r=n("fXoL"),c=n("PSD3"),s=n.n(c),d=n("AytR"),l=n("3Pt+"),b=n("tyNb"),u=n("xNm2"),f=n("MR3p"),p=n("1kSV"),h=n("IYwT"),m=["overtimeModal"],g=["cancelModal"];function v(e,t){1&e&&(r.Rb(0,"div",4),r.Rb(1,"div",5),r.Ic(2,"Loading..."),r.Qb(),r.Qb())}function y(e,t){1&e&&(r.Rb(0,"nav",40),r.Rb(1,"ol",41),r.Rb(2,"li",42),r.Rb(3,"a",43),r.Ic(4,"Filing"),r.Qb(),r.Qb(),r.Rb(5,"li",42),r.Rb(6,"a",44),r.Ic(7,"Offset"),r.Qb(),r.Qb(),r.Rb(8,"li",45),r.Ic(9,"Detail"),r.Qb(),r.Qb(),r.Qb())}function R(e,t){1&e&&(r.Rb(0,"p",46),r.Ic(1,"Reason is needed!"),r.Qb())}function Q(e,t){if(1&e){var i=r.Sb();r.Rb(0,"div",47),r.Rb(1,"div",48),r.Rb(2,"div",49),r.Rb(3,"h6",50),r.Rb(4,"a",51),r.Mb(5,"i"),r.Ic(6),r.Qb(),r.Qb(),r.Rb(7,"p",52),r.Rb(8,"i",53),r.bc("click",function(){r.xc(i);var e=t.index;return r.dc(2).deleteDocument(e)}),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb()}if(2&e){var a=t.$implicit;r.yb(4),r.kc("href",a.url,r.zc),r.yb(1),r.Ab(a.file_class),r.yb(1),r.Jc(a.file_name)}}function I(e,t){if(1&e){var i=r.Sb();r.Rb(0,"button",58),r.bc("click",function(){return r.xc(i),r.dc(3).cancel()}),r.Mb(1,"i",59),r.Ic(2," Cancel "),r.Qb()}}function _(e,t){if(1&e){var i=r.Sb();r.Rb(0,"button",60),r.bc("click",function(){return r.xc(i),r.dc(3).submit()}),r.Mb(1,"i",61),r.Ic(2," Save Changes "),r.Qb()}}function D(e,t){if(1&e&&(r.Rb(0,"div",54),r.Rb(1,"ul",55),r.Gc(2,I,3,0,"button",56),r.Ic(3," \xa0 "),r.Gc(4,_,3,0,"button",57),r.Qb(),r.Qb()),2&e){var i=r.dc(2);r.yb(2),r.jc("ngIf",i.isCancel),r.yb(2),r.jc("ngIf",i.isSubmit)}}function M(e,t){if(1&e){var i=r.Sb();r.Rb(0,"tr"),r.Rb(1,"td"),r.Ic(2),r.Qb(),r.Rb(3,"td"),r.Ic(4),r.Qb(),r.Rb(5,"td"),r.Ic(6),r.Qb(),r.Rb(7,"td"),r.Ic(8),r.Qb(),r.Rb(9,"td"),r.Ic(10),r.Qb(),r.Rb(11,"td"),r.Rb(12,"button",62),r.bc("click",function(){r.xc(i);var e=t.$implicit;return r.dc(2).editOvertime(e.overtime_id)}),r.Mb(13,"i",63),r.Qb(),r.Qb(),r.Qb()}if(2&e){var a=t.$implicit;r.yb(2),r.Jc(a.overtime_code),r.yb(2),r.Jc(a.overtime_hour),r.yb(2),r.Jc(a.offset_used),r.yb(2),r.Jc(a.offset_hour),r.yb(2),r.Jc(a.balance_hour)}}function k(e,t){if(1&e){var i=r.Sb();r.Rb(0,"div",6),r.Gc(1,y,10,0,"nav",7),r.Rb(2,"div",8),r.Rb(3,"div",9),r.Rb(4,"div",10),r.Rb(5,"div",11),r.Rb(6,"h6",12),r.Ic(7,"Offset"),r.Qb(),r.Qb(),r.Rb(8,"form",13),r.Rb(9,"div",14),r.Rb(10,"div",15),r.Rb(11,"label",16),r.Ic(12,"Reason"),r.Qb(),r.Mb(13,"input",17),r.Gc(14,R,2,0,"p",18),r.Qb(),r.Rb(15,"div",8),r.Rb(16,"div",19),r.Rb(17,"div",15),r.Rb(18,"label",16),r.Ic(19,"Offset Date"),r.Qb(),r.Rb(20,"div",20),r.Rb(21,"input",21,22),r.bc("click",function(){return r.xc(i),r.vc(22).toggle()}),r.Qb(),r.Rb(23,"div",23),r.Rb(24,"button",24),r.bc("click",function(){return r.xc(i),r.vc(22).toggle()}),r.Mb(25,"i",25),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(26,"div",19),r.Rb(27,"div",15),r.Rb(28,"label",16),r.Ic(29,"Offset Minutes"),r.Qb(),r.Mb(30,"input",26),r.Qb(),r.Qb(),r.Qb(),r.Mb(31,"hr"),r.Rb(32,"div",15),r.Rb(33,"input",27,28),r.bc("change",function(e){return r.xc(i),r.dc().uploadFile(e)}),r.Qb(),r.Rb(35,"div",29),r.bc("click",function(e){return r.xc(i),r.dc().openFileBrowser(e)}),r.Mb(36,"input",30),r.Rb(37,"span",23),r.Rb(38,"button",31),r.Ic(39,"Upload"),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(40,"div",32),r.Rb(41,"div",33),r.Gc(42,Q,9,5,"div",34),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Gc(43,D,5,2,"div",35),r.Qb(),r.Qb(),r.Rb(44,"div",36),r.Rb(45,"div",10),r.Rb(46,"div",11),r.Rb(47,"h6",12),r.Ic(48,"Overtime List"),r.Qb(),r.Qb(),r.Rb(49,"div",14),r.Rb(50,"div",37),r.Rb(51,"table",38),r.Rb(52,"thead"),r.Rb(53,"tr"),r.Rb(54,"th"),r.Ic(55,"Overtime Code"),r.Qb(),r.Rb(56,"th"),r.Ic(57,"Overtime Min(s)"),r.Qb(),r.Rb(58,"th"),r.Ic(59,"Offset Used Min(s)"),r.Qb(),r.Rb(60,"th"),r.Ic(61,"Offset Min(s)"),r.Qb(),r.Rb(62,"th"),r.Ic(63,"Balance Min(s)"),r.Qb(),r.Rb(64,"th"),r.Ic(65,"Action"),r.Qb(),r.Qb(),r.Qb(),r.Rb(66,"tbody"),r.Gc(67,M,14,5,"tr",39),r.Qb(),r.Mb(68,"tfoot"),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb()}if(2&e){var a=r.dc();r.yb(1),r.jc("ngIf",!a.isDashboard),r.yb(7),r.jc("formGroup",a.offsetForm),r.yb(6),r.jc("ngIf",a.errReason),r.yb(28),r.jc("ngForOf",a.documents),r.yb(1),r.jc("ngIf",!a.isView),r.yb(24),r.jc("ngForOf",a.otList)}}function F(e,t){if(1&e&&(r.Rb(0,"p",46),r.Ic(1),r.Qb()),2&e){var i=r.dc(2);r.yb(1),r.Jc(i.errOffsetText)}}function w(e,t){if(1&e){var i=r.Sb();r.Rb(0,"div",64),r.Rb(1,"h5",65),r.Ic(2,"Overtime Detail"),r.Qb(),r.Rb(3,"button",66),r.bc("click",function(){return t.$implicit.close("by: close icon")}),r.Rb(4,"span",67),r.Ic(5,"\xd7"),r.Qb(),r.Qb(),r.Qb(),r.Rb(6,"div",68),r.Rb(7,"form",13),r.Rb(8,"div",8),r.Rb(9,"div",19),r.Rb(10,"div",15),r.Rb(11,"label",16),r.Ic(12,"Overtime Code"),r.Qb(),r.Mb(13,"input",69),r.Qb(),r.Qb(),r.Rb(14,"div",19),r.Rb(15,"div",15),r.Rb(16,"label",16),r.Ic(17,"Balance"),r.Qb(),r.Mb(18,"input",70),r.Qb(),r.Qb(),r.Qb(),r.Rb(19,"div",8),r.Rb(20,"div",19),r.Rb(21,"div",15),r.Rb(22,"label",16),r.Ic(23,"Date From"),r.Qb(),r.Mb(24,"input",71),r.Qb(),r.Qb(),r.Rb(25,"div",19),r.Rb(26,"div",15),r.Rb(27,"label",16),r.Ic(28,"Date To"),r.Qb(),r.Mb(29,"input",72),r.Qb(),r.Qb(),r.Qb(),r.Rb(30,"div",8),r.Rb(31,"div",19),r.Rb(32,"div",15),r.Rb(33,"label",16),r.Ic(34,"Used Minutes"),r.Qb(),r.Mb(35,"input",73),r.Qb(),r.Qb(),r.Rb(36,"div",19),r.Rb(37,"div",15),r.Rb(38,"label",16),r.Ic(39,"Offset Minutes"),r.Qb(),r.Rb(40,"input",74),r.bc("keyup",function(){return r.xc(i),r.dc().setOffset()}),r.Qb(),r.Gc(41,F,2,1,"p",18),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(42,"div",75),r.Rb(43,"button",76),r.bc("click",function(){return t.$implicit.close("by: close button")}),r.Ic(44,"Close"),r.Qb(),r.Rb(45,"button",77),r.bc("click",function(){return r.xc(i),r.dc().updateOvertime()}),r.Ic(46,"Save changes"),r.Qb(),r.Qb()}if(2&e){var a=r.dc();r.yb(7),r.jc("formGroup",a.overtimeForm),r.yb(34),r.jc("ngIf",a.errOffsetHour)}}function S(e,t){1&e&&(r.Rb(0,"p",46),r.Ic(1,"Reason is needed!"),r.Qb())}function T(e,t){if(1&e){var i=r.Sb();r.Rb(0,"div",64),r.Rb(1,"h5",65),r.Ic(2,"Cancellation"),r.Qb(),r.Rb(3,"button",66),r.bc("click",function(){return t.$implicit.close("by: close icon")}),r.Rb(4,"span",67),r.Ic(5,"\xd7"),r.Qb(),r.Qb(),r.Qb(),r.Rb(6,"div",68),r.Rb(7,"div",8),r.Rb(8,"div",78),r.Rb(9,"div",15),r.Rb(10,"label",16),r.Ic(11,"Reason"),r.Qb(),r.Rb(12,"textarea",79),r.bc("ngModelChange",function(e){return r.xc(i),r.dc().remarks=e}),r.Qb(),r.Gc(13,S,2,0,"p",18),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(14,"div",75),r.Rb(15,"button",76),r.bc("click",function(){return t.$implicit.close("by: close button")}),r.Ic(16,"Close"),r.Qb(),r.Rb(17,"button",80),r.bc("click",function(){return r.xc(i),r.dc().cancelTransaction()}),r.Ic(18,"Cancel"),r.Qb(),r.Qb()}if(2&e){var a=r.dc();r.yb(12),r.jc("ngModel",a.remarks),r.yb(1),r.jc("ngIf",a.errCancelReason)}}var x=function(){var t=function(){function t(i,a,n,c,s){e(this,t),this.fb=i,this.route=a,this.filingManagementService=n,this.fileManagerService=c,this.modalService=s,this.uri=d.a.exportFile,this.isLoading=!0,this.errCancelReason=!1,this.isCancel=!1,this.isSubmit=!1,this.documents=[],this.fileList=[],this.otList=[],this.selectedOT=[],this.dateToday={day:new Date(new Date).getDate(),month:new Date(new Date).getMonth()+1,year:new Date(new Date).getFullYear()},this.pipe=new o.e("en-US"),this.isSuccess=new r.n,this.fileType=0,this.isDashboard=!1,this.isView=!1,this.remarks="",this.transactionID=""}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.id=this.route.snapshot.paramMap.get("id"),this.offsetForm=this.fb.group({reason:"",offsetDate:this.dateToday,offsetHour:{value:0,disabled:!0},offset_code:""}),void 0!==this.parentDetail&&(this.isDashboard=!0,this.isView=this.parentDetail.view,0!==this.parentDetail.dashboardId?this.id=this.parentDetail.dashboardId:(this.id="",this.offsetForm.get("offsetDate").setValue({year:new Date(this.parentDetail.dashboardDate).getFullYear(),month:new Date(this.parentDetail.dashboardDate).getMonth()+1,day:new Date(this.parentDetail.dashboardDate).getDate()}))),this.overtimeForm=this.fb.group({overtimeID:0,overtimeCode:"",balance:0,dateFrom:"",dateTo:"",overtimeHour:0,offsetUsed:0,offsetHour:0}),""!==this.id?(this.isCancel=!0,this.isSubmit=!0,this.filingManagementService.offsetDetailView(this.id,this.fileType).subscribe(function(t){e.otList=t,e.filingManagementService.offsetView(e.id,e.fileType).subscribe(function(t){e.transactionID=t[0].offset_id,e.offsetForm.setValue({reason:t[0].reason,offsetDate:{year:new Date(t[0].date).getFullYear(),month:new Date(t[0].date).getMonth()+1,day:new Date(t[0].date).getDate()},offsetHour:t[0].offset_hour,offset_code:t[0].offset_code}),e.fileManagerService.viewFile(37,e.id,e.fileType).subscribe(function(i){for(var a=0;a<i.length;a++)e.documents.push({created_by:i[a].created_by,date_created:i[a].date_created,file_name:i[a].file_name,file_path:i[a].file_path,file_type:i[a].file_type,file_class:i[a].file_class,module_id:i[a].module_id,transaction_id:i[a].transaction_id,url:e.uri+i[a].file_path});t[0].active||(e.isView=!0),e.isLoading=!1},function(e){console.log(e.error)})},function(e){console.log(e.error)})},function(e){console.log(e.error)})):(this.id="0",this.filingManagementService.offsetDetailView(this.id,this.fileType).subscribe(function(t){e.otList=t,e.isLoading=!1,e.isCancel=!1,e.isSubmit=!0},function(e){console.log(e.error)}))}},{key:"editOvertime",value:function(e){this.selectedOT=this.otList.filter(function(t){return t.overtime_id===e})[0],this.modalService.open(this.overtimeModal,{size:"xs"}),this.overtimeForm.setValue({overtimeID:this.selectedOT.overtime_id,overtimeCode:this.selectedOT.overtime_code,balance:this.selectedOT.balance_hour,dateFrom:this.selectedOT.date_from,dateTo:this.selectedOT.date_to,overtimeHour:this.selectedOT.overtime_hour,offsetHour:this.selectedOT.offset_used,offsetUsed:this.selectedOT.offset_hour})}},{key:"setOffset",value:function(){this.errOffsetHour=!1,this.errOffsetText="";var e=Number(this.overtimeForm.get("overtimeHour").value),t=Number(this.overtimeForm.get("offsetHour").value),i=Number(this.overtimeForm.get("offsetUsed").value);""===this.overtimeForm.get("offsetUsed").value||null===this.overtimeForm.get("offsetUsed").value?(this.errOffsetHour=!0,this.errOffsetText="Please input number"):(e-(t+i)<0||t+i>e)&&(this.errOffsetHour=!0,this.errOffsetText="Insufficient overtime minutes")}},{key:"updateOvertime",value:function(){var e=this;if(!this.errOffsetHour){var t=this.otList.findIndex(function(t){return t.overtime_id===e.overtimeForm.get("overtimeID").value});this.otList[t].offset_hour=this.overtimeForm.get("offsetUsed").value;for(var i=this.otList.filter(function(e){return e.offset_hour>0}),a=0,n=0;n<i.length;n++)a+=Number(i[n].offset_hour);this.offsetForm.get("offsetHour").setValue(a),this.modalService.dismissAll()}}},{key:"openFileBrowser",value:function(e){e.preventDefault(),document.querySelector("#fileUploadInputExample").click(),e.target.files&&e.target.files&&((new FileReader).readAsDataURL(e.target.files),this.fileList=e.target.files)}},{key:"uploadFile",value:function(e){if(e.target.files.length){for(var t=document.querySelector("#fileUploadInputExample + .input-group .file-upload-info"),i="",a=0;a<e.target.files.length;a++)i+=e.target.files[a].name+" ";t.setAttribute("value",i),this.fileList=e.target.files}}},{key:"deleteDocument",value:function(e){this.documents.splice(e,1)}},{key:"validation",value:function(){var e=!0;return""===this.offsetForm.get("reason").value||null===this.offsetForm.get("reason").value?(e=!1,this.errReason=!0):this.errReason=!1,e}},{key:"submit",value:function(){var e=this;this.validation()&&s.a.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showLoaderOnConfirm:!0}).then(function(t){t.isConfirmed&&s.a.fire({title:"Please Wait !",allowOutsideClick:!1,onBeforeOpen:function(){s.a.showLoading();for(var t=[],i=e.otList.filter(function(e){return e.offset_hour>0}),a=0;a<i.length;a++)t.push({overtime_id:i[a].overtime_id,offset_hour:i[a].offset_hour});var n={offset_id:e.id,offset_code:e.offsetForm.get("offset_code").value,reason:e.offsetForm.get("reason").value,offset_hour:e.offsetForm.get("offsetHour").value,date:e.pipe.transform(e.offsetForm.get("offsetDate").value.year+"/"+e.offsetForm.get("offsetDate").value.month+"/"+e.offsetForm.get("offsetDate").value.day,"MM/dd/yyyy"),created_by:sessionStorage.getItem("u"),active:!0,approval_level_id:sessionStorage.getItem("apl"),series_code:sessionStorage.getItem("sc"),category_id:sessionStorage.getItem("cat"),OffsetDetail:t};e.filingManagementService.offsetIU(n).subscribe(function(t){if(0===t.id)s.a.fire("Failed!",t.description,"error");else{for(var i=[],a=0;a<e.documents.length;a++)i.push({created_by:sessionStorage.getItem("u"),series_code:sessionStorage.getItem("sc"),file_name:e.documents[a].file_name,file_path:e.documents[a].file_path,file_type:e.documents[a].file_type,module_id:e.documents[a].module_id,transaction_id:t.id});e.fileManagerService.updateFile(i).subscribe(function(i){if(void 0!==e.fileList){var a=e.fileList,n=new FormData;Array.from(a).map(function(e,t){return n.append("formfile",e,e.name)}),e.fileManagerService.uploadFile(n,t.code,37,t.id).subscribe(function(i){0===i?s.a.fire("Failed!","File Upload Failed","error"):(s.a.fire("Ok!",t.description,"success"),e.isDashboard&&e.isSuccess.emit(t))},function(e){console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}else s.a.fire("Ok!",t.description,"success"),e.isDashboard&&e.isSuccess.emit(t)},function(e){console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}},function(e){console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}})})}},{key:"cancel",value:function(){this.modalService.open(this.viewModal,{size:"sm"})}},{key:"cancelTransaction",value:function(){var e=this;s.a.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showLoaderOnConfirm:!0}).then(function(t){t.isConfirmed&&s.a.fire({title:"Please Wait !",allowOutsideClick:!1,onBeforeOpen:function(){s.a.showLoading();var t={module_id:37,transaction_id:e.transactionID+",",remarks:e.remarks,created_by:sessionStorage.getItem("u"),series_code:sessionStorage.getItem("sc")};e.filingManagementService.cancel(t).subscribe(function(t){0===t?s.a.fire("Failed!","Transaction failed!","error"):(s.a.fire("Ok!","Transaction successful!","success"),e.modalService.dismissAll(),e.isView=!0)},function(e){console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}})})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(r.Lb(l.c),r.Lb(b.a),r.Lb(u.a),r.Lb(f.a),r.Lb(p.j))},t.\u0275cmp=r.Fb({type:t,selectors:[["app-offset-detail"]],viewQuery:function(e,t){var i;(1&e&&(r.Nc(m,!0),r.Nc(g,!0)),2&e)&&(r.uc(i=r.cc())&&(t.overtimeModal=i.first),r.uc(i=r.cc())&&(t.viewModal=i.first))},inputs:{parentDetail:"parentDetail",fileType:"fileType"},outputs:{isSuccess:"isSuccess"},decls:6,vars:2,consts:[["class","spinner-wrapper",4,"ngIf"],["class","animate__animated animate__fadeInUp",4,"ngIf"],["overtimeModal",""],["cancelModal",""],[1,"spinner-wrapper"],[1,"spinner"],[1,"animate__animated","animate__fadeInUp"],["class","page-breadcrumb",4,"ngIf"],[1,"row"],[1,"col-md-5","grid-margin"],[1,"card"],[1,"card-header"],[1,"card-title"],[3,"formGroup"],[1,"card-body"],[1,"form-group"],[1,"control-label"],["type","text","formControlName","reason","placeholder","Reason",1,"form-control"],["class","text-danger mt-1",4,"ngIf"],[1,"col-md-6"],[1,"input-group"],["placeholder","mm/dd/yyyy","name","dp","formControlName","offsetDate","value","dateFrom","ngbDatepicker","",1,"form-control",3,"click"],["d","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-light","btn-icon","calendar",3,"click"],["data-feather","calendar","appFeatherIcon","",1,"text-secondary"],["type","text","formControlName","offsetHour","placeholder","Reason",1,"form-control"],["multiple","","placeholder","Choose file","type","file","id","fileUploadInputExample",1,"file-upload-default",3,"change"],["file",""],[1,"input-group","col-xs-12",3,"click"],["type","text","disabled","","placeholder","Upload Files",1,"form-control","file-upload-info"],["type","button",1,"file-upload-browse","btn","btn-primary"],[1,"container"],[1,"row","icons-list"],["class","col-sm-6",4,"ngFor","ngForOf"],["class","card-footer",4,"ngIf"],[1,"col-md-7","grid-margin"],[1,"table-responsive"],["id","dataTableExample",1,"table"],[4,"ngFor","ngForOf"],[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["routerLink","/layout/filing/offset-view"],["aria-current","page",1,"breadcrumb-item","active"],[1,"text-danger","mt-1"],[1,"col-sm-6"],[1,"w-100"],[1,"d-flex","justify-content-between"],[1,"text-body","mb-2"],["target","_blank",3,"href"],[1,"text-muted","tx-12"],[1,"mdi","mdi-close",3,"click"],[1,"card-footer"],[1,"nav","justify-content-end"],["class","btn btn-warning btn-icon-text",3,"click",4,"ngIf"],["class","btn btn-primary btn-icon-text",3,"click",4,"ngIf"],[1,"btn","btn-warning","btn-icon-text",3,"click"],["data-feather","rotate-cw","appFeatherIcon","",1,"btn-icon-prepend"],[1,"btn","btn-primary","btn-icon-text",3,"click"],["data-feather","save","appFeatherIcon","",1,"btn-icon-prepend"],["type","button","title","Edit",1,"btn","btn-sm","btn-primary","btn-icon",3,"click"],[1,"feather","icon-edit-2"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["type","text","formControlName","overtimeCode","readonly","","placeholder","Overtime Code",1,"form-control"],["type","text","formControlName","balance","readonly","","placeholder","Balance",1,"form-control"],["type","text","formControlName","dateFrom","readonly","","placeholder","Date From",1,"form-control"],["type","text","formControlName","dateTo","readonly","","placeholder","Date To",1,"form-control"],["type","text","formControlName","offsetHour","readonly","","placeholder","Used Minutes",1,"form-control"],["type","number","formControlName","offsetUsed","placeholder","Offset Minutes",1,"form-control",3,"keyup"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"col-md-12"],["type","text","rows","3","placeholder","Reason",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-warning",3,"click"]],template:function(e,t){1&e&&(r.Gc(0,v,3,0,"div",0),r.Gc(1,k,69,6,"div",1),r.Gc(2,w,47,2,"ng-template",null,2,r.Hc),r.Gc(4,T,19,2,"ng-template",null,3,r.Hc)),2&e&&(r.jc("ngIf",t.isLoading),r.yb(1),r.jc("ngIf",!t.isLoading))},directives:[o.n,l.s,l.j,l.e,l.b,l.i,l.d,p.i,h.a,o.m,b.f,l.n,l.l],styles:[""]}),t}()},EIwK:function(t,a,n){"use strict";n.d(a,"a",function(){return T});var o=n("ofXK"),r=n("fXoL"),c=n("PSD3"),s=n.n(c),d=n("AytR"),l=n("H6xj"),b=n("xNm2"),u=n("MR3p"),f=n("3Pt+"),p=n("tyNb"),h=n("1kSV"),m=n("ZOsW"),g=n("IYwT"),v=["cancelModal"];function y(e,t){1&e&&(r.Rb(0,"div",3),r.Rb(1,"div",4),r.Ic(2,"Loading..."),r.Qb(),r.Qb())}function R(e,t){1&e&&(r.Rb(0,"nav",45),r.Rb(1,"ol",46),r.Rb(2,"li",47),r.Rb(3,"a",48),r.Ic(4,"Filing"),r.Qb(),r.Qb(),r.Rb(5,"li",47),r.Rb(6,"a",49),r.Ic(7,"Leave"),r.Qb(),r.Qb(),r.Rb(8,"li",50),r.Ic(9,"Detail"),r.Qb(),r.Qb(),r.Qb())}function Q(e,t){1&e&&(r.Rb(0,"p",51),r.Ic(1,"Leave Type is needed!"),r.Qb())}function I(e,t){1&e&&(r.Rb(0,"p",51),r.Ic(1,"Reason is needed!"),r.Qb())}function _(e,t){if(1&e){var i=r.Sb();r.Rb(0,"div",52),r.Rb(1,"div",53),r.Rb(2,"div",54),r.Rb(3,"h6",55),r.Rb(4,"a",56),r.Mb(5,"i"),r.Ic(6),r.Qb(),r.Qb(),r.Rb(7,"p",57),r.Rb(8,"i",58),r.bc("click",function(){r.xc(i);var e=t.index;return r.dc(2).deleteDocument(e)}),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb()}if(2&e){var a=t.$implicit;r.yb(4),r.kc("href",a.url,r.zc),r.yb(1),r.Ab(a.file_class),r.yb(1),r.Jc(a.file_name)}}function D(e,t){if(1&e){var i=r.Sb();r.Rb(0,"button",63),r.bc("click",function(){return r.xc(i),r.dc(3).cancel()}),r.Mb(1,"i",64),r.Ic(2," Cancel "),r.Qb()}}function M(e,t){if(1&e){var i=r.Sb();r.Rb(0,"button",65),r.bc("click",function(){return r.xc(i),r.dc(3).submit()}),r.Mb(1,"i",66),r.Ic(2," Save Changes "),r.Qb()}}function k(e,t){if(1&e&&(r.Rb(0,"div",59),r.Rb(1,"ul",60),r.Gc(2,D,3,0,"button",61),r.Ic(3," \xa0 "),r.Gc(4,M,3,0,"button",62),r.Qb(),r.Qb()),2&e){var i=r.dc(2);r.yb(2),r.jc("ngIf",i.isCancel),r.yb(2),r.jc("ngIf",i.isSubmit)}}function F(e,t){if(1&e){var i=r.Sb();r.Rb(0,"div",5),r.Gc(1,R,10,0,"nav",6),r.Rb(2,"div",7),r.Rb(3,"div",8),r.Rb(4,"div",9),r.Rb(5,"form",10),r.Rb(6,"div",11),r.Rb(7,"h6",12),r.Ic(8,"Leave"),r.Qb(),r.Rb(9,"div",7),r.Rb(10,"div",13),r.Rb(11,"div",14),r.Rb(12,"label",15),r.Ic(13,"Leave Type"),r.Qb(),r.Rb(14,"ng-select",16),r.bc("change",function(){return r.xc(i),r.dc().selectLeave()}),r.Qb(),r.Gc(15,Q,2,0,"p",17),r.Qb(),r.Qb(),r.Rb(16,"div",18),r.Rb(17,"div",14),r.Rb(18,"label",15),r.Ic(19,"Balance"),r.Qb(),r.Mb(20,"input",19),r.Qb(),r.Qb(),r.Rb(21,"div",13),r.Rb(22,"div",14),r.Rb(23,"div",20),r.Mb(24,"input",21),r.Rb(25,"label",22),r.Ic(26,"With Pay?"),r.Qb(),r.Qb(),r.Rb(27,"div",20),r.Mb(28,"input",23),r.Rb(29,"label",24),r.Ic(30,"Halfday?"),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(31,"div",7),r.Rb(32,"div",25),r.Rb(33,"div",14),r.Rb(34,"label",15),r.Ic(35,"Date From"),r.Qb(),r.Rb(36,"div",26),r.Rb(37,"input",27,28),r.bc("click",function(){return r.xc(i),r.vc(38).toggle()}),r.Qb(),r.Rb(39,"div",29),r.Rb(40,"button",30),r.bc("click",function(){return r.xc(i),r.vc(38).toggle()}),r.Mb(41,"i",31),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(42,"div",25),r.Rb(43,"div",14),r.Rb(44,"label",15),r.Ic(45,"Date To"),r.Qb(),r.Rb(46,"div",26),r.Rb(47,"input",32,33),r.bc("click",function(){return r.xc(i),r.vc(48).toggle()}),r.Qb(),r.Rb(49,"div",29),r.Rb(50,"button",30),r.bc("click",function(){return r.xc(i),r.vc(48).toggle()}),r.Mb(51,"i",31),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(52,"div",34),r.Rb(53,"div",14),r.Rb(54,"label",15),r.Ic(55,"Reason"),r.Qb(),r.Mb(56,"input",35),r.Gc(57,I,2,0,"p",17),r.Qb(),r.Qb(),r.Qb(),r.Mb(58,"hr"),r.Rb(59,"div",7),r.Rb(60,"div",34),r.Rb(61,"div",14),r.Rb(62,"input",36,37),r.bc("change",function(e){return r.xc(i),r.dc().uploadFile(e)}),r.Qb(),r.Rb(64,"div",38),r.bc("click",function(e){return r.xc(i),r.dc().openFileBrowser(e)}),r.Mb(65,"input",39),r.Rb(66,"span",29),r.Rb(67,"button",40),r.Ic(68,"Upload"),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(69,"div",34),r.Rb(70,"div",41),r.Rb(71,"div",42),r.Gc(72,_,9,5,"div",43),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Gc(73,k,5,2,"div",44),r.Qb(),r.Qb(),r.Qb(),r.Qb()}if(2&e){var a=r.dc();r.yb(1),r.jc("ngIf",!a.isDashboard),r.yb(4),r.jc("formGroup",a.leaveForm),r.yb(9),r.jc("items",a.leaveList),r.yb(1),r.jc("ngIf",a.errleaveType),r.yb(42),r.jc("ngIf",a.errReason),r.yb(15),r.jc("ngForOf",a.documents),r.yb(1),r.jc("ngIf",!a.isView)}}function w(e,t){1&e&&(r.Rb(0,"p",51),r.Ic(1,"Reason is needed!"),r.Qb())}function S(e,t){if(1&e){var i=r.Sb();r.Rb(0,"div",67),r.Rb(1,"h5",68),r.Ic(2,"Cancellation"),r.Qb(),r.Rb(3,"button",69),r.bc("click",function(){return t.$implicit.close("by: close icon")}),r.Rb(4,"span",70),r.Ic(5,"\xd7"),r.Qb(),r.Qb(),r.Qb(),r.Rb(6,"div",71),r.Rb(7,"div",7),r.Rb(8,"div",72),r.Rb(9,"div",14),r.Rb(10,"label",15),r.Ic(11,"Reason"),r.Qb(),r.Rb(12,"textarea",73),r.bc("ngModelChange",function(e){return r.xc(i),r.dc().remarks=e}),r.Qb(),r.Gc(13,w,2,0,"p",17),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(14,"div",74),r.Rb(15,"button",75),r.bc("click",function(){return t.$implicit.close("by: close button")}),r.Ic(16,"Close"),r.Qb(),r.Rb(17,"button",76),r.bc("click",function(){return r.xc(i),r.dc().cancelTransaction()}),r.Ic(18,"Cancel"),r.Qb(),r.Qb()}if(2&e){var a=r.dc();r.yb(12),r.jc("ngModel",a.remarks),r.yb(1),r.jc("ngIf",a.errCancelReason)}}var T=function(){var t=function(){function t(i,a,n,c,s,l){e(this,t),this.leaveManagementService=i,this.filingManagementService=a,this.fileManagerService=n,this.fb=c,this.route=s,this.modalService=l,this.uri=d.a.exportFile,this.isLoading=!0,this.isView=!1,this.isCancel=!1,this.isSubmit=!1,this.errCancelReason=!1,this.dateToday={day:new Date(new Date).getDate(),month:new Date(new Date).getMonth()+1,year:new Date(new Date).getFullYear()},this.leaveList=[],this.documents=[],this.fileList=[],this.pipe=new o.e("en-US"),this.isSuccess=new r.n,this.fileType=0,this.isDashboard=!1,this.remarks="",this.transactionID=""}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.id=this.route.snapshot.paramMap.get("id"),this.leaveForm=this.fb.group({leave_code:"",selectedLeaveType:null,balance:{value:0,disabled:!0},withPay:!0,halfday:!1,dateFrom:this.dateToday,dateTo:this.dateToday,reason:""}),void 0!==this.parentDetail&&(this.isDashboard=!0,0!==this.parentDetail.dashboardId?this.id=this.parentDetail.dashboardId:(this.id="",this.leaveForm.get("dateFrom").setValue({year:new Date(this.parentDetail.dashboardDate).getFullYear(),month:new Date(this.parentDetail.dashboardDate).getMonth()+1,day:new Date(this.parentDetail.dashboardDate).getDate()}),this.leaveForm.get("dateTo").setValue({year:new Date(this.parentDetail.dashboardDate).getFullYear(),month:new Date(this.parentDetail.dashboardDate).getMonth()+1,day:new Date(this.parentDetail.dashboardDate).getDate()}))),this.resetError(!1),this.leaveManagementService.employeeLeave("0",sessionStorage.getItem("u")).subscribe(function(t){e.leaveList=t,""!==e.id?(e.isCancel=!0,e.isSubmit=!0,e.filingManagementService.leaveView(e.id,e.fileType).subscribe(function(t){e.transactionID=t[0].leave_id,e.leaveForm.setValue({leave_code:t[0].leave_code,selectedLeaveType:t[0].leave_type_id,balance:e.leaveList.filter(function(e){return e.leave_type_id===t[0].leave_type_id})[0].leave_balance,withPay:t[0].is_paid,halfday:t[0].is_half_day,dateFrom:{year:new Date(t[0].date_from).getFullYear(),month:new Date(t[0].date_from).getMonth()+1,day:new Date(t[0].date_from).getDate()},dateTo:{year:new Date(t[0].date_to).getFullYear(),month:new Date(t[0].date_to).getMonth()+1,day:new Date(t[0].date_to).getDate()},reason:t[0].description}),e.fileManagerService.viewFile(34,e.id,e.fileType).subscribe(function(i){for(var a=0;a<i.length;a++)e.documents.push({created_by:i[a].created_by,date_created:i[a].date_created,file_name:i[a].file_name,file_path:i[a].file_path,file_type:i[a].file_type,file_class:i[a].file_class,module_id:i[a].module_id,transaction_id:i[a].transaction_id,url:e.uri+i[a].file_path});t[0].active||(e.isView=!0),e.isLoading=!1},function(e){console.log(e.error)})},function(e){console.log(e.error)})):(e.id="0",e.isLoading=!1,e.isCancel=!1,e.isSubmit=!0)},function(e){console.log(e.error)})}},{key:"selectLeave",value:function(){var e=this;this.leaveForm.get("balance").setValue(this.leaveList.filter(function(t){return t.leave_type_id===e.leaveForm.get("selectedLeaveType").value})[0].leave_balance)}},{key:"openFileBrowser",value:function(e){e.preventDefault(),document.querySelector("#fileUploadInputExample").click(),e.target.files&&e.target.files&&((new FileReader).readAsDataURL(e.target.files),this.fileList=e.target.files)}},{key:"uploadFile",value:function(e){if(e.target.files.length){for(var t=document.querySelector("#fileUploadInputExample + .input-group .file-upload-info"),i="",a=0;a<e.target.files.length;a++)i+=e.target.files[a].name+" ";t.setAttribute("value",i),this.fileList=e.target.files}}},{key:"deleteDocument",value:function(e){this.documents.splice(e,1)}},{key:"validation",value:function(){this.resetError(!1);var e=!0;return""!==this.leaveForm.get("selectedLeaveType").value&&null!==this.leaveForm.get("selectedLeaveType").value||(e=!1,this.errleaveType=!0),""!==this.leaveForm.get("reason").value&&null!==this.leaveForm.get("reason").value||(e=!1,this.errReason=!0),e}},{key:"resetError",value:function(e){this.errleaveType=e,this.errReason=e}},{key:"submit",value:function(){var e=this;this.validation()&&s.a.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showLoaderOnConfirm:!0}).then(function(t){t.isConfirmed&&s.a.fire({title:"Please Wait !",allowOutsideClick:!1,onBeforeOpen:function(){s.a.showLoading();var t={leave_id:e.id,leave_code:e.leaveForm.get("leave_code").value,leave_type_id:e.leaveForm.get("selectedLeaveType").value,date_from:e.pipe.transform(e.leaveForm.get("dateFrom").value.year+"/"+e.leaveForm.get("dateFrom").value.month+"/"+e.leaveForm.get("dateFrom").value.day,"MM/dd/yyyy"),date_to:e.pipe.transform(e.leaveForm.get("dateTo").value.year+"/"+e.leaveForm.get("dateTo").value.month+"/"+e.leaveForm.get("dateTo").value.day,"MM/dd/yyyy"),is_half_day:e.leaveForm.get("halfday").value,is_paid:e.leaveForm.get("withPay").value,description:e.leaveForm.get("reason").value,with_attachment:e.fileList.length+e.documents.length>0,employee_id:sessionStorage.getItem("u"),active:!0,approval_level_id:sessionStorage.getItem("apl"),series_code:sessionStorage.getItem("sc"),category_id:sessionStorage.getItem("cat"),created_by:sessionStorage.getItem("u")};e.filingManagementService.leaveIU(t).subscribe(function(t){if(0===t.id)s.a.fire("Failed!",t.description,"error");else{for(var i=[],a=0;a<e.documents.length;a++)i.push({created_by:sessionStorage.getItem("u"),series_code:sessionStorage.getItem("sc"),file_name:e.documents[a].file_name,file_path:e.documents[a].file_path,file_type:e.documents[a].file_type,module_id:e.documents[a].module_id,transaction_id:t.id});e.fileManagerService.updateFile(i).subscribe(function(i){if(void 0!==e.fileList){var a=e.fileList,n=new FormData;Array.from(a).map(function(e,t){return n.append("formfile",e,e.name)}),e.fileManagerService.uploadFile(n,t.code,34,t.id).subscribe(function(i){0===i?s.a.fire("Failed!","File Upload Failed","error"):(s.a.fire("Ok!",t.description,"success"),e.isDashboard&&e.isSuccess.emit(t))},function(e){console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}else s.a.fire("Ok!",t.description,"success"),e.isDashboard&&e.isSuccess.emit(t)},function(e){console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}},function(e){console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}})})}},{key:"cancel",value:function(){this.modalService.open(this.viewModal,{size:"sm"})}},{key:"cancelTransaction",value:function(){var e=this;s.a.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showLoaderOnConfirm:!0}).then(function(t){t.isConfirmed&&s.a.fire({title:"Please Wait !",allowOutsideClick:!1,onBeforeOpen:function(){s.a.showLoading();var t={module_id:34,transaction_id:e.transactionID+",",remarks:e.remarks,created_by:sessionStorage.getItem("u"),series_code:sessionStorage.getItem("sc")};e.filingManagementService.cancel(t).subscribe(function(t){0===t?s.a.fire("Failed!","Transaction failed!","error"):(s.a.fire("Ok!","Transaction successful!","success"),e.modalService.dismissAll(),e.isView=!0)},function(e){console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}})})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(r.Lb(l.a),r.Lb(b.a),r.Lb(u.a),r.Lb(f.c),r.Lb(p.a),r.Lb(h.j))},t.\u0275cmp=r.Fb({type:t,selectors:[["app-leave-detail"]],viewQuery:function(e,t){var i;(1&e&&r.Nc(v,!0),2&e)&&(r.uc(i=r.cc())&&(t.viewModal=i.first))},inputs:{parentDetail:"parentDetail",fileType:"fileType"},outputs:{isSuccess:"isSuccess"},decls:4,vars:2,consts:[["class","spinner-wrapper",4,"ngIf"],["class","animate__animated animate__fadeInUp",4,"ngIf"],["cancelModal",""],[1,"spinner-wrapper"],[1,"spinner"],[1,"animate__animated","animate__fadeInUp"],["class","page-breadcrumb",4,"ngIf"],[1,"row"],[1,"col-md-12","grid-margin"],[1,"card"],[3,"formGroup"],[1,"card-body"],[1,"card-title"],[1,"col-md-4"],[1,"form-group"],[1,"control-label"],["formControlName","selectedLeaveType","bindLabel","leave_name","bindValue","leave_type_id","placeholder","Select Leave Type",3,"items","change"],["class","text-danger mt-1",4,"ngIf"],[1,"col-md-2"],["formControlName","balance","type","text","placeholder","0",1,"form-control"],[1,"custom-control","custom-switch"],["formControlName","withPay","type","checkbox","id","customSwitch1",1,"custom-control-input"],["for","customSwitch1",1,"custom-control-label"],["formControlName","halfday","type","checkbox","id","customSwitch2",1,"custom-control-input"],["for","customSwitch2",1,"custom-control-label"],[1,"col-md-3"],[1,"input-group"],["placeholder","mm/dd/yyyy","name","dp","formControlName","dateFrom","value","dateFrom","ngbDatepicker","",1,"form-control",3,"click"],["d","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-light","btn-icon","calendar",3,"click"],["data-feather","calendar","appFeatherIcon","",1,"text-secondary"],["placeholder","mm/dd/yyyy","name","dp","formControlName","dateTo","ngbDatepicker","",1,"form-control",3,"click"],["dt","ngbDatepicker"],[1,"col-md-6"],["formControlName","reason","type","text","placeholder","Reason",1,"form-control"],["multiple","","placeholder","Choose file","type","file","id","fileUploadInputExample",1,"file-upload-default",3,"change"],["file",""],[1,"input-group","col-xs-12",3,"click"],["type","text","disabled","","placeholder","Upload Files",1,"form-control","file-upload-info"],["type","button",1,"file-upload-browse","btn","btn-primary"],[1,"container"],[1,"row","icons-list"],["class","col-sm-6",4,"ngFor","ngForOf"],["class","card-footer",4,"ngIf"],[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["routerLink","/layout/filing/leave-view"],["aria-current","page",1,"breadcrumb-item","active"],[1,"text-danger","mt-1"],[1,"col-sm-6"],[1,"w-100"],[1,"d-flex","justify-content-between"],[1,"text-body","mb-2"],["target","_blank",3,"href"],[1,"text-muted","tx-12"],[1,"mdi","mdi-close",3,"click"],[1,"card-footer"],[1,"nav","justify-content-end"],["class","btn btn-warning btn-icon-text",3,"click",4,"ngIf"],["class","btn btn-primary btn-icon-text",3,"click",4,"ngIf"],[1,"btn","btn-warning","btn-icon-text",3,"click"],["data-feather","rotate-cw","appFeatherIcon","",1,"btn-icon-prepend"],[1,"btn","btn-primary","btn-icon-text",3,"click"],["data-feather","save","appFeatherIcon","",1,"btn-icon-prepend"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-md-12"],["type","text","rows","3","placeholder","Reason",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-warning",3,"click"]],template:function(e,t){1&e&&(r.Gc(0,y,3,0,"div",0),r.Gc(1,F,74,7,"div",1),r.Gc(2,S,19,2,"ng-template",null,2,r.Hc)),2&e&&(r.jc("ngIf",t.isLoading),r.yb(1),r.jc("ngIf",!t.isLoading))},directives:[o.n,f.s,f.j,f.e,m.a,f.i,f.d,f.b,f.a,h.i,g.a,o.m,p.f,f.l],styles:[""]}),t}()},NvFN:function(t,a,n){"use strict";n.d(a,"a",function(){return L});var o=n("ofXK"),r=n("fXoL"),c=n("PSD3"),s=n.n(c),d=n("AytR"),l=n("3Pt+"),b=n("tyNb"),u=n("xNm2"),f=n("MR3p"),p=n("1kSV"),h=n("cnwU"),m=n("ZOsW"),g=n("IYwT"),v=["cancelModal"];function y(e,t){1&e&&(r.Rb(0,"div",2),r.Rb(1,"div",3),r.Ic(2,"Loading..."),r.Qb(),r.Qb())}function R(e,t){1&e&&(r.Rb(0,"nav",46),r.Rb(1,"ol",47),r.Rb(2,"li",48),r.Rb(3,"a",49),r.Ic(4,"Filing"),r.Qb(),r.Qb(),r.Rb(5,"li",48),r.Rb(6,"a",50),r.Ic(7,"Change Schedule"),r.Qb(),r.Qb(),r.Rb(8,"li",51),r.Ic(9,"Detail"),r.Qb(),r.Qb(),r.Qb())}function Q(e,t){1&e&&(r.Rb(0,"p",52),r.Ic(1,"Shift Code is needed!"),r.Qb())}function I(e,t){1&e&&(r.Rb(0,"p",52),r.Ic(1,"Reason is needed!"),r.Qb())}function _(e,t){if(1&e){var i=r.Sb();r.Rb(0,"div",53),r.Rb(1,"div",54),r.Rb(2,"div",55),r.Rb(3,"h6",56),r.Rb(4,"a",57),r.Mb(5,"i"),r.Ic(6),r.Qb(),r.Qb(),r.Rb(7,"p",58),r.Rb(8,"i",59),r.bc("click",function(){r.xc(i);var e=t.index;return r.dc(2).deleteDocument(e)}),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb()}if(2&e){var a=t.$implicit;r.yb(4),r.kc("href",a.url,r.zc),r.yb(1),r.Ab(a.file_class),r.yb(1),r.Jc(a.file_name)}}function D(e,t){1&e&&(r.Rb(0,"button",60),r.Mb(1,"span",61),r.Ic(2," Loading... "),r.Qb())}function M(e,t){if(1&e){var i=r.Sb();r.Rb(0,"button",62),r.bc("click",function(){return r.xc(i),r.dc(2).search()}),r.Mb(1,"i",63),r.Ic(2," Search "),r.Qb()}}function k(e,t){if(1&e&&(r.Rb(0,"tr"),r.Rb(1,"td"),r.Ic(2),r.ec(3,"date"),r.Qb(),r.Rb(4,"td"),r.Ic(5),r.Qb(),r.Rb(6,"td"),r.Ic(7),r.Qb(),r.Rb(8,"td"),r.Ic(9),r.Qb(),r.Rb(10,"td"),r.Ic(11),r.Qb(),r.Qb()),2&e){var i=t.$implicit;r.yb(2),r.Jc(r.gc(3,5,i.date,"MM/dd/yyyy")),r.yb(3),r.Jc(i.sked_time_in),r.yb(2),r.Jc(i.sked_time_out),r.yb(2),r.Jc(i.time_in),r.yb(2),r.Jc(i.time_out)}}function F(e,t){if(1&e){var i=r.Sb();r.Rb(0,"button",68),r.bc("click",function(){return r.xc(i),r.dc(3).cancel()}),r.Mb(1,"i",69),r.Ic(2," Cancel "),r.Qb()}}function w(e,t){if(1&e){var i=r.Sb();r.Rb(0,"button",70),r.bc("click",function(){return r.xc(i),r.dc(3).submit()}),r.Mb(1,"i",71),r.Ic(2," Save Changes "),r.Qb()}}function S(e,t){if(1&e&&(r.Rb(0,"div",64),r.Rb(1,"ul",65),r.Gc(2,F,3,0,"button",66),r.Ic(3," \xa0 "),r.Gc(4,w,3,0,"button",67),r.Qb(),r.Qb()),2&e){var i=r.dc(2);r.yb(2),r.jc("ngIf",i.isCancel),r.yb(2),r.jc("ngIf",i.isSubmit)}}function T(e,t){1&e&&(r.Rb(0,"p",52),r.Ic(1,"Reason is needed!"),r.Qb())}function x(e,t){if(1&e){var i=r.Sb();r.Rb(0,"div",72),r.Rb(1,"h5",73),r.Ic(2,"Cancellation"),r.Qb(),r.Rb(3,"button",74),r.bc("click",function(){return t.$implicit.close("by: close icon")}),r.Rb(4,"span",75),r.Ic(5,"\xd7"),r.Qb(),r.Qb(),r.Qb(),r.Rb(6,"div",76),r.Rb(7,"div",6),r.Rb(8,"div",40),r.Rb(9,"div",13),r.Rb(10,"label",14),r.Ic(11,"Reason"),r.Qb(),r.Rb(12,"textarea",77),r.bc("ngModelChange",function(e){return r.xc(i),r.dc(2).remarks=e}),r.Qb(),r.Gc(13,T,2,0,"p",16),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(14,"div",78),r.Rb(15,"button",79),r.bc("click",function(){return t.$implicit.close("by: close button")}),r.Ic(16,"Close"),r.Qb(),r.Rb(17,"button",80),r.bc("click",function(){return r.xc(i),r.dc(2).cancelTransaction()}),r.Ic(18,"Cancel"),r.Qb(),r.Qb()}if(2&e){var a=r.dc(2);r.yb(12),r.jc("ngModel",a.remarks),r.yb(1),r.jc("ngIf",a.errCancelReason)}}function C(e,t){if(1&e){var i=r.Sb();r.Rb(0,"div",4),r.Gc(1,R,10,0,"nav",5),r.Rb(2,"div",6),r.Rb(3,"div",7),r.Rb(4,"div",8),r.Rb(5,"div",9),r.Rb(6,"div",10),r.Rb(7,"h6"),r.Ic(8,"Change Schedule"),r.Qb(),r.Qb(),r.Rb(9,"form",11),r.Rb(10,"div",6),r.Rb(11,"div",12),r.Rb(12,"div",13),r.Rb(13,"label",14),r.Ic(14,"Shift Code"),r.Qb(),r.Mb(15,"ng-select",15),r.Gc(16,Q,2,0,"p",16),r.Qb(),r.Qb(),r.Rb(17,"div",12),r.Rb(18,"div",13),r.Rb(19,"label",14),r.Ic(20,"Reason"),r.Qb(),r.Mb(21,"input",17),r.Gc(22,I,2,0,"p",16),r.Qb(),r.Qb(),r.Rb(23,"div",18),r.Rb(24,"div",13),r.Rb(25,"label",14),r.Ic(26,"Date From"),r.Qb(),r.Rb(27,"div",19),r.Rb(28,"input",20,21),r.bc("click",function(){return r.xc(i),r.vc(29).toggle()}),r.Qb(),r.Rb(30,"div",22),r.Rb(31,"button",23),r.bc("click",function(){return r.xc(i),r.vc(29).toggle()}),r.Mb(32,"i",24),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(33,"div",18),r.Rb(34,"div",13),r.Rb(35,"label",14),r.Ic(36,"Date To"),r.Qb(),r.Rb(37,"div",19),r.Rb(38,"input",25,26),r.bc("click",function(){return r.xc(i),r.vc(39).toggle()}),r.Qb(),r.Rb(40,"div",22),r.Rb(41,"button",23),r.bc("click",function(){return r.xc(i),r.vc(39).toggle()}),r.Mb(42,"i",24),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(43,"div",6),r.Rb(44,"div",27),r.Rb(45,"div",13),r.Rb(46,"input",28,29),r.bc("change",function(e){return r.xc(i),r.dc().uploadFile(e)}),r.Qb(),r.Rb(48,"div",30),r.bc("click",function(e){return r.xc(i),r.dc().openFileBrowser(e)}),r.Mb(49,"input",31),r.Rb(50,"span",22),r.Rb(51,"button",32),r.Ic(52,"Upload"),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(53,"div",27),r.Rb(54,"div",33),r.Rb(55,"div",34),r.Gc(56,_,9,5,"div",35),r.Qb(),r.Qb(),r.Qb(),r.Rb(57,"div",36),r.Rb(58,"div",37),r.Gc(59,D,3,0,"button",38),r.Gc(60,M,3,0,"button",39),r.Qb(),r.Qb(),r.Qb(),r.Mb(61,"hr"),r.Qb(),r.Rb(62,"div",6),r.Rb(63,"div",40),r.Rb(64,"div",41),r.Rb(65,"table",42),r.Rb(66,"thead"),r.Rb(67,"tr"),r.Rb(68,"th"),r.Ic(69,"Date"),r.Qb(),r.Rb(70,"th"),r.Ic(71,"Old Schedule In"),r.Qb(),r.Rb(72,"th"),r.Ic(73,"Old Schedule Out"),r.Qb(),r.Rb(74,"th"),r.Ic(75,"Schedule In"),r.Qb(),r.Rb(76,"th"),r.Ic(77,"Schedule Out"),r.Qb(),r.Qb(),r.Qb(),r.Rb(78,"tbody"),r.Gc(79,k,12,8,"tr",43),r.Qb(),r.Mb(80,"tfoot"),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Gc(81,S,5,2,"div",44),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Gc(82,x,19,2,"ng-template",null,45,r.Hc),r.Qb()}if(2&e){var a=r.dc();r.yb(1),r.jc("ngIf",!a.isDashboard),r.yb(8),r.jc("formGroup",a.changeScheduleForm),r.yb(6),r.jc("items",a.shiftList),r.yb(1),r.jc("ngIf",a.errShiftCode),r.yb(6),r.jc("ngIf",a.errReason),r.yb(34),r.jc("ngForOf",a.documents),r.yb(3),r.jc("ngIf",a.isSearch),r.yb(1),r.jc("ngIf",!a.isSearch),r.yb(19),r.jc("ngForOf",a.scheduleList),r.yb(2),r.jc("ngIf",!a.isView)}}var L=function(){var t=function(){function t(i,a,n,c,s,l){e(this,t),this.fb=i,this.route=a,this.filingManagementService=n,this.fileManagerService=c,this.modalService=s,this.shiftcodeManagementService=l,this.uri=d.a.exportFile,this.isLoading=!0,this.isSearch=!1,this.isView=!1,this.isCancel=!1,this.isSubmit=!1,this.shiftList=[],this.documents=[],this.fileList=[],this.scheduleList=[],this.dateToday={day:new Date(new Date).getDate(),month:new Date(new Date).getMonth()+1,year:new Date(new Date).getFullYear()},this.pipe=new o.e("en-US"),this.transactionID="",this.remarks="",this.isSuccess=new r.n,this.fileType=0,this.isDashboard=!1,this.errCancelReason=!1}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.id=this.route.snapshot.paramMap.get("id"),this.changeScheduleForm=this.fb.group({selectedShift:null,changeScheduleCode:"",reason:"",dateFrom:this.dateToday,dateTo:this.dateToday}),void 0!==this.parentDetail&&(this.isDashboard=!0,this.isView=this.parentDetail.view,0!==this.parentDetail.dashboardId?this.id=this.parentDetail.dashboardId:(this.id="",this.changeScheduleForm.get("dateFrom").setValue({year:new Date(this.parentDetail.dashboardDate).getFullYear(),month:new Date(this.parentDetail.dashboardDate).getMonth()+1,day:new Date(this.parentDetail.dashboardDate).getDate()}),this.changeScheduleForm.get("dateTo").setValue({year:new Date(this.parentDetail.dashboardDate).getFullYear(),month:new Date(this.parentDetail.dashboardDate).getMonth()+1,day:new Date(this.parentDetail.dashboardDate).getDate()}))),this.resetError(!1),this.shiftcodeManagementService.shiftList("0").subscribe(function(t){e.shiftList=t,""!==e.id?(e.isCancel=!0,e.isSubmit=!0,e.filingManagementService.changeScheduleView(e.id,e.fileType).subscribe(function(t){e.transactionID=t[0].change_schedule_id,e.changeScheduleForm.setValue({selectedShift:t[0].shift_id,changeScheduleCode:t[0].change_schedule_code,reason:t[0].reason,dateFrom:{year:new Date(t[0].date_from).getFullYear(),month:new Date(t[0].date_from).getMonth()+1,day:new Date(t[0].date_from).getDate()},dateTo:{year:new Date(t[0].date_to).getFullYear(),month:new Date(t[0].date_to).getMonth()+1,day:new Date(t[0].date_to).getDate()}}),e.filingManagementService.changeScheduleDetailView(e.id,e.fileType).subscribe(function(i){e.scheduleList=i,e.fileManagerService.viewFile(32,e.id,e.fileType).subscribe(function(i){for(var a=0;a<i.length;a++)e.documents.push({created_by:i[a].created_by,date_created:i[a].date_created,file_name:i[a].file_name,file_path:i[a].file_path,file_type:i[a].file_type,file_class:i[a].file_class,module_id:i[a].module_id,transaction_id:i[a].transaction_id,url:e.uri+i[a].file_path});t[0].active||(e.isView=!0),e.isLoading=!1},function(e){console.log(e.error)})},function(e){console.log(e.error)})},function(e){console.log(e.error)})):(e.id="0",e.isLoading=!1,e.isCancel=!1,e.isSubmit=!0)},function(e){console.log(e.error)})}},{key:"search",value:function(){var e=this;this.isSearch=!0;var t=this.pipe.transform(this.changeScheduleForm.get("dateFrom").value.year+"/"+this.changeScheduleForm.get("dateFrom").value.month+"/"+this.changeScheduleForm.get("dateFrom").value.day,"MM/dd/yyyy"),i=this.pipe.transform(this.changeScheduleForm.get("dateTo").value.year+"/"+this.changeScheduleForm.get("dateTo").value.month+"/"+this.changeScheduleForm.get("dateTo").value.day,"MM/dd/yyyy");this.filingManagementService.shiftList(this.changeScheduleForm.get("selectedShift").value,t,i).subscribe(function(t){e.scheduleList=t,e.isSearch=!1},function(t){console.log(t.error),e.isSearch=!1})}},{key:"openFileBrowser",value:function(e){e.preventDefault(),document.querySelector("#fileUploadInputExample").click(),e.target.files&&e.target.files&&((new FileReader).readAsDataURL(e.target.files),this.fileList=e.target.files)}},{key:"uploadFile",value:function(e){if(e.target.files.length){for(var t=document.querySelector("#fileUploadInputExample + .input-group .file-upload-info"),i="",a=0;a<e.target.files.length;a++)i+=e.target.files[a].name+" ";t.setAttribute("value",i),this.fileList=e.target.files}}},{key:"deleteDocument",value:function(e){this.documents.splice(e,1)}},{key:"validation",value:function(){var e=!0;return this.resetError(!1),""!==this.changeScheduleForm.get("selectedShift").value&&null!==this.changeScheduleForm.get("selectedShift").value||(e=!1,this.errShiftCode=!0),""!==this.changeScheduleForm.get("reason").value&&null!==this.changeScheduleForm.get("reason").value||(e=!1,this.errReason=!0),e}},{key:"resetError",value:function(e){this.errShiftCode=e,this.errReason=e}},{key:"submit",value:function(){var e=this;this.validation()&&s.a.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showLoaderOnConfirm:!0}).then(function(t){t.isConfirmed&&s.a.fire({title:"Please Wait !",allowOutsideClick:!1,onBeforeOpen:function(){s.a.showLoading();var t={change_schedule_id:e.id,change_schedule_code:e.changeScheduleForm.get("changeScheduleCode").value,shift_id:e.changeScheduleForm.get("selectedShift").value,reason:e.changeScheduleForm.get("reason").value,date_from:e.pipe.transform(e.changeScheduleForm.get("dateFrom").value.year+"/"+e.changeScheduleForm.get("dateFrom").value.month+"/"+e.changeScheduleForm.get("dateFrom").value.day,"MM/dd/yyyy"),date_to:e.pipe.transform(e.changeScheduleForm.get("dateTo").value.year+"/"+e.changeScheduleForm.get("dateTo").value.month+"/"+e.changeScheduleForm.get("dateTo").value.day,"MM/dd/yyyy"),active:!0,approval_level_id:sessionStorage.getItem("apl"),series_code:sessionStorage.getItem("sc"),category_id:sessionStorage.getItem("cat"),created_by:sessionStorage.getItem("u"),employee_id:sessionStorage.getItem("u")};e.filingManagementService.changeScheduleIU(t).subscribe(function(t){if(0===t.id)s.a.fire("Failed!",t.description,"error");else{for(var i=[],a=0;a<e.documents.length;a++)i.push({created_by:sessionStorage.getItem("u"),series_code:sessionStorage.getItem("sc"),file_name:e.documents[a].file_name,file_path:e.documents[a].file_path,file_type:e.documents[a].file_type,module_id:e.documents[a].module_id,transaction_id:t.id});e.fileManagerService.updateFile(i).subscribe(function(i){if(void 0!==e.fileList){var a=e.fileList,n=new FormData;Array.from(a).map(function(e,t){return n.append("formfile",e,e.name)}),e.fileManagerService.uploadFile(n,t.code,32,t.id).subscribe(function(i){0===i?s.a.fire("Failed!","File Upload Failed","error"):(s.a.fire("Ok!",t.description,"success"),e.isDashboard&&e.isSuccess.emit(t))},function(e){console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}else s.a.fire("Ok!",t.description,"success"),e.isDashboard&&e.isSuccess.emit(t)},function(e){console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}},function(e){console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}})})}},{key:"cancel",value:function(){this.modalService.open(this.viewModal,{size:"sm"})}},{key:"cancelTransaction",value:function(){var e=this;s.a.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showLoaderOnConfirm:!0}).then(function(t){t.isConfirmed&&s.a.fire({title:"Please Wait !",allowOutsideClick:!1,onBeforeOpen:function(){s.a.showLoading();var t={module_id:32,transaction_id:e.transactionID+",",remarks:e.remarks,created_by:sessionStorage.getItem("u"),series_code:sessionStorage.getItem("sc")};e.filingManagementService.cancel(t).subscribe(function(t){0===t?s.a.fire("Failed!","Transaction failed!","error"):(s.a.fire("Ok!","Transaction successful!","success"),e.modalService.dismissAll(),e.isView=!0)},function(e){console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}})})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(r.Lb(l.c),r.Lb(b.a),r.Lb(u.a),r.Lb(f.a),r.Lb(p.j),r.Lb(h.a))},t.\u0275cmp=r.Fb({type:t,selectors:[["app-change-schedule-detail"]],viewQuery:function(e,t){var i;(1&e&&r.Nc(v,!0),2&e)&&(r.uc(i=r.cc())&&(t.viewModal=i.first))},inputs:{parentDetail:"parentDetail",fileType:"fileType"},outputs:{isSuccess:"isSuccess"},decls:2,vars:2,consts:[["class","spinner-wrapper",4,"ngIf"],["class","animate__animated animate__fadeInUp",4,"ngIf"],[1,"spinner-wrapper"],[1,"spinner"],[1,"animate__animated","animate__fadeInUp"],["class","page-breadcrumb",4,"ngIf"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title"],[3,"formGroup"],[1,"col-sm-3"],[1,"form-group"],[1,"control-label"],["name","Shift Code","bindLabel","shift_name","bindValue","int_shift_id","placeholder","Select Shift Code","formControlName","selectedShift",3,"items"],["class","text-danger mt-1",4,"ngIf"],["type","text","formControlName","reason","placeholder","Reason",1,"form-control"],[1,"col-md-3"],[1,"input-group"],["placeholder","mm/dd/yyyy","name","dp","formControlName","dateFrom","ngbDatepicker","",1,"form-control",3,"click"],["df","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-light","btn-icon","calendar",3,"click"],["data-feather","calendar","appFeatherIcon","",1,"text-secondary"],["placeholder","mm/dd/yyyy","name","dp","formControlName","dateTo","ngbDatepicker","",1,"form-control",3,"click"],["dt","ngbDatepicker"],[1,"col-md-5"],["multiple","","placeholder","Choose file","type","file","id","fileUploadInputExample",1,"file-upload-default",3,"change"],["file",""],[1,"input-group","col-xs-12",3,"click"],["type","text","disabled","","placeholder","Upload Files",1,"form-control","file-upload-info"],["type","button",1,"file-upload-browse","btn","btn-primary"],[1,"container"],[1,"row","icons-list"],["class","col-sm-6",4,"ngFor","ngForOf"],[1,"col-md-2"],[1,"text-right"],["class","btn btn-primary","type","button","disabled","",4,"ngIf"],["type","button","class","btn btn-primary btn-icon-text",3,"click",4,"ngIf"],[1,"col-md-12"],[1,"table-responsive"],["id","dataTableExample",1,"table"],[4,"ngFor","ngForOf"],["class","card-footer",4,"ngIf"],["cancelModal",""],[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["routerLink","/layout/filing/change-schedule-view"],["aria-current","page",1,"breadcrumb-item","active"],[1,"text-danger","mt-1"],[1,"col-sm-6"],[1,"w-100"],[1,"d-flex","justify-content-between"],[1,"text-body","mb-2"],["target","_blank",3,"href"],[1,"text-muted","tx-12"],[1,"mdi","mdi-close",3,"click"],["type","button","disabled","",1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["type","button",1,"btn","btn-primary","btn-icon-text",3,"click"],["data-feather","search","appFeatherIcon","",1,"btn-icon-prepend"],[1,"card-footer"],[1,"nav","justify-content-end"],["class","btn btn-warning btn-icon-text",3,"click",4,"ngIf"],["class","btn btn-primary btn-icon-text",3,"click",4,"ngIf"],[1,"btn","btn-warning","btn-icon-text",3,"click"],["data-feather","rotate-cw","appFeatherIcon","",1,"btn-icon-prepend"],[1,"btn","btn-primary","btn-icon-text",3,"click"],["data-feather","save","appFeatherIcon","",1,"btn-icon-prepend"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["type","text","rows","3","placeholder","Reason",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-warning",3,"click"]],template:function(e,t){1&e&&(r.Gc(0,y,3,0,"div",0),r.Gc(1,C,84,10,"div",1)),2&e&&(r.jc("ngIf",t.isLoading),r.yb(1),r.jc("ngIf",!t.isLoading))},directives:[o.n,l.s,l.j,l.e,m.a,l.i,l.d,l.b,p.i,g.a,o.m,b.f,l.l],pipes:[o.e],styles:[""]}),t}()},TEbG:function(t,a,n){"use strict";n.d(a,"a",function(){return O});var o=n("ofXK"),r=n("fXoL"),c=n("PSD3"),s=n.n(c),d=n("AytR"),l=n("3Pt+"),b=n("xNm2"),u=n("MR3p"),f=n("tyNb"),p=n("1kSV"),h=n("EDFS"),m=n("IYwT"),g=n("kUHs"),v=["cancelModal"];function y(e,t){1&e&&(r.Rb(0,"div",3),r.Rb(1,"div",4),r.Ic(2,"Loading..."),r.Qb(),r.Qb())}function R(e,t){1&e&&(r.Rb(0,"nav",42),r.Rb(1,"ol",43),r.Rb(2,"li",44),r.Rb(3,"a",45),r.Ic(4,"Filing"),r.Qb(),r.Qb(),r.Rb(5,"li",44),r.Rb(6,"a",46),r.Ic(7,"Official Business"),r.Qb(),r.Qb(),r.Rb(8,"li",47),r.Ic(9,"Detail"),r.Qb(),r.Qb(),r.Qb())}function Q(e,t){1&e&&(r.Rb(0,"p",48),r.Ic(1,"Company is needed!"),r.Qb())}var I=function(){return{standalone:!0}};function _(e,t){if(1&e){var i=r.Sb();r.Rb(0,"ngb-datepicker",49),r.bc("ngModelChange",function(e){return r.xc(i),r.dc(2).dfPopDate=e})("ngModelChange",function(){return r.xc(i),r.dc(2).setDateFrom()}),r.Qb(),r.Rb(1,"timepicker",50),r.bc("ngModelChange",function(e){return r.xc(i),r.dc(2).dfPopTime=e})("ngModelChange",function(){return r.xc(i),r.dc(2).setDateFrom()}),r.Qb()}if(2&e){var a=r.dc(2);r.jc("ngModel",a.dfPopDate)("ngModelOptions",r.mc(5,I)),r.yb(1),r.jc("ngModel",a.dfPopTime)("ngModelOptions",r.mc(6,I))("showMeridian",!0)}}function D(e,t){if(1&e){var i=r.Sb();r.Rb(0,"ngb-datepicker",49),r.bc("ngModelChange",function(e){return r.xc(i),r.dc(2).dtPopDate=e})("ngModelChange",function(){return r.xc(i),r.dc(2).setDateTo()}),r.Qb(),r.Rb(1,"timepicker",50),r.bc("ngModelChange",function(e){return r.xc(i),r.dc(2).dtPopTime=e})("ngModelChange",function(){return r.xc(i),r.dc(2).setDateTo()}),r.Qb()}if(2&e){var a=r.dc(2);r.jc("ngModel",a.dtPopDate)("ngModelOptions",r.mc(5,I)),r.yb(1),r.jc("ngModel",a.dtPopTime)("ngModelOptions",r.mc(6,I))("showMeridian",!0)}}function M(e,t){1&e&&(r.Rb(0,"p",48),r.Ic(1,"Location is needed!"),r.Qb())}function k(e,t){1&e&&(r.Rb(0,"p",48),r.Ic(1,"Reason is needed!"),r.Qb())}function F(e,t){if(1&e){var i=r.Sb();r.Rb(0,"div",27),r.Rb(1,"div",51),r.Rb(2,"div",52),r.Rb(3,"h6",53),r.Rb(4,"a",54),r.Mb(5,"i"),r.Ic(6),r.Qb(),r.Qb(),r.Rb(7,"p",55),r.Rb(8,"i",56),r.bc("click",function(){r.xc(i);var e=t.index;return r.dc(2).deleteDocument(e)}),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb()}if(2&e){var a=t.$implicit;r.yb(4),r.kc("href",a.url,r.zc),r.yb(1),r.Ab(a.file_class),r.yb(1),r.Jc(a.file_name)}}function w(e,t){if(1&e){var i=r.Sb();r.Rb(0,"button",61),r.bc("click",function(){return r.xc(i),r.dc(3).cancel()}),r.Mb(1,"i",62),r.Ic(2," Cancel "),r.Qb()}}function S(e,t){if(1&e){var i=r.Sb();r.Rb(0,"button",63),r.bc("click",function(){return r.xc(i),r.dc(3).submit()}),r.Mb(1,"i",64),r.Ic(2," Save Changes "),r.Qb()}}function T(e,t){if(1&e&&(r.Rb(0,"div",57),r.Rb(1,"ul",58),r.Gc(2,w,3,0,"button",59),r.Ic(3," \xa0 "),r.Gc(4,S,3,0,"button",60),r.Qb(),r.Qb()),2&e){var i=r.dc(2);r.yb(2),r.jc("ngIf",i.isCancel),r.yb(2),r.jc("ngIf",i.isSubmit)}}function x(e,t){if(1&e){var i=r.Sb();r.Rb(0,"div",5),r.Gc(1,R,10,0,"nav",6),r.Rb(2,"div",7),r.Rb(3,"div",8),r.Rb(4,"div",9),r.Rb(5,"form",10),r.Rb(6,"div",11),r.Rb(7,"h6",12),r.Ic(8,"Official Business"),r.Qb(),r.Rb(9,"div",7),r.Rb(10,"div",13),r.Rb(11,"div",7),r.Rb(12,"div",14),r.Rb(13,"div",15),r.Rb(14,"label",16),r.Ic(15,"Company To Visit"),r.Qb(),r.Mb(16,"input",17),r.Gc(17,Q,2,0,"p",18),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(18,"div",19),r.Rb(19,"div",7),r.Rb(20,"div",20),r.Rb(21,"div",15),r.Rb(22,"label",16),r.Ic(23,"Date From"),r.Qb(),r.Rb(24,"div",21),r.Gc(25,_,2,7,"ng-template",null,22,r.Hc),r.Mb(27,"input",23),r.Rb(28,"div",24),r.Rb(29,"button",25),r.Mb(30,"i",26),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(31,"div",27),r.Rb(32,"div",15),r.Rb(33,"label",16),r.Ic(34,"Date To"),r.Qb(),r.Rb(35,"div",21),r.Gc(36,D,2,7,"ng-template",null,28,r.Hc),r.Mb(38,"input",29),r.Rb(39,"div",24),r.Rb(40,"button",25),r.Mb(41,"i",26),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(42,"div",7),r.Rb(43,"div",13),r.Rb(44,"div",15),r.Rb(45,"label",16),r.Ic(46,"Location"),r.Qb(),r.Mb(47,"input",30),r.Gc(48,M,2,0,"p",18),r.Qb(),r.Qb(),r.Rb(49,"div",19),r.Rb(50,"div",15),r.Rb(51,"label",16),r.Ic(52,"Reason"),r.Qb(),r.Mb(53,"input",31),r.Gc(54,k,2,0,"p",18),r.Qb(),r.Qb(),r.Qb(),r.Mb(55,"hr"),r.Rb(56,"div",7),r.Rb(57,"div",20),r.Rb(58,"div",15),r.Rb(59,"input",32,33),r.bc("change",function(e){return r.xc(i),r.dc().uploadFile(e)}),r.Qb(),r.Rb(61,"div",34),r.bc("click",function(e){return r.xc(i),r.dc().openFileBrowser(e)}),r.Mb(62,"input",35),r.Rb(63,"span",36),r.Rb(64,"button",37),r.Ic(65,"Upload"),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(66,"div",20),r.Rb(67,"div",38),r.Rb(68,"div",39),r.Gc(69,F,9,5,"div",40),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Gc(70,T,5,2,"div",41),r.Qb(),r.Qb(),r.Qb(),r.Qb()}if(2&e){var a=r.vc(26),n=r.vc(37),o=r.dc();r.yb(1),r.jc("ngIf",!o.isDashboard),r.yb(4),r.jc("formGroup",o.officialBusinessForm),r.yb(12),r.jc("ngIf",o.errCompany),r.yb(10),r.kc("value",o.dateFrom),r.jc("popover",a)("outsideClick",!0),r.yb(11),r.kc("value",o.dateTo),r.jc("popover",n)("outsideClick",!0),r.yb(10),r.jc("ngIf",o.errLocation),r.yb(6),r.jc("ngIf",o.errReason),r.yb(15),r.jc("ngForOf",o.documents),r.yb(1),r.jc("ngIf",!o.isView)}}function C(e,t){1&e&&(r.Rb(0,"p",48),r.Ic(1,"Reason is needed!"),r.Qb())}function L(e,t){if(1&e){var i=r.Sb();r.Rb(0,"div",65),r.Rb(1,"h5",66),r.Ic(2,"Cancellation"),r.Qb(),r.Rb(3,"button",67),r.bc("click",function(){return t.$implicit.close("by: close icon")}),r.Rb(4,"span",68),r.Ic(5,"\xd7"),r.Qb(),r.Qb(),r.Qb(),r.Rb(6,"div",69),r.Rb(7,"div",7),r.Rb(8,"div",14),r.Rb(9,"div",15),r.Rb(10,"label",16),r.Ic(11,"Reason"),r.Qb(),r.Rb(12,"textarea",70),r.bc("ngModelChange",function(e){return r.xc(i),r.dc().remarks=e}),r.Qb(),r.Gc(13,C,2,0,"p",18),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(14,"div",71),r.Rb(15,"button",72),r.bc("click",function(){return t.$implicit.close("by: close button")}),r.Ic(16,"Close"),r.Qb(),r.Rb(17,"button",73),r.bc("click",function(){return r.xc(i),r.dc().cancelTransaction()}),r.Ic(18,"Cancel"),r.Qb(),r.Qb()}if(2&e){var a=r.dc();r.yb(12),r.jc("ngModel",a.remarks),r.yb(1),r.jc("ngIf",a.errCancelReason)}}var O=function(){var t=function(){function t(i,a,n,c,s){e(this,t),this.fb=i,this.filingManagementService=a,this.fileManagerService=n,this.route=c,this.modalService=s,this.uri=d.a.exportFile,this.isLoading=!0,this.isView=!1,this.isCancel=!1,this.isSubmit=!1,this.errCancelReason=!1,this.dateToday={day:new Date(new Date).getDate(),month:new Date(new Date).getMonth()+1,year:new Date(new Date).getFullYear()},this.pipe=new o.e("en-US"),this.documents=[],this.remarks="",this.isSuccess=new r.n,this.fileType=0,this.isDashboard=!1,this.transactionID=""}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.id=this.route.snapshot.paramMap.get("id"),this.officialBusinessForm=this.fb.group({official_business_code:"",dateFrom:this.pipe.transform(this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day+" 00:00","MM/dd/yyyy hh:mm a"),dateTo:this.pipe.transform(this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day+" 00:00","MM/dd/yyyy hh:mm a"),company:"",location:"",reason:""}),void 0!==this.parentDetail&&(this.isDashboard=!0,this.isView=this.parentDetail.view,0!==this.parentDetail.dashboardId?this.id=this.parentDetail.dashboardId:(this.id="",this.officialBusinessForm.get("dateFrom").setValue(this.pipe.transform(this.parentDetail.dashboardDate+" 00:00","MM/dd/yyyy hh:mm a")),this.officialBusinessForm.get("dateTo").setValue(this.pipe.transform(this.parentDetail.dashboardDate+" 00:00","MM/dd/yyyy hh:mm a")))),this.resetError(!1),""!==this.id?(this.isCancel=!0,this.isSubmit=!0,this.filingManagementService.officialBusinessView(this.id,this.fileType).subscribe(function(t){e.transactionID=t[0].official_business_id,e.createdBy=t[0].created_by,e.officialBusinessForm.setValue({official_business_code:t[0].official_business_code,dateFrom:e.pipe.transform(t[0].date_from,"MM/dd/yyyy hh:mm a"),dateTo:e.pipe.transform(t[0].date_to,"MM/dd/yyyy hh:mm a"),company:t[0].company_to_visit,location:t[0].location,reason:t[0].description}),e.fileManagerService.viewFile(35,e.id,e.fileType).subscribe(function(i){for(var a=0;a<i.length;a++)e.documents.push({created_by:i[a].created_by,date_created:i[a].date_created,file_name:i[a].file_name,file_path:i[a].file_path,file_type:i[a].file_type,file_class:i[a].file_class,module_id:i[a].module_id,transaction_id:i[a].transaction_id,url:e.uri+i[a].file_path});t[0].active||(e.isView=!0),e.isLoading=!1},function(e){console.log(e.error)})},function(e){console.log(e.error)})):(this.id="0",this.isLoading=!1,this.isCancel=!1,this.isSubmit=!0)}},{key:"deleteDocument",value:function(e){this.documents.splice(e,1)}},{key:"setDateFrom",value:function(){var e,t;e=this.pipe.transform(null==this.dfPopDate?this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day:this.dfPopDate.year+"/"+this.dfPopDate.month+"/"+this.dfPopDate.day,"MM/dd/yyyy"),t=null===this.pipe.transform(this.dfPopTime,"hh:mm a")||void 0===this.pipe.transform(this.dfPopTime,"hh:mm a")?this.pipe.transform(this.pipe.transform(this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day+" 00:00","MM/dd/yyyy hh:mm a"),"hh:mm a"):this.pipe.transform(this.dfPopTime,"hh:mm a"),this.dateFrom=e+" "+t,this.officialBusinessForm.get("dateFrom").setValue(this.dateFrom)}},{key:"setDateTo",value:function(){var e,t;e=this.pipe.transform(null==this.dtPopDate?this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day:this.dtPopDate.year+"/"+this.dtPopDate.month+"/"+this.dtPopDate.day,"MM/dd/yyyy"),t=null===this.pipe.transform(this.dtPopTime,"hh:mm a")||void 0===this.pipe.transform(this.dtPopTime,"hh:mm a")?this.pipe.transform(this.pipe.transform(this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day+" 00:00","MM/dd/yyyy hh:mm a"),"hh:mm a"):this.pipe.transform(this.dtPopTime,"hh:mm a"),this.dateTo=e+" "+t,this.officialBusinessForm.get("dateTo").setValue(this.dateTo)}},{key:"validation",value:function(){this.resetError(!1);var e=!0;return""!==this.officialBusinessForm.get("company").value&&null!==this.officialBusinessForm.get("company").value||(e=!1,this.errCompany=!0),""!==this.officialBusinessForm.get("location").value&&null!==this.officialBusinessForm.get("location").value||(e=!1,this.errLocation=!0),""!==this.officialBusinessForm.get("reason").value&&null!==this.officialBusinessForm.get("reason").value||(e=!1,this.errReason=!0),e}},{key:"resetError",value:function(e){this.errCompany=e,this.errLocation=e,this.errReason=e}},{key:"openFileBrowser",value:function(e){e.preventDefault(),document.querySelector("#fileUploadInputExample").click(),e.target.files&&e.target.files&&((new FileReader).readAsDataURL(e.target.files),this.fileList=e.target.files)}},{key:"uploadFile",value:function(e){if(e.target.files.length){for(var t=document.querySelector("#fileUploadInputExample + .input-group .file-upload-info"),i="",a=0;a<e.target.files.length;a++)i+=e.target.files[a].name+" ";t.setAttribute("value",i),this.fileList=e.target.files}}},{key:"submit",value:function(){var e=this;this.validation()&&s.a.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showLoaderOnConfirm:!0}).then(function(t){t.isConfirmed&&s.a.fire({title:"Please Wait !",allowOutsideClick:!1,onBeforeOpen:function(){s.a.showLoading();var t={official_business_id:e.id,date_from:e.officialBusinessForm.get("dateFrom").value,official_business_code:e.officialBusinessForm.get("official_business_code").value,date_to:e.officialBusinessForm.get("dateTo").value,company_to_visit:e.officialBusinessForm.get("company").value,location:e.officialBusinessForm.get("location").value,description:e.officialBusinessForm.get("reason").value,created_by:sessionStorage.getItem("u"),active:!0,approval_level_id:sessionStorage.getItem("apl"),series_code:sessionStorage.getItem("sc"),category_id:sessionStorage.getItem("cat")};e.filingManagementService.officialBusinessIU(t).subscribe(function(t){if(0===t.id)s.a.fire("Failed!",t.description,"error");else{for(var i=[],a=0;a<e.documents.length;a++)i.push({created_by:sessionStorage.getItem("u"),series_code:sessionStorage.getItem("sc"),file_name:e.documents[a].file_name,file_path:e.documents[a].file_path,file_type:e.documents[a].file_type,module_id:e.documents[a].module_id,transaction_id:t.id});e.fileManagerService.updateFile(i).subscribe(function(i){if(void 0!==e.fileList){var a=e.fileList,n=new FormData;Array.from(a).map(function(e,t){return n.append("formfile",e,e.name)}),e.fileManagerService.uploadFile(n,t.code,35,t.id).subscribe(function(i){0===i?s.a.fire("Failed!","File Upload Failed","error"):(s.a.fire("Ok!",t.description,"success"),e.isDashboard&&e.isSuccess.emit(t))},function(e){console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}else s.a.fire("Ok!",t.description,"success"),e.isDashboard&&e.isSuccess.emit(t)},function(e){console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}},function(e){console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}})})}},{key:"cancel",value:function(){this.modalService.open(this.viewModal,{size:"sm"})}},{key:"cancelTransaction",value:function(){var e=this;s.a.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showLoaderOnConfirm:!0}).then(function(t){t.isConfirmed&&s.a.fire({title:"Please Wait !",allowOutsideClick:!1,onBeforeOpen:function(){s.a.showLoading();var t={module_id:35,transaction_id:e.transactionID+",",remarks:e.remarks,employee_id:e.createdBy,created_by:sessionStorage.getItem("u"),series_code:sessionStorage.getItem("sc")};e.filingManagementService.cancel(t).subscribe(function(t){0===t?s.a.fire("Failed!","Transaction failed!","error"):(s.a.fire("Ok!","Transaction successful!","success"),e.modalService.dismissAll(),e.isView=!0)},function(e){console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}})})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(r.Lb(l.c),r.Lb(b.a),r.Lb(u.a),r.Lb(f.a),r.Lb(p.j))},t.\u0275cmp=r.Fb({type:t,selectors:[["app-official-business-detail"]],viewQuery:function(e,t){var i;(1&e&&r.Nc(v,!0),2&e)&&(r.uc(i=r.cc())&&(t.viewModal=i.first))},inputs:{parentDetail:"parentDetail",fileType:"fileType"},outputs:{isSuccess:"isSuccess"},decls:4,vars:2,consts:[["class","spinner-wrapper",4,"ngIf"],["class","animate__animated animate__fadeInUp",4,"ngIf"],["cancelModal",""],[1,"spinner-wrapper"],[1,"spinner"],[1,"animate__animated","animate__fadeInUp"],["class","page-breadcrumb",4,"ngIf"],[1,"row"],[1,"col-md-12","grid-margin"],[1,"card"],[3,"formGroup"],[1,"card-body"],[1,"card-title"],[1,"col-md-5"],[1,"col-md-12"],[1,"form-group"],[1,"control-label"],["type","text","formControlName","company","placeholder","Company To Visit",1,"form-control"],["class","text-danger mt-1",4,"ngIf"],[1,"col-md-7"],[1,"col-md-6"],[1,"input-group"],["popDateFrom",""],["formControlName","dateFrom","name","dp",1,"form-control",3,"popover","outsideClick","value"],[1,"input-group-prepend"],["type","button",1,"btn","btn-outline-light","btn-icon","calendar"],["data-feather","calendar","appFeatherIcon","",1,"text-secondary"],[1,"col-sm-6"],["popDateTo",""],["formControlName","dateTo","name","dp",1,"form-control",3,"popover","outsideClick","value"],["type","text","formControlName","location","placeholder","Location",1,"form-control"],["type","text","formControlName","reason","placeholder","Reason",1,"form-control"],["multiple","","placeholder","Choose file","type","file","id","fileUploadInputExample",1,"file-upload-default",3,"change"],["file",""],[1,"input-group","col-xs-12",3,"click"],["type","text","disabled","","placeholder","Upload Files",1,"form-control","file-upload-info"],[1,"input-group-append"],["type","button",1,"file-upload-browse","btn","btn-primary"],[1,"container"],[1,"row","icons-list"],["class","col-sm-6",4,"ngFor","ngForOf"],["class","card-footer",4,"ngIf"],[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["routerLink","/layout/filing/official-business-view"],["aria-current","page",1,"breadcrumb-item","active"],[1,"text-danger","mt-1"],[3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","showMeridian","ngModelChange"],[1,"w-100"],[1,"d-flex","justify-content-between"],[1,"text-body","mb-2"],["target","_blank",3,"href"],[1,"text-muted","tx-12"],[1,"mdi","mdi-close",3,"click"],[1,"card-footer"],[1,"nav","justify-content-end"],["class","btn btn-warning btn-icon-text",3,"click",4,"ngIf"],["class","btn btn-primary btn-icon-text",3,"click",4,"ngIf"],[1,"btn","btn-warning","btn-icon-text",3,"click"],["data-feather","rotate-cw","appFeatherIcon","",1,"btn-icon-prepend"],[1,"btn","btn-primary","btn-icon-text",3,"click"],["data-feather","save","appFeatherIcon","",1,"btn-icon-prepend"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["type","text","rows","3","placeholder","Reason",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-warning",3,"click"]],template:function(e,t){1&e&&(r.Gc(0,y,3,0,"div",0),r.Gc(1,x,71,13,"div",1),r.Gc(2,L,19,2,"ng-template",null,2,r.Hc)),2&e&&(r.jc("ngIf",t.isLoading),r.yb(1),r.jc("ngIf",!t.isLoading))},directives:[o.n,l.s,l.j,l.e,l.b,l.i,l.d,h.a,m.a,o.m,f.f,p.c,l.l,g.a],styles:[""]}),t}()},"a48+":function(t,a,n){"use strict";n.d(a,"a",function(){return B});var o=n("ofXK"),r=n("fXoL"),c=n("PSD3"),s=n.n(c),d=n("AytR"),l=n("3Pt+"),b=n("/oZC"),u=n("tyNb"),f=n("xNm2"),p=n("MR3p"),h=n("1kSV"),m=n("ZOsW"),g=n("EDFS"),v=n("IYwT"),y=n("kUHs"),R=["cancelModal"];function Q(e,t){1&e&&(r.Rb(0,"div",3),r.Rb(1,"div",4),r.Ic(2,"Loading..."),r.Qb(),r.Qb())}function I(e,t){1&e&&(r.Rb(0,"nav",50),r.Rb(1,"ol",51),r.Rb(2,"li",52),r.Rb(3,"a",53),r.Ic(4,"Filing"),r.Qb(),r.Qb(),r.Rb(5,"li",52),r.Rb(6,"a",54),r.Ic(7,"Overtime"),r.Qb(),r.Qb(),r.Rb(8,"li",55),r.Ic(9,"Detail"),r.Qb(),r.Qb(),r.Qb())}function _(e,t){1&e&&(r.Rb(0,"p",56),r.Ic(1,"OT Type is needed!"),r.Qb())}var D=function(){return{standalone:!0}};function M(e,t){if(1&e){var i=r.Sb();r.Rb(0,"ngb-datepicker",57),r.bc("ngModelChange",function(e){return r.xc(i),r.dc(2).dfPopDate=e})("ngModelChange",function(){return r.xc(i),r.dc(2).setDateFrom()}),r.Qb(),r.Rb(1,"timepicker",58),r.bc("ngModelChange",function(e){return r.xc(i),r.dc(2).dfPopTime=e})("ngModelChange",function(){return r.xc(i),r.dc(2).setDateFrom()}),r.Qb()}if(2&e){var a=r.dc(2);r.jc("ngModel",a.dfPopDate)("ngModelOptions",r.mc(5,D)),r.yb(1),r.jc("ngModel",a.dfPopTime)("ngModelOptions",r.mc(6,D))("showMeridian",!0)}}function k(e,t){if(1&e){var i=r.Sb();r.Rb(0,"ngb-datepicker",57),r.bc("ngModelChange",function(e){return r.xc(i),r.dc(2).dtPopDate=e})("ngModelChange",function(){return r.xc(i),r.dc(2).setDateTo()}),r.Qb(),r.Rb(1,"timepicker",58),r.bc("ngModelChange",function(e){return r.xc(i),r.dc(2).dtPopTime=e})("ngModelChange",function(){return r.xc(i),r.dc(2).setDateTo()}),r.Qb()}if(2&e){var a=r.dc(2);r.jc("ngModel",a.dtPopDate)("ngModelOptions",r.mc(5,D)),r.yb(1),r.jc("ngModel",a.dtPopTime)("ngModelOptions",r.mc(6,D))("showMeridian",!0)}}function F(e,t){1&e&&(r.Rb(0,"p",56),r.Ic(1,"Reason is needed!"),r.Qb())}function w(e,t){if(1&e){var i=r.Sb();r.Rb(0,"ngb-datepicker",57),r.bc("ngModelChange",function(e){return r.xc(i),r.dc(2).bdfPopDate=e})("ngModelChange",function(){return r.xc(i),r.dc(2).setBreakDateFrom()}),r.Qb(),r.Rb(1,"timepicker",58),r.bc("ngModelChange",function(e){return r.xc(i),r.dc(2).bdfPopTime=e})("ngModelChange",function(){return r.xc(i),r.dc(2).setBreakDateFrom()}),r.Qb()}if(2&e){var a=r.dc(2);r.jc("ngModel",a.bdfPopDate)("ngModelOptions",r.mc(5,D)),r.yb(1),r.jc("ngModel",a.bdfPopTime)("ngModelOptions",r.mc(6,D))("showMeridian",!0)}}function S(e,t){if(1&e){var i=r.Sb();r.Rb(0,"ngb-datepicker",57),r.bc("ngModelChange",function(e){return r.xc(i),r.dc(2).bdtPopDate=e})("ngModelChange",function(){return r.xc(i),r.dc(2).setBreakDateTo()}),r.Qb(),r.Rb(1,"timepicker",58),r.bc("ngModelChange",function(e){return r.xc(i),r.dc(2).bdtPopTime=e})("ngModelChange",function(){return r.xc(i),r.dc(2).setBreakDateTo()}),r.Qb()}if(2&e){var a=r.dc(2);r.jc("ngModel",a.bdtPopDate)("ngModelOptions",r.mc(5,D)),r.yb(1),r.jc("ngModel",a.bdtPopTime)("ngModelOptions",r.mc(6,D))("showMeridian",!0)}}function T(e,t){if(1&e){var i=r.Sb();r.Rb(0,"div",27),r.Rb(1,"div",59),r.Rb(2,"div",60),r.Rb(3,"h6",61),r.Rb(4,"a",62),r.Mb(5,"i"),r.Ic(6),r.Qb(),r.Qb(),r.Rb(7,"p",63),r.Rb(8,"i",64),r.bc("click",function(){r.xc(i);var e=t.index;return r.dc(2).deleteDocument(e)}),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb()}if(2&e){var a=t.$implicit;r.yb(4),r.kc("href",a.url,r.zc),r.yb(1),r.Ab(a.file_class),r.yb(1),r.Jc(a.file_name)}}function x(e,t){if(1&e){var i=r.Sb();r.Rb(0,"button",69),r.bc("click",function(){return r.xc(i),r.dc(3).cancel()}),r.Mb(1,"i",70),r.Ic(2," Cancel "),r.Qb()}}function C(e,t){if(1&e){var i=r.Sb();r.Rb(0,"button",71),r.bc("click",function(){return r.xc(i),r.dc(3).submit()}),r.Mb(1,"i",72),r.Ic(2," Save Changes "),r.Qb()}}function L(e,t){if(1&e&&(r.Rb(0,"div",65),r.Rb(1,"ul",66),r.Gc(2,x,3,0,"button",67),r.Ic(3," \xa0 "),r.Gc(4,C,3,0,"button",68),r.Qb(),r.Qb()),2&e){var i=r.dc(2);r.yb(2),r.jc("ngIf",i.isCancel),r.yb(2),r.jc("ngIf",i.isSubmit)}}function O(e,t){if(1&e){var i=r.Sb();r.Rb(0,"div",5),r.Gc(1,I,10,0,"nav",6),r.Rb(2,"div",7),r.Rb(3,"div",8),r.Rb(4,"div",9),r.Rb(5,"form",10),r.Rb(6,"div",11),r.Rb(7,"h6",12),r.Ic(8,"Overtime"),r.Qb(),r.Rb(9,"div",7),r.Rb(10,"div",13),r.Rb(11,"div",7),r.Rb(12,"div",14),r.Rb(13,"div",15),r.Rb(14,"label",16),r.Ic(15,"OT Type"),r.Qb(),r.Mb(16,"ng-select",17),r.Gc(17,_,2,0,"p",18),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(18,"div",19),r.Rb(19,"div",7),r.Rb(20,"div",20),r.Rb(21,"div",15),r.Rb(22,"label",16),r.Ic(23,"Date From"),r.Qb(),r.Rb(24,"div",21),r.Gc(25,M,2,7,"ng-template",null,22,r.Hc),r.Mb(27,"input",23),r.Rb(28,"div",24),r.Rb(29,"button",25),r.Mb(30,"i",26),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(31,"div",27),r.Rb(32,"div",15),r.Rb(33,"label",16),r.Ic(34,"Date To"),r.Qb(),r.Rb(35,"div",21),r.Gc(36,k,2,7,"ng-template",null,28,r.Hc),r.Mb(38,"input",29),r.Rb(39,"div",24),r.Rb(40,"button",25),r.Mb(41,"i",26),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(42,"div",7),r.Rb(43,"div",13),r.Rb(44,"div",15),r.Rb(45,"label",16),r.Ic(46,"Reason"),r.Qb(),r.Mb(47,"input",30),r.Gc(48,F,2,0,"p",18),r.Qb(),r.Qb(),r.Rb(49,"div",19),r.Rb(50,"div",7),r.Rb(51,"div",31),r.Rb(52,"div",15),r.Rb(53,"label",16),r.Ic(54,"With Break"),r.Qb(),r.Rb(55,"div",32),r.Rb(56,"input",33),r.bc("change",function(){return r.xc(i),r.dc().setBreak()}),r.Qb(),r.Mb(57,"label",34),r.Qb(),r.Qb(),r.Qb(),r.Rb(58,"div",13),r.Rb(59,"div",15),r.Rb(60,"label",16),r.Ic(61,"Break From"),r.Qb(),r.Rb(62,"div",21),r.Gc(63,w,2,7,"ng-template",null,35,r.Hc),r.Mb(65,"input",36),r.Rb(66,"div",24),r.Rb(67,"button",25),r.Mb(68,"i",26),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(69,"div",37),r.Rb(70,"div",15),r.Rb(71,"label",16),r.Ic(72,"Break To"),r.Qb(),r.Rb(73,"div",21),r.Gc(74,S,2,7,"ng-template",null,38,r.Hc),r.Mb(76,"input",39),r.Rb(77,"div",24),r.Rb(78,"button",25),r.Mb(79,"i",26),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Mb(80,"hr"),r.Rb(81,"div",7),r.Rb(82,"div",20),r.Rb(83,"div",15),r.Rb(84,"input",40,41),r.bc("change",function(e){return r.xc(i),r.dc().uploadFile(e)}),r.Qb(),r.Rb(86,"div",42),r.bc("click",function(e){return r.xc(i),r.dc().openFileBrowser(e)}),r.Mb(87,"input",43),r.Rb(88,"span",44),r.Rb(89,"button",45),r.Ic(90,"Upload"),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(91,"div",20),r.Rb(92,"div",46),r.Rb(93,"div",47),r.Gc(94,T,9,5,"div",48),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Gc(95,L,5,2,"div",49),r.Qb(),r.Qb(),r.Qb(),r.Qb()}if(2&e){var a=r.vc(26),n=r.vc(37),o=r.vc(64),c=r.vc(75),s=r.dc();r.yb(1),r.jc("ngIf",!s.isDashboard),r.yb(4),r.jc("formGroup",s.overtimeForm),r.yb(11),r.jc("items",s.otList),r.yb(1),r.jc("ngIf",s.errOTType),r.yb(10),r.jc("popover",a)("outsideClick",!0),r.yb(11),r.jc("popover",n)("outsideClick",!0),r.yb(10),r.jc("ngIf",s.errReason),r.yb(17),r.jc("popover",o)("outsideClick",!0),r.yb(11),r.jc("popover",c)("outsideClick",!0),r.yb(18),r.jc("ngForOf",s.documents),r.yb(1),r.jc("ngIf",!s.isView)}}function j(e,t){1&e&&(r.Rb(0,"p",56),r.Ic(1,"Reason is needed!"),r.Qb())}function P(e,t){if(1&e){var i=r.Sb();r.Rb(0,"div",73),r.Rb(1,"h5",74),r.Ic(2,"Cancellation"),r.Qb(),r.Rb(3,"button",75),r.bc("click",function(){return t.$implicit.close("by: close icon")}),r.Rb(4,"span",76),r.Ic(5,"\xd7"),r.Qb(),r.Qb(),r.Qb(),r.Rb(6,"div",77),r.Rb(7,"div",7),r.Rb(8,"div",14),r.Rb(9,"div",15),r.Rb(10,"label",16),r.Ic(11,"Reason"),r.Qb(),r.Rb(12,"textarea",78),r.bc("ngModelChange",function(e){return r.xc(i),r.dc().remarks=e}),r.Qb(),r.Gc(13,j,2,0,"p",18),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(14,"div",79),r.Rb(15,"button",80),r.bc("click",function(){return t.$implicit.close("by: close button")}),r.Ic(16,"Close"),r.Qb(),r.Rb(17,"button",81),r.bc("click",function(){return r.xc(i),r.dc().cancelTransaction()}),r.Ic(18,"Cancel"),r.Qb(),r.Qb()}if(2&e){var a=r.dc();r.yb(12),r.jc("ngModel",a.remarks),r.yb(1),r.jc("ngIf",a.errCancelReason)}}var B=function(){var t=function(){function t(i,a,n,c,s,l){e(this,t),this.fb=i,this.tenantMasterService=a,this.route=n,this.filingManagementService=c,this.fileManagerService=s,this.modalService=l,this.uri=d.a.exportFile,this.isLoading=!0,this.isView=!1,this.isCancel=!1,this.isSubmit=!1,this.errCancelReason=!1,this.dateToday={day:new Date(new Date).getDate(),month:new Date(new Date).getMonth()+1,year:new Date(new Date).getFullYear()},this.pipe=new o.e("en-US"),this.otList=[],this.transactionID="",this.remarks="",this.documents=[],this.isSuccess=new r.n,this.fileType=0,this.isDashboard=!1}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.id=this.route.snapshot.paramMap.get("id"),this.overtimeForm=this.fb.group({dateFrom:this.pipe.transform(this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day+" 00:00","MM/dd/yyyy hh:mm a"),dateTo:this.pipe.transform(this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day+" 00:00","MM/dd/yyyy hh:mm a"),dateBreakFrom:{value:this.pipe.transform(this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day+" 00:00","MM/dd/yyyy hh:mm a"),disabled:!0},dateBreakTo:{value:this.pipe.transform(this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day+" 00:00","MM/dd/yyyy hh:mm a"),disabled:!0},selectedOTType:null,reason:"",allowBreak:!1,overtime_code:""}),void 0!==this.parentDetail&&(this.isDashboard=!0,this.isView=this.parentDetail.view,0!==this.parentDetail.dashboardId?this.id=this.parentDetail.dashboardId:(this.id="",this.overtimeForm.get("dateFrom").setValue(this.pipe.transform(this.parentDetail.dashboardDate+" 00:00","MM/dd/yyyy hh:mm a")),this.overtimeForm.get("dateTo").setValue(this.pipe.transform(this.parentDetail.dashboardDate+" 00:00","MM/dd/yyyy hh:mm a")))),this.tenantMasterService.dropdownList("52,").subscribe(function(t){e.otList=t,e.resetError(!1),""!==e.id?(e.isCancel=!0,e.isSubmit=!0,e.filingManagementService.overtimeView(e.id,e.fileType).subscribe(function(t){e.transactionID=t[0].overtime_id,e.overtimeForm.setValue({overtime_code:t[0].overtime_code,allowBreak:t[0].with_break,reason:t[0].description,selectedOTType:t[0].overtime_type_id,dateBreakFrom:e.pipe.transform(t[0].break_in,"MM/dd/yyyy hh:mm a"),dateBreakTo:e.pipe.transform(t[0].break_out,"MM/dd/yyyy hh:mm a"),dateFrom:e.pipe.transform(t[0].date_from,"MM/dd/yyyy hh:mm a"),dateTo:e.pipe.transform(t[0].date_to,"MM/dd/yyyy hh:mm a")}),e.fileManagerService.viewFile(36,e.id,e.fileType).subscribe(function(i){for(var a=0;a<i.length;a++)e.documents.push({created_by:i[a].created_by,date_created:i[a].date_created,file_name:i[a].file_name,file_path:i[a].file_path,file_type:i[a].file_type,file_class:i[a].file_class,module_id:i[a].module_id,transaction_id:i[a].transaction_id,url:e.uri+i[a].file_path});t[0].active||(e.isView=!0),e.isLoading=!1},function(e){console.log(e.error)})},function(e){console.log(e.error)})):(e.id="0",e.isLoading=!1,e.isCancel=!1,e.isSubmit=!0)},function(e){console.log(e.error)})}},{key:"setBreak",value:function(){this.overtimeForm.get("allowBreak").value?(this.overtimeForm.get("dateBreakFrom").enable(),this.overtimeForm.get("dateBreakTo").enable()):(this.overtimeForm.get("dateBreakFrom").disable(),this.overtimeForm.get("dateBreakTo").disable())}},{key:"setDateFrom",value:function(){var e,t;e=this.pipe.transform(null==this.dfPopDate?this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day:this.dfPopDate.year+"/"+this.dfPopDate.month+"/"+this.dfPopDate.day,"MM/dd/yyyy"),t=null===this.pipe.transform(this.dfPopTime,"hh:mm a")||void 0===this.pipe.transform(this.dfPopTime,"hh:mm a")?this.pipe.transform(this.pipe.transform(this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day+" 00:00","MM/dd/yyyy hh:mm a"),"hh:mm a"):this.pipe.transform(this.dfPopTime,"hh:mm a"),this.overtimeForm.get("dateFrom").setValue(e+" "+t)}},{key:"setDateTo",value:function(){var e,t;e=this.pipe.transform(null==this.dtPopDate?this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day:this.dtPopDate.year+"/"+this.dtPopDate.month+"/"+this.dtPopDate.day,"MM/dd/yyyy"),t=null===this.pipe.transform(this.dtPopTime,"hh:mm a")||void 0===this.pipe.transform(this.dtPopTime,"hh:mm a")?this.pipe.transform(this.pipe.transform(this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day+" 00:00","MM/dd/yyyy hh:mm a"),"hh:mm a"):this.pipe.transform(this.dtPopTime,"hh:mm a"),this.overtimeForm.get("dateTo").setValue(e+" "+t)}},{key:"setBreakDateFrom",value:function(){var e,t;e=this.pipe.transform(null==this.bdfPopDate?this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day:this.bdfPopDate.year+"/"+this.bdfPopDate.month+"/"+this.bdfPopDate.day,"MM/dd/yyyy"),t=null===this.pipe.transform(this.bdfPopTime,"hh:mm a")||void 0===this.pipe.transform(this.bdfPopTime,"hh:mm a")?this.pipe.transform(this.pipe.transform(this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day+" 00:00","MM/dd/yyyy hh:mm a"),"hh:mm a"):this.pipe.transform(this.bdfPopTime,"hh:mm a"),this.overtimeForm.get("dateBreakFrom").setValue(e+" "+t)}},{key:"setBreakDateTo",value:function(){var e,t;e=this.pipe.transform(null==this.bdtPopDate?this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day:this.bdtPopDate.year+"/"+this.bdtPopDate.month+"/"+this.bdtPopDate.day,"MM/dd/yyyy"),t=null===this.pipe.transform(this.bdtPopTime,"hh:mm a")||void 0===this.pipe.transform(this.bdtPopTime,"hh:mm a")?this.pipe.transform(this.pipe.transform(this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day+" 00:00","MM/dd/yyyy hh:mm a"),"hh:mm a"):this.pipe.transform(this.bdtPopTime,"hh:mm a"),this.overtimeForm.get("dateBreakTo").setValue(e+" "+t)}},{key:"openFileBrowser",value:function(e){e.preventDefault(),document.querySelector("#fileUploadInputExample").click(),e.target.files&&e.target.files&&((new FileReader).readAsDataURL(e.target.files),this.fileList=e.target.files)}},{key:"uploadFile",value:function(e){if(e.target.files.length){for(var t=document.querySelector("#fileUploadInputExample + .input-group .file-upload-info"),i="",a=0;a<e.target.files.length;a++)i+=e.target.files[a].name+" ";t.setAttribute("value",i),this.fileList=e.target.files}}},{key:"deleteDocument",value:function(e){this.documents.splice(e,1)}},{key:"validation",value:function(){this.resetError(!1);var e=!0;return""!==this.overtimeForm.get("selectedOTType").value&&null!==this.overtimeForm.get("selectedOTType").value||(e=!1,this.errOTType=!0),""!==this.overtimeForm.get("reason").value&&null!==this.overtimeForm.get("reason").value||(e=!1,this.errReason=!0),e}},{key:"resetError",value:function(e){this.errOTType=e,this.errReason=e}},{key:"submit",value:function(){var e=this;this.validation()&&s.a.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showLoaderOnConfirm:!0}).then(function(t){t.isConfirmed&&s.a.fire({title:"Please Wait !",allowOutsideClick:!1,onBeforeOpen:function(){s.a.showLoading();var t={overtime_id:e.id,overtime_code:e.overtimeForm.get("overtime_code").value,overtime_type_id:e.overtimeForm.get("selectedOTType").value,date_from:e.overtimeForm.get("dateFrom").value,date_to:e.overtimeForm.get("dateTo").value,with_break:e.overtimeForm.get("allowBreak").value,break_in:e.overtimeForm.get("dateBreakFrom").value,break_out:e.overtimeForm.get("dateBreakTo").value,description:e.overtimeForm.get("reason").value,created_by:sessionStorage.getItem("u"),active:!0,approval_level_id:sessionStorage.getItem("apl"),series_code:sessionStorage.getItem("sc"),category_id:sessionStorage.getItem("cat")};e.filingManagementService.overtimeIU(t).subscribe(function(t){if(0===t.id)s.a.fire("Failed!",t.description,"error");else{for(var i=[],a=0;a<e.documents.length;a++)i.push({created_by:sessionStorage.getItem("u"),series_code:sessionStorage.getItem("sc"),file_name:e.documents[a].file_name,file_path:e.documents[a].file_path,file_type:e.documents[a].file_type,module_id:e.documents[a].module_id,transaction_id:t.id});e.fileManagerService.updateFile(i).subscribe(function(i){if(void 0!==e.fileList){var a=e.fileList,n=new FormData;Array.from(a).map(function(e,t){return n.append("formfile",e,e.name)}),e.fileManagerService.uploadFile(n,t.code,36,t.id).subscribe(function(i){0===i?s.a.fire("Failed!","File Upload Failed","error"):(s.a.fire("Ok!",t.description,"success"),e.isDashboard&&e.isSuccess.emit(t))},function(e){console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}else s.a.fire("Ok!",t.description,"success"),e.isDashboard&&e.isSuccess.emit(t)},function(e){console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}},function(e){console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}})})}},{key:"cancel",value:function(){this.modalService.open(this.viewModal,{size:"sm"})}},{key:"cancelTransaction",value:function(){var e=this;s.a.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showLoaderOnConfirm:!0}).then(function(t){t.isConfirmed&&s.a.fire({title:"Please Wait !",allowOutsideClick:!1,onBeforeOpen:function(){s.a.showLoading();var t={module_id:36,transaction_id:e.transactionID+",",remarks:e.remarks,created_by:sessionStorage.getItem("u"),series_code:sessionStorage.getItem("sc")};e.filingManagementService.cancel(t).subscribe(function(t){0===t?s.a.fire("Failed!","Transaction failed!","error"):(s.a.fire("Ok!","Transaction successful!","success"),e.modalService.dismissAll(),e.isView=!0)},function(e){console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}})})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(r.Lb(l.c),r.Lb(b.a),r.Lb(u.a),r.Lb(f.a),r.Lb(p.a),r.Lb(h.j))},t.\u0275cmp=r.Fb({type:t,selectors:[["app-overtime-detail"]],viewQuery:function(e,t){var i;(1&e&&r.Nc(R,!0),2&e)&&(r.uc(i=r.cc())&&(t.viewModal=i.first))},inputs:{parentDetail:"parentDetail",fileType:"fileType"},outputs:{isSuccess:"isSuccess"},decls:4,vars:2,consts:[["class","spinner-wrapper",4,"ngIf"],["class","animate__animated animate__fadeInUp",4,"ngIf"],["cancelModal",""],[1,"spinner-wrapper"],[1,"spinner"],[1,"animate__animated","animate__fadeInUp"],["class","page-breadcrumb",4,"ngIf"],[1,"row"],[1,"col-md-12","grid-margin"],[1,"card"],[3,"formGroup"],[1,"card-body"],[1,"card-title"],[1,"col-md-5"],[1,"col-md-12"],[1,"form-group"],[1,"control-label"],["bindLabel","description","bindValue","id","placeholder","Select OT Type","formControlName","selectedOTType",3,"items"],["class","text-danger mt-1",4,"ngIf"],[1,"col-md-7"],[1,"col-md-6"],[1,"input-group"],["popDateFrom",""],["formControlName","dateFrom","name","dp",1,"form-control",3,"popover","outsideClick"],[1,"input-group-prepend"],["type","button",1,"btn","btn-outline-light","btn-icon","calendar"],["data-feather","calendar","appFeatherIcon","",1,"text-secondary"],[1,"col-sm-6"],["popDateTo",""],["formControlName","dateTo","name","dp",1,"form-control",3,"popover","outsideClick"],["type","text","formControlName","reason","placeholder","Reason",1,"form-control"],[1,"col-md-2"],[1,"custom-control","custom-switch"],["type","checkbox","formControlName","allowBreak","id","customSwitch1",1,"custom-control-input",3,"change"],["for","customSwitch1",1,"custom-control-label"],["popBreakDateFrom",""],["formControlName","dateBreakFrom","name","dp",1,"form-control",3,"popover","outsideClick"],[1,"col-sm-5"],["popBreakDateTo",""],["formControlName","dateBreakTo","name","dp",1,"form-control",3,"popover","outsideClick"],["multiple","","placeholder","Choose file","type","file","id","fileUploadInputExample",1,"file-upload-default",3,"change"],["file",""],[1,"input-group","col-xs-12",3,"click"],["type","text","disabled","","placeholder","Upload Files",1,"form-control","file-upload-info"],[1,"input-group-append"],["type","button",1,"file-upload-browse","btn","btn-primary"],[1,"container"],[1,"row","icons-list"],["class","col-sm-6",4,"ngFor","ngForOf"],["class","card-footer",4,"ngIf"],[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["routerLink","/layout/filing/overtime-view"],["aria-current","page",1,"breadcrumb-item","active"],[1,"text-danger","mt-1"],[3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","showMeridian","ngModelChange"],[1,"w-100"],[1,"d-flex","justify-content-between"],[1,"text-body","mb-2"],["target","_blank",3,"href"],[1,"text-muted","tx-12"],[1,"mdi","mdi-close",3,"click"],[1,"card-footer"],[1,"nav","justify-content-end"],["class","btn btn-warning btn-icon-text",3,"click",4,"ngIf"],["class","btn btn-primary btn-icon-text",3,"click",4,"ngIf"],[1,"btn","btn-warning","btn-icon-text",3,"click"],["data-feather","rotate-cw","appFeatherIcon","",1,"btn-icon-prepend"],[1,"btn","btn-primary","btn-icon-text",3,"click"],["data-feather","save","appFeatherIcon","",1,"btn-icon-prepend"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["type","text","rows","3","placeholder","Reason",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-warning",3,"click"]],template:function(e,t){1&e&&(r.Gc(0,Q,3,0,"div",0),r.Gc(1,O,96,15,"div",1),r.Gc(2,P,19,2,"ng-template",null,2,r.Hc)),2&e&&(r.jc("ngIf",t.isLoading),r.yb(1),r.jc("ngIf",!t.isLoading))},directives:[o.n,l.s,l.j,l.e,m.a,l.i,l.d,l.b,g.a,v.a,l.a,o.m,u.f,h.c,l.l,y.a],styles:[""]}),t}()},mEZC:function(t,a,n){"use strict";n.d(a,"a",function(){return A});var o=n("fXoL"),r=n("ofXK"),c=n("PSD3"),s=n.n(c),d=n("AytR"),l=n("3Pt+"),b=n("tyNb"),u=n("xNm2"),f=n("MR3p"),p=n("1kSV"),h=n("J1nh"),m=n("IYwT"),g=n("EDFS"),v=n("kUHs"),y=["attendanceModal"],R=["cancelModal"];function Q(e,t){1&e&&(o.Rb(0,"div",2),o.Rb(1,"div",3),o.Ic(2,"Loading..."),o.Qb(),o.Qb())}function I(e,t){1&e&&(o.Rb(0,"nav",47),o.Rb(1,"ol",48),o.Rb(2,"li",49),o.Rb(3,"a",50),o.Ic(4,"Filing"),o.Qb(),o.Qb(),o.Rb(5,"li",49),o.Rb(6,"a",51),o.Ic(7,"Change Log"),o.Qb(),o.Qb(),o.Rb(8,"li",52),o.Ic(9,"Detail"),o.Qb(),o.Qb(),o.Qb())}function _(e,t){1&e&&(o.Rb(0,"p",53),o.Ic(1,"Reason is needed!"),o.Qb())}function D(e,t){1&e&&(o.Rb(0,"button",54),o.Mb(1,"span",55),o.Ic(2," Loading... "),o.Qb())}function M(e,t){if(1&e){var i=o.Sb();o.Rb(0,"button",56),o.bc("click",function(){return o.xc(i),o.dc(2).search()}),o.Mb(1,"i",57),o.Ic(2," Search "),o.Qb()}}function k(e,t){if(1&e){var i=o.Sb();o.Rb(0,"div",58),o.Rb(1,"div",59),o.Rb(2,"div",60),o.Rb(3,"h6",61),o.Rb(4,"a",62),o.Mb(5,"i"),o.Ic(6),o.Qb(),o.Qb(),o.Rb(7,"p",63),o.Rb(8,"i",64),o.bc("click",function(){o.xc(i);var e=t.index;return o.dc(2).deleteDocument(e)}),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb()}if(2&e){var a=t.$implicit;o.yb(4),o.kc("href",a.url,o.zc),o.yb(1),o.Ab(a.file_class),o.yb(1),o.Jc(a.file_name)}}function F(e,t){1&e&&(o.Rb(0,"p",53),o.Ic(1,"No attendance to be saved!"),o.Qb())}function w(e,t){if(1&e){var i=o.Sb();o.Rb(0,"tr"),o.Rb(1,"td"),o.Ic(2),o.ec(3,"date"),o.Qb(),o.Rb(4,"td"),o.Ic(5),o.Qb(),o.Rb(6,"td"),o.Ic(7),o.Qb(),o.Rb(8,"td"),o.Ic(9),o.Qb(),o.Rb(10,"td"),o.Ic(11),o.Qb(),o.Rb(12,"td"),o.Ic(13),o.Qb(),o.Rb(14,"td"),o.Rb(15,"button",65),o.bc("click",function(){o.xc(i);var e=t.index;return o.dc(2).editAttendance(e)}),o.Mb(16,"i",66),o.Qb(),o.Qb(),o.Qb()}if(2&e){var a=t.$implicit;o.yb(2),o.Jc(o.gc(3,6,a.date,"MM/dd/yyyy")),o.yb(3),o.Jc(a.sked_time_in),o.yb(2),o.Jc(a.sked_time_out),o.yb(2),o.Jc(a.time_in),o.yb(2),o.Jc(a.time_out),o.yb(2),o.Jc(a.remarks)}}function S(e,t){if(1&e){var i=o.Sb();o.Rb(0,"button",71),o.bc("click",function(){return o.xc(i),o.dc(3).cancel()}),o.Mb(1,"i",72),o.Ic(2," Cancel "),o.Qb()}}function T(e,t){if(1&e){var i=o.Sb();o.Rb(0,"button",73),o.bc("click",function(){return o.xc(i),o.dc(3).submit()}),o.Mb(1,"i",74),o.Ic(2," Save Changes "),o.Qb()}}function x(e,t){if(1&e&&(o.Rb(0,"div",67),o.Rb(1,"ul",68),o.Gc(2,S,3,0,"button",69),o.Ic(3," \xa0 "),o.Gc(4,T,3,0,"button",70),o.Qb(),o.Qb()),2&e){var i=o.dc(2);o.yb(2),o.jc("ngIf",i.isCancel),o.yb(2),o.jc("ngIf",i.isSubmit)}}var C=function(){return{standalone:!0}};function L(e,t){if(1&e){var i=o.Sb();o.Rb(0,"ngb-datepicker",91),o.bc("ngModelChange",function(e){return o.xc(i),o.dc(3).dfPopDate=e})("ngModelChange",function(){return o.xc(i),o.dc(3).setDateFrom()}),o.Qb(),o.Rb(1,"timepicker",92),o.bc("ngModelChange",function(e){return o.xc(i),o.dc(3).dfPopTime=e})("ngModelChange",function(){return o.xc(i),o.dc(3).setDateFrom()}),o.Qb()}if(2&e){var a=o.dc(3);o.jc("ngModel",a.dfPopDate)("ngModelOptions",o.mc(5,C)),o.yb(1),o.jc("ngModel",a.dfPopTime)("ngModelOptions",o.mc(6,C))("showMeridian",!0)}}function O(e,t){if(1&e){var i=o.Sb();o.Rb(0,"ngb-datepicker",91),o.bc("ngModelChange",function(e){return o.xc(i),o.dc(3).dtPopDate=e})("ngModelChange",function(){return o.xc(i),o.dc(3).setDateTo()}),o.Qb(),o.Rb(1,"timepicker",92),o.bc("ngModelChange",function(e){return o.xc(i),o.dc(3).dtPopTime=e})("ngModelChange",function(){return o.xc(i),o.dc(3).setDateTo()}),o.Qb()}if(2&e){var a=o.dc(3);o.jc("ngModel",a.dtPopDate)("ngModelOptions",o.mc(5,C)),o.yb(1),o.jc("ngModel",a.dtPopTime)("ngModelOptions",o.mc(6,C))("showMeridian",!0)}}function j(e,t){if(1&e){var i=o.Sb();o.Rb(0,"div",75),o.Rb(1,"h5",76),o.Ic(2,"Attendance Detail"),o.Qb(),o.Rb(3,"button",77),o.bc("click",function(){return t.$implicit.close("by: close icon")}),o.Rb(4,"span",78),o.Ic(5,"\xd7"),o.Qb(),o.Qb(),o.Qb(),o.Rb(6,"div",79),o.Rb(7,"form",6),o.Rb(8,"div",7),o.Rb(9,"div",31),o.Rb(10,"div",13),o.Rb(11,"label",14),o.Ic(12,"Schedule In"),o.Qb(),o.Mb(13,"input",80),o.Qb(),o.Qb(),o.Rb(14,"div",31),o.Rb(15,"div",13),o.Rb(16,"label",14),o.Ic(17,"Schedule Out"),o.Qb(),o.Mb(18,"input",81),o.Qb(),o.Qb(),o.Qb(),o.Rb(19,"div",7),o.Rb(20,"div",31),o.Rb(21,"div",13),o.Rb(22,"label",14),o.Ic(23,"Time In"),o.Qb(),o.Rb(24,"div",18),o.Gc(25,L,2,7,"ng-template",null,82,o.Hc),o.Mb(27,"input",83),o.Rb(28,"div",84),o.Rb(29,"button",85),o.Mb(30,"i",23),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(31,"div",31),o.Rb(32,"div",13),o.Rb(33,"label",14),o.Ic(34,"Time Out"),o.Qb(),o.Rb(35,"div",18),o.Gc(36,O,2,7,"ng-template",null,86,o.Hc),o.Mb(38,"input",87),o.Rb(39,"div",84),o.Rb(40,"button",85),o.Mb(41,"i",23),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(42,"div",88),o.Rb(43,"button",89),o.bc("click",function(){return t.$implicit.close("by: close button")}),o.Ic(44,"Close"),o.Qb(),o.Rb(45,"button",90),o.bc("click",function(){return o.xc(i),o.dc(2).updateAttendance()}),o.Ic(46,"Save changes"),o.Qb(),o.Qb()}if(2&e){var a=o.vc(26),n=o.vc(37),r=o.dc(2);o.yb(7),o.jc("formGroup",r.attendanceForm),o.yb(20),o.jc("popover",a)("outsideClick",!0),o.yb(11),o.jc("popover",n)("outsideClick",!0)}}function P(e,t){1&e&&(o.Rb(0,"p",53),o.Ic(1,"Reason is needed!"),o.Qb())}function B(e,t){if(1&e){var i=o.Sb();o.Rb(0,"div",75),o.Rb(1,"h5",76),o.Ic(2,"Cancellation"),o.Qb(),o.Rb(3,"button",77),o.bc("click",function(){return t.$implicit.close("by: close icon")}),o.Rb(4,"span",78),o.Ic(5,"\xd7"),o.Qb(),o.Qb(),o.Qb(),o.Rb(6,"div",79),o.Rb(7,"div",7),o.Rb(8,"div",40),o.Rb(9,"div",13),o.Rb(10,"label",14),o.Ic(11,"Reason"),o.Qb(),o.Rb(12,"textarea",93),o.bc("ngModelChange",function(e){return o.xc(i),o.dc(2).remarks=e}),o.Qb(),o.Gc(13,P,2,0,"p",16),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(14,"div",88),o.Rb(15,"button",89),o.bc("click",function(){return t.$implicit.close("by: close button")}),o.Ic(16,"Close"),o.Qb(),o.Rb(17,"button",94),o.bc("click",function(){return o.xc(i),o.dc(2).cancelTransaction()}),o.Ic(18,"Cancel"),o.Qb(),o.Qb()}if(2&e){var a=o.dc(2);o.yb(12),o.jc("ngModel",a.remarks),o.yb(1),o.jc("ngIf",a.errCancelReason)}}function G(e,t){if(1&e){var i=o.Sb();o.Rb(0,"div",4),o.Gc(1,I,10,0,"nav",5),o.Rb(2,"form",6),o.Rb(3,"div",7),o.Rb(4,"div",8),o.Rb(5,"div",9),o.Rb(6,"div",10),o.Rb(7,"div",11),o.Rb(8,"h6"),o.Ic(9,"Change Log"),o.Qb(),o.Qb(),o.Rb(10,"div",7),o.Rb(11,"div",12),o.Rb(12,"div",13),o.Rb(13,"label",14),o.Ic(14,"Reason"),o.Qb(),o.Mb(15,"input",15),o.Gc(16,_,2,0,"p",16),o.Qb(),o.Qb(),o.Rb(17,"div",17),o.Rb(18,"div",13),o.Rb(19,"label",14),o.Ic(20,"Date From"),o.Qb(),o.Rb(21,"div",18),o.Rb(22,"input",19,20),o.bc("click",function(){return o.xc(i),o.vc(23).toggle()}),o.Qb(),o.Rb(24,"div",21),o.Rb(25,"button",22),o.bc("click",function(){return o.xc(i),o.vc(23).toggle()}),o.Mb(26,"i",23),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(27,"div",24),o.Rb(28,"div",13),o.Rb(29,"label",14),o.Ic(30,"Date To"),o.Qb(),o.Rb(31,"div",7),o.Rb(32,"div",25),o.Rb(33,"div",18),o.Rb(34,"input",26,27),o.bc("click",function(){return o.xc(i),o.vc(35).toggle()}),o.Qb(),o.Rb(36,"div",21),o.Rb(37,"button",22),o.bc("click",function(){return o.xc(i),o.vc(35).toggle()}),o.Mb(38,"i",23),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(39,"div",24),o.Rb(40,"div",28),o.Gc(41,D,3,0,"button",29),o.Gc(42,M,3,0,"button",30),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(43,"div",7),o.Rb(44,"div",31),o.Rb(45,"div",13),o.Rb(46,"input",32,33),o.bc("change",function(e){return o.xc(i),o.dc().uploadFile(e)}),o.Qb(),o.Rb(48,"div",34),o.bc("click",function(e){return o.xc(i),o.dc().openFileBrowser(e)}),o.Mb(49,"input",35),o.Rb(50,"span",21),o.Rb(51,"button",36),o.Ic(52,"Upload"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(53,"div",31),o.Rb(54,"div",37),o.Rb(55,"div",38),o.Gc(56,k,9,5,"div",39),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Mb(57,"hr"),o.Rb(58,"div",7),o.Rb(59,"div",40),o.Gc(60,F,2,0,"p",16),o.Rb(61,"div",41),o.Rb(62,"table",42),o.Rb(63,"thead"),o.Rb(64,"tr"),o.Rb(65,"th"),o.Ic(66,"Date"),o.Qb(),o.Rb(67,"th"),o.Ic(68,"Schedule In"),o.Qb(),o.Rb(69,"th"),o.Ic(70,"Schedule Out"),o.Qb(),o.Rb(71,"th"),o.Ic(72,"Time In"),o.Qb(),o.Rb(73,"th"),o.Ic(74,"Time Out"),o.Qb(),o.Rb(75,"th"),o.Ic(76,"Remarks"),o.Qb(),o.Rb(77,"th"),o.Ic(78,"Action"),o.Qb(),o.Qb(),o.Qb(),o.Rb(79,"tbody"),o.Gc(80,w,17,9,"tr",43),o.Qb(),o.Mb(81,"tfoot"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Gc(82,x,5,2,"div",44),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Gc(83,j,47,5,"ng-template",null,45,o.Hc),o.Gc(85,B,19,2,"ng-template",null,46,o.Hc),o.Qb()}if(2&e){var a=o.dc();o.yb(1),o.jc("ngIf",!a.isDashboard),o.yb(1),o.jc("formGroup",a.changeLogForm),o.yb(14),o.jc("ngIf",a.errReason),o.yb(25),o.jc("ngIf",a.isSearch),o.yb(1),o.jc("ngIf",!a.isSearch),o.yb(14),o.jc("ngForOf",a.documents),o.yb(4),o.jc("ngIf",a.errAttendance),o.yb(20),o.jc("ngForOf",a.attendanceList),o.yb(2),o.jc("ngIf",!a.isView)}}var A=function(){var t=function(){function t(i,a,n,c,s,l){e(this,t),this.fb=i,this.route=a,this.filingManagementService=n,this.fileManagerService=c,this.modalService=s,this.attendanceManagementService=l,this.uri=d.a.exportFile,this.isLoading=!0,this.isSearch=!1,this.errReason=!1,this.errAttendance=!1,this.errCancelReason=!1,this.isView=!1,this.isCancel=!1,this.isSubmit=!1,this.documents=[],this.fileList=[],this.attendanceList=[],this.dateToday={day:new Date(new Date).getDate(),month:new Date(new Date).getMonth()+1,year:new Date(new Date).getFullYear()},this.pipe=new r.e("en-US"),this.isSuccess=new o.n,this.fileType=0,this.isDashboard=!1,this.transactionID="",this.remarks=""}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.id=this.route.snapshot.paramMap.get("id"),this.changeLogForm=this.fb.group({reason:"",changeLogCode:"",dateFrom:this.dateToday,dateTo:this.dateToday}),void 0!==this.parentDetail&&(this.isDashboard=!0,this.isView=this.parentDetail.view,0!==this.parentDetail.dashboardId?this.id=this.parentDetail.dashboardId:(this.id="",this.changeLogForm.get("dateFrom").setValue({year:new Date(this.parentDetail.dashboardDate).getFullYear(),month:new Date(this.parentDetail.dashboardDate).getMonth()+1,day:new Date(this.parentDetail.dashboardDate).getDate()}),this.changeLogForm.get("dateTo").setValue({year:new Date(this.parentDetail.dashboardDate).getFullYear(),month:new Date(this.parentDetail.dashboardDate).getMonth()+1,day:new Date(this.parentDetail.dashboardDate).getDate()}))),this.attendanceForm=this.fb.group({index:0,scheduleIn:"",scheduleOut:"",timeIn:"",timeOut:""}),""!==this.id?(this.isCancel=!0,this.isSubmit=!0,this.filingManagementService.changeLogView(this.id,this.fileType).subscribe(function(t){e.transactionID=t[0].change_log_id,e.changeLogForm.setValue({reason:t[0].reason,changeLogCode:t[0].change_log_code,dateFrom:{year:new Date(t[0].date_from).getFullYear(),month:new Date(t[0].date_from).getMonth()+1,day:new Date(t[0].date_from).getDate()},dateTo:{year:new Date(t[0].date_to).getFullYear(),month:new Date(t[0].date_to).getMonth()+1,day:new Date(t[0].date_to).getDate()}}),e.filingManagementService.changeLogDetailView(e.id,e.fileType).subscribe(function(i){e.attendanceList=i,e.fileManagerService.viewFile(33,e.id,e.fileType).subscribe(function(i){for(var a=0;a<i.length;a++)e.documents.push({created_by:i[a].created_by,date_created:i[a].date_created,file_name:i[a].file_name,file_path:i[a].file_path,file_type:i[a].file_type,file_class:i[a].file_class,module_id:i[a].module_id,transaction_id:i[a].transaction_id,url:e.uri+i[a].file_path});t[0].active||(e.isView=!0),e.isLoading=!1},function(e){console.log(e.error)})},function(e){console.log(e.error)})},function(e){console.log(e.error)})):(this.id="0",this.isLoading=!1,this.isCancel=!1,this.isSubmit=!0)}},{key:"ngAfterViewInit",value:function(){}},{key:"search",value:function(){var e=this;this.resetError(!1),this.isSearch=!0;var t=this.pipe.transform(this.changeLogForm.get("dateFrom").value.year+"/"+this.changeLogForm.get("dateFrom").value.month+"/"+this.changeLogForm.get("dateFrom").value.day,"MM/dd/yyyy"),i=this.pipe.transform(this.changeLogForm.get("dateTo").value.year+"/"+this.changeLogForm.get("dateTo").value.month+"/"+this.changeLogForm.get("dateTo").value.day,"MM/dd/yyyy");this.attendanceManagementService.changeLogAttendanceView(t,i).subscribe(function(t){e.attendanceList=t,e.isSearch=!1},function(t){console.log(t.error),e.isSearch=!1})}},{key:"editAttendance",value:function(e){this.modalRef=this.modalService.open(this.attendanceModal,{size:"xs"}),this.attendanceForm.setValue({index:e,scheduleIn:this.attendanceList[e].sked_time_in,scheduleOut:this.attendanceList[e].sked_time_out,timeIn:""===this.attendanceList[e].time_in?this.attendanceList[e].sked_time_in:this.attendanceList[e].time_in,timeOut:""===this.attendanceList[e].time_out?this.attendanceList[e].sked_time_out:this.attendanceList[e].time_out})}},{key:"updateAttendance",value:function(){var e=this.attendanceForm.get("index").value;this.attendanceList[e].time_in=this.attendanceForm.get("timeIn").value,this.attendanceList[e].time_out=this.attendanceForm.get("timeOut").value,this.attendanceList[e].is_update=!0,this.attendanceList[e].remarks=""!==this.attendanceList[e].time_in&&""!==this.attendanceList[e].time_out?"Present":"Absent",this.modalRef.close()}},{key:"setDateFrom",value:function(){var e,t;e=this.pipe.transform(null==this.dfPopDate?this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day:this.dfPopDate.year+"/"+this.dfPopDate.month+"/"+this.dfPopDate.day,"MM/dd/yyyy"),t=null===this.pipe.transform(this.dfPopTime,"hh:mm a")||void 0===this.pipe.transform(this.dfPopTime,"hh:mm a")?this.pipe.transform(this.pipe.transform(this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day+" 00:00","MM/dd/yyyy hh:mm a"),"hh:mm a"):this.pipe.transform(this.dfPopTime,"hh:mm a"),this.attendanceForm.get("timeIn").setValue(e+" "+t)}},{key:"setDateTo",value:function(){var e,t;e=this.pipe.transform(null==this.dtPopDate?this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day:this.dtPopDate.year+"/"+this.dtPopDate.month+"/"+this.dtPopDate.day,"MM/dd/yyyy"),t=null===this.pipe.transform(this.dtPopTime,"hh:mm a")||void 0===this.pipe.transform(this.dtPopTime,"hh:mm a")?this.pipe.transform(this.pipe.transform(this.dateToday.year+"/"+this.dateToday.month+"/"+this.dateToday.day+" 00:00","MM/dd/yyyy hh:mm a"),"hh:mm a"):this.pipe.transform(this.dtPopTime,"hh:mm a"),this.attendanceForm.get("timeOut").setValue(e+" "+t)}},{key:"openFileBrowser",value:function(e){e.preventDefault(),document.querySelector("#fileUploadInputExample").click(),e.target.files&&e.target.files&&((new FileReader).readAsDataURL(e.target.files),this.fileList=e.target.files)}},{key:"uploadFile",value:function(e){if(e.target.files.length){for(var t=document.querySelector("#fileUploadInputExample + .input-group .file-upload-info"),i="",a=0;a<e.target.files.length;a++)i+=e.target.files[a].name+" ";t.setAttribute("value",i),this.fileList=e.target.files}}},{key:"deleteDocument",value:function(e){this.documents.splice(e,1)}},{key:"validation",value:function(){var e=!0;return this.resetError(!1),""!==this.changeLogForm.get("reason").value&&null!==this.changeLogForm.get("reason").value||(e=!1,this.errReason=!0),this.attendanceList.filter(function(e){return!0===e.is_update}).length<=0&&(e=!1,this.errAttendance=!0),e}},{key:"resetError",value:function(e){this.errAttendance=e,this.errReason=e}},{key:"submit",value:function(){var e=this;this.validation()&&s.a.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showLoaderOnConfirm:!0}).then(function(t){t.isConfirmed&&s.a.fire({title:"Please Wait !",allowOutsideClick:!1,onBeforeOpen:function(){s.a.showLoading();for(var t=[],i=e.attendanceList.filter(function(e){return!0===e.is_update}),a=0;a<i.length;a++)t.push({date:i[a].date,time_in:i[a].time_in,time_out:i[a].time_out,remarks:i[a].remarks});var n={change_log_id:e.id,change_log_code:e.changeLogForm.get("changeLogCode").value,reason:e.changeLogForm.get("reason").value,date_from:e.pipe.transform(e.changeLogForm.get("dateFrom").value.year+"/"+e.changeLogForm.get("dateFrom").value.month+"/"+e.changeLogForm.get("dateFrom").value.day,"MM/dd/yyyy"),date_to:e.pipe.transform(e.changeLogForm.get("dateTo").value.year+"/"+e.changeLogForm.get("dateTo").value.month+"/"+e.changeLogForm.get("dateTo").value.day,"MM/dd/yyyy"),active:!0,approval_level_id:sessionStorage.getItem("apl"),series_code:sessionStorage.getItem("sc"),category_id:sessionStorage.getItem("cat"),created_by:sessionStorage.getItem("u"),Detail:t};e.filingManagementService.changeLogIU(n).subscribe(function(t){if(0===t.id)s.a.fire("Failed!",t.description,"error");else{for(var i=[],a=0;a<e.documents.length;a++)i.push({created_by:sessionStorage.getItem("u"),series_code:sessionStorage.getItem("sc"),file_name:e.documents[a].file_name,file_path:e.documents[a].file_path,file_type:e.documents[a].file_type,module_id:e.documents[a].module_id,transaction_id:t.id});e.fileManagerService.updateFile(i).subscribe(function(i){if(void 0!==e.fileList){var a=e.fileList,n=new FormData;Array.from(a).map(function(e,t){return n.append("formfile",e,e.name)}),e.fileManagerService.uploadFile(n,t.code,33,t.id).subscribe(function(i){0===i?s.a.fire("Failed!","File Upload Failed","error"):(s.a.fire("Ok!",t.description,"success"),e.isDashboard&&e.isSuccess.emit(t))},function(e){console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}else s.a.fire("Ok!",t.description,"success"),e.isDashboard&&e.isSuccess.emit(t)},function(e){console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}},function(e){console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}})})}},{key:"cancel",value:function(){this.modalService.open(this.viewModal,{size:"sm"})}},{key:"cancelTransaction",value:function(){var e=this;s.a.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showLoaderOnConfirm:!0}).then(function(t){t.isConfirmed&&s.a.fire({title:"Please Wait !",allowOutsideClick:!1,onBeforeOpen:function(){s.a.showLoading();var t={module_id:33,transaction_id:e.transactionID+",",remarks:e.remarks,created_by:sessionStorage.getItem("u"),series_code:sessionStorage.getItem("sc")};e.filingManagementService.cancel(t).subscribe(function(t){0===t?s.a.fire("Failed!","Transaction failed!","error"):(s.a.fire("Ok!","Transaction successful!","success"),e.modalService.dismissAll(),e.isView=!0)},function(e){console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}})})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.Lb(l.c),o.Lb(b.a),o.Lb(u.a),o.Lb(f.a),o.Lb(p.j),o.Lb(h.a))},t.\u0275cmp=o.Fb({type:t,selectors:[["app-change-log-detail"]],viewQuery:function(e,t){var i;(1&e&&(o.Nc(y,!0),o.Nc(R,!0)),2&e)&&(o.uc(i=o.cc())&&(t.attendanceModal=i.first),o.uc(i=o.cc())&&(t.viewModal=i.first))},inputs:{parentDetail:"parentDetail",fileType:"fileType"},outputs:{isSuccess:"isSuccess"},decls:2,vars:2,consts:[["class","spinner-wrapper",4,"ngIf"],["class","animate__animated animate__fadeInUp",4,"ngIf"],[1,"spinner-wrapper"],[1,"spinner"],[1,"animate__animated","animate__fadeInUp"],["class","page-breadcrumb",4,"ngIf"],[3,"formGroup"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"col-sm-4"],[1,"form-group"],[1,"control-label"],["type","text","formControlName","reason","placeholder","Reason",1,"form-control"],["class","text-danger mt-1",4,"ngIf"],[1,"col-md-3"],[1,"input-group"],["placeholder","mm/dd/yyyy","name","dp","formControlName","dateFrom","ngbDatepicker","",1,"form-control",3,"click"],["df","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-light","btn-icon","calendar",3,"click"],["data-feather","calendar","appFeatherIcon","",1,"text-secondary"],[1,"col-md-5"],[1,"col-md-7"],["placeholder","mm/dd/yyyy","name","dp","formControlName","dateTo","ngbDatepicker","",1,"form-control",3,"click"],["dt","ngbDatepicker"],[1,"text-right"],["class","btn btn-primary","type","button","disabled","",4,"ngIf"],["type","button","class","btn btn-primary btn-icon-text",3,"click",4,"ngIf"],[1,"col-md-6"],["multiple","","placeholder","Choose file","type","file","id","fileUploadInputExample",1,"file-upload-default",3,"change"],["file",""],[1,"input-group","col-xs-12",3,"click"],["type","text","disabled","","placeholder","Upload Files",1,"form-control","file-upload-info"],["type","button",1,"file-upload-browse","btn","btn-primary"],[1,"container"],[1,"row","icons-list"],["class","col-sm-6",4,"ngFor","ngForOf"],[1,"col-md-12"],[1,"table-responsive"],["id","dataTableExample",1,"table"],[4,"ngFor","ngForOf"],["class","card-footer",4,"ngIf"],["attendanceModal",""],["cancelModal",""],[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["routerLink","/layout/filing/change-log-view"],["aria-current","page",1,"breadcrumb-item","active"],[1,"text-danger","mt-1"],["type","button","disabled","",1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["type","button",1,"btn","btn-primary","btn-icon-text",3,"click"],["data-feather","search","appFeatherIcon","",1,"btn-icon-prepend"],[1,"col-sm-6"],[1,"w-100"],[1,"d-flex","justify-content-between"],[1,"text-body","mb-2"],["target","_blank",3,"href"],[1,"text-muted","tx-12"],[1,"mdi","mdi-close",3,"click"],["type","button","title","Edit",1,"btn","btn-sm","btn-primary","btn-icon",3,"click"],[1,"feather","icon-edit-2"],[1,"card-footer"],[1,"nav","justify-content-end"],["class","btn btn-warning btn-icon-text",3,"click",4,"ngIf"],["class","btn btn-primary btn-icon-text",3,"click",4,"ngIf"],[1,"btn","btn-warning","btn-icon-text",3,"click"],["data-feather","rotate-cw","appFeatherIcon","",1,"btn-icon-prepend"],[1,"btn","btn-primary","btn-icon-text",3,"click"],["data-feather","save","appFeatherIcon","",1,"btn-icon-prepend"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["type","text","formControlName","scheduleIn","readonly","","placeholder","Overtime Code",1,"form-control"],["type","text","formControlName","scheduleOut","readonly","","placeholder","Balance",1,"form-control"],["popDateFrom",""],["formControlName","timeIn","name","dp",1,"form-control",3,"popover","outsideClick"],[1,"input-group-prepend"],["type","button",1,"btn","btn-outline-light","btn-icon","calendar"],["popDateTo",""],["formControlName","timeOut","name","dp",1,"form-control",3,"popover","outsideClick"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","showMeridian","ngModelChange"],["type","text","rows","3","placeholder","Reason",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-warning",3,"click"]],template:function(e,t){1&e&&(o.Gc(0,Q,3,0,"div",0),o.Gc(1,G,87,9,"div",1)),2&e&&(o.jc("ngIf",t.isLoading),o.yb(1),o.jc("ngIf",!t.isLoading))},directives:[r.n,l.s,l.j,l.e,l.b,l.i,l.d,p.i,m.a,r.m,b.f,g.a,p.c,l.l,v.a],pipes:[r.e],styles:[""]}),t}()}}])}();