!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"0Ns0":function(t,i,a){"use strict";a.r(i),a.d(i,"TimekeepingModule",function(){return Ve});var o=a("ofXK"),r=a("pFYJ"),c=a("tyNb"),d=a("njyG"),b=a("XNiG"),l=a("PSD3"),s=a.n(l),u=a("AytR"),m=a("fXoL"),p=a("1kSV"),h=a("ltvU"),g=a("3Pt+"),f=a("J1nh"),y=a("nkOh"),v=a("ZOsW"),R=a("IYwT"),Q=a("EDFS"),I=a("kUHs"),k=a("IheW");function _(e,t){if(1&e&&(m.Rb(0,"div",8),m.Rb(1,"div",9),m.Ic(2),m.Qb(),m.Qb()),2&e){var n=m.dc();m.yb(1),m.Ec("width: ",n.progress,"%;"),m.yb(1),m.Kc(" ",n.progress,"%")}}var T,D=((T=function(){function t(n,i){var a=this;e(this,t),this.http=n,this.handler=i,this.uri=u.a.uploadUrl+"DataUploadManagement/",this.progress=0,this.parentFun=new m.n,this.onUploadFinished=new m.n,this.uploadFile=function(e){e.target.files.length&&document.querySelector("#fileUploadInputExample + .input-group .file-upload-info").setAttribute("value",e.target.files[0].name);var t=e.target.files;if(0!==t.length){a.http=new k.c(a.handler);var n=t[0],i=new FormData;i.append("formfile",n,n.name),a.http.post(a.uri+"attendance_log_temp?series_code="+sessionStorage.getItem("sc")+"&created_by="+sessionStorage.getItem("u"),i,{reportProgress:!0,observe:"events"}).subscribe(function(e){e.type===k.e.UploadProgress?a.progress=Math.round(100*e.loaded/e.total):e.type===k.e.Response&&a.onUploadFinished.emit(e.body)})}}}return n(t,[{key:"ngOnInit",value:function(){this.http=new k.c(this.handler)}},{key:"openFileBrowser",value:function(e){e.preventDefault(),document.querySelector("#fileUploadInputExample").click(),e.target.files&&e.target.files[0]&&(new FileReader).readAsDataURL(e.target.files[0])}}]),t}()).\u0275fac=function(e){return new(e||T)(m.Lb(k.c),m.Lb(k.b))},T.\u0275cmp=m.Fb({type:T,selectors:[["app-file-upload"]],outputs:{parentFun:"parentFun",onUploadFinished:"onUploadFinished"},decls:9,vars:1,consts:[[1,"form-group"],["placeholder","Choose file","type","file","name","img[]","id","fileUploadInputExample",1,"file-upload-default",3,"change"],["file",""],[1,"input-group","col-xs-12",3,"click"],["type","text","disabled","","placeholder","Upload Log",1,"form-control","file-upload-info"],[1,"input-group-append"],["type","button",1,"file-upload-browse","btn","btn-primary"],["class","progress",4,"ngIf"],[1,"progress"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar"]],template:function(e,t){1&e&&(m.Rb(0,"div",0),m.Rb(1,"input",1,2),m.bc("change",function(e){return t.uploadFile(e)}),m.Qb(),m.Rb(3,"div",3),m.bc("click",function(e){return t.openFileBrowser(e)}),m.Mb(4,"input",4),m.Rb(5,"span",5),m.Rb(6,"button",6),m.Ic(7,"Upload"),m.Qb(),m.Qb(),m.Qb(),m.Gc(8,_,3,4,"div",7),m.Qb()),2&e&&(m.yb(8),m.jc("ngIf",t.progress>0))},directives:[o.n],styles:[""]}),T),M=["uploadModal"],F=["attendanceModal"];function L(e,t){1&e&&(m.Rb(0,"div",2),m.Rb(1,"div",3),m.Ic(2,"Loading..."),m.Qb(),m.Qb())}function w(e,t){1&e&&(m.Rb(0,"button",42),m.Mb(1,"span",43),m.Ic(2," Loading... "),m.Qb())}function S(e,t){if(1&e){var n=m.Sb();m.Rb(0,"button",33),m.bc("click",function(){return m.xc(n),m.dc(2).search()}),m.Mb(1,"i",44),m.Ic(2," Search "),m.Qb()}}function C(e,t){if(1&e){var n=m.Sb();m.Rb(0,"tr"),m.Rb(1,"td"),m.Ic(2),m.Qb(),m.Rb(3,"td"),m.Ic(4),m.Qb(),m.Rb(5,"td"),m.Ic(6),m.Qb(),m.Rb(7,"td"),m.Ic(8),m.Qb(),m.Rb(9,"td"),m.Rb(10,"button",45),m.bc("click",function(){m.xc(n);var e=t.index;m.dc();var i=m.vc(78);return m.dc().openLogModal(i,e)}),m.Mb(11,"i",46),m.Qb(),m.Qb(),m.Qb()}if(2&e){var i=t.$implicit;m.yb(2),m.Jc(i.employeeCode),m.yb(2),m.Jc(i.displayName),m.yb(2),m.Jc(i.logs),m.yb(2),m.Jc(i.type)}}function O(e,t){if(1&e){var n=m.Sb();m.Rb(0,"ngb-datepicker",63),m.bc("ngModelChange",function(e){return m.xc(n),m.dc(3).attendanceDate=e})("ngModelChange",function(){return m.xc(n),m.dc(3).setDateTime()}),m.Qb(),m.Rb(1,"timepicker",64),m.bc("ngModelChange",function(e){return m.xc(n),m.dc(3).attendanceTime=e})("ngModelChange",function(){return m.xc(n),m.dc(3).setDateTime()}),m.Qb()}if(2&e){var i=m.dc(3);m.jc("ngModel",i.attendanceDate),m.yb(1),m.jc("ngModel",i.attendanceTime)("showMeridian",!0)}}function x(e,t){if(1&e){var n=m.Sb();m.Rb(0,"div",47),m.Rb(1,"h5",48),m.Ic(2,"Attendance Log"),m.Qb(),m.Rb(3,"button",49),m.bc("click",function(){return t.$implicit.close("by: close icon")}),m.Rb(4,"span",50),m.Ic(5,"\xd7"),m.Qb(),m.Qb(),m.Qb(),m.Rb(6,"div",51),m.Rb(7,"div",10),m.Rb(8,"div",52),m.Rb(9,"div",17),m.Rb(10,"label",18),m.Ic(11,"Logs"),m.Qb(),m.Rb(12,"div",21),m.Gc(13,O,2,3,"ng-template",null,53,m.Hc),m.Rb(15,"input",54),m.bc("ngModelChange",function(e){return m.xc(n),m.dc(2).attendandeDateTime=e}),m.Qb(),m.Rb(16,"div",55),m.Rb(17,"button",56),m.Mb(18,"i",26),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Rb(19,"div",57),m.Rb(20,"div",17),m.Rb(21,"label",18),m.Ic(22,"Type"),m.Qb(),m.Rb(23,"ng-select",58),m.bc("ngModelChange",function(e){return m.xc(n),m.dc(2).selectedType=e}),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Rb(24,"div",59),m.Rb(25,"button",60),m.bc("click",function(){return t.$implicit.close("by: close button")}),m.Ic(26,"Close"),m.Qb(),m.Rb(27,"button",61),m.bc("click",function(){return m.xc(n),m.dc(2).deleteAttendance()}),m.Ic(28,"Delete Logs"),m.Qb(),m.Rb(29,"button",62),m.bc("click",function(){return m.xc(n),m.dc(2).submitAttendance()}),m.Ic(30,"Save changes"),m.Qb(),m.Qb()}if(2&e){var i=m.vc(14),a=m.dc(2);m.yb(15),m.kc("value",a.attendandeDateTime),m.jc("ngModel",a.attendandeDateTime)("popover",i)("outsideClick",!0),m.yb(8),m.jc("items",a.type)("ngModel",a.selectedType)}}function E(e,t){if(1&e){var n=m.Sb();m.Rb(0,"div",47),m.Rb(1,"h5",48),m.Ic(2,"Upload Log"),m.Qb(),m.Rb(3,"button",49),m.bc("click",function(){return t.$implicit.close("by: close icon")}),m.Rb(4,"span",50),m.Ic(5,"\xd7"),m.Qb(),m.Qb(),m.Qb(),m.Rb(6,"div",51),m.Rb(7,"div",10),m.Rb(8,"div",29),m.Rb(9,"div",17),m.Rb(10,"label"),m.Ic(11,"File upload"),m.Qb(),m.Rb(12,"div",10),m.Rb(13,"div",15),m.Rb(14,"app-file-upload",65),m.bc("onUploadFinished",function(e){return m.xc(n),m.dc(2).uploadFinished(e)}),m.Qb(),m.Qb(),m.Rb(15,"div",57),m.Rb(16,"button",33),m.bc("click",function(){return m.xc(n),m.dc(2).exportTemplate()}),m.Mb(17,"i",36),m.Ic(18," Download Template "),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Mb(19,"hr"),m.Rb(20,"div",10),m.Rb(21,"div",29),m.Rb(22,"div",37),m.Rb(23,"table",66),m.Rb(24,"thead"),m.Rb(25,"tr"),m.Rb(26,"th"),m.Ic(27,"Employee Code"),m.Qb(),m.Rb(28,"th"),m.Ic(29,"Employee Name"),m.Qb(),m.Rb(30,"th"),m.Ic(31,"Logs"),m.Qb(),m.Rb(32,"th"),m.Ic(33,"Type"),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Rb(34,"div",59),m.Rb(35,"button",60),m.bc("click",function(){return t.$implicit.close()}),m.Ic(36,"Close"),m.Qb(),m.Rb(37,"button",62),m.bc("click",function(){return m.xc(n),m.dc(2).submitUpload()}),m.Ic(38,"Save changes"),m.Qb(),m.Qb()}}function j(e,t){if(1&e){var n=m.Sb();m.Rb(0,"div",4),m.Rb(1,"nav",5),m.Rb(2,"ol",6),m.Rb(3,"li",7),m.Rb(4,"a",8),m.Ic(5,"Timekeeping"),m.Qb(),m.Qb(),m.Rb(6,"li",9),m.Ic(7,"Attendance Log"),m.Qb(),m.Qb(),m.Qb(),m.Rb(8,"div",10),m.Rb(9,"div",11),m.Rb(10,"div",12),m.Rb(11,"div",13),m.Rb(12,"div",14),m.Rb(13,"div",10),m.Rb(14,"div",15),m.Rb(15,"h6"),m.Ic(16,"Attendance Log"),m.Qb(),m.Qb(),m.Qb(),m.Mb(17,"hr"),m.Qb(),m.Rb(18,"form",16),m.Rb(19,"div",10),m.Rb(20,"div",15),m.Rb(21,"div",17),m.Rb(22,"label",18),m.Ic(23,"Employee"),m.Qb(),m.Mb(24,"ng-select",19),m.Qb(),m.Qb(),m.Rb(25,"div",20),m.Rb(26,"div",17),m.Rb(27,"label",18),m.Ic(28,"Date From"),m.Qb(),m.Rb(29,"div",21),m.Rb(30,"input",22,23),m.bc("click",function(){return m.xc(n),m.vc(31).toggle()}),m.Qb(),m.Rb(32,"div",24),m.Rb(33,"button",25),m.bc("click",function(){return m.xc(n),m.vc(31).toggle()}),m.Mb(34,"i",26),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Rb(35,"div",20),m.Rb(36,"div",17),m.Rb(37,"label",18),m.Ic(38,"Date To"),m.Qb(),m.Rb(39,"div",21),m.Rb(40,"input",27,28),m.bc("click",function(){return m.xc(n),m.vc(41).toggle()}),m.Qb(),m.Rb(42,"div",24),m.Rb(43,"button",25),m.bc("click",function(){return m.xc(n),m.vc(41).toggle()}),m.Mb(44,"i",26),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Rb(45,"div",10),m.Rb(46,"div",29),m.Rb(47,"div",30),m.Gc(48,w,3,0,"button",31),m.Gc(49,S,3,0,"button",32),m.Ic(50," \xa0 "),m.Rb(51,"button",33),m.bc("click",function(){return m.xc(n),m.dc().openUploadModal()}),m.Mb(52,"i",34),m.Ic(53," Upload "),m.Qb(),m.Ic(54," \xa0 "),m.Rb(55,"button",35),m.Mb(56,"i",36),m.Ic(57," Download "),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Mb(58,"hr"),m.Rb(59,"div",10),m.Rb(60,"div",29),m.Rb(61,"div",37),m.Rb(62,"table",38),m.Rb(63,"thead"),m.Rb(64,"tr"),m.Rb(65,"th"),m.Ic(66,"Employee Code"),m.Qb(),m.Rb(67,"th"),m.Ic(68,"Employee Name"),m.Qb(),m.Rb(69,"th"),m.Ic(70,"Logs"),m.Qb(),m.Rb(71,"th"),m.Ic(72,"Type"),m.Qb(),m.Rb(73,"th"),m.Ic(74,"Action"),m.Qb(),m.Qb(),m.Qb(),m.Rb(75,"tbody"),m.Gc(76,C,12,4,"tr",39),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Gc(77,x,31,6,"ng-template",null,40,m.Hc),m.Gc(79,E,39,0,"ng-template",null,41,m.Hc),m.Qb()}if(2&e){var i=m.dc();m.yb(18),m.jc("formGroup",i.attendanceForm),m.yb(6),m.jc("items",i.employeeList),m.yb(24),m.jc("ngIf",i.isSearch),m.yb(1),m.jc("ngIf",!i.isSearch),m.yb(13),m.jc("dtOptions",i.dtOptions)("dtTrigger",i.dtTrigger),m.yb(14),m.jc("ngForOf",i.attendanceList)}}var N,G=((N=function(){function t(n,i,a,r,c){var d=this;e(this,t),this.modalService=n,this.userManagementService=i,this.fb=a,this.attendanceManagementService=r,this.dataUploadManagementService=c,this.uri=u.a.exportUrl,this.pipe=new o.e("en-US"),this.isLoading=!0,this.employeeList=[],this.uploadedList=[],this.attendanceList=[],this.isSearch=!1,this.startDate={day:new Date(sessionStorage.getItem("s")).getDate(),month:new Date(sessionStorage.getItem("s")).getMonth()+1,year:new Date(sessionStorage.getItem("s")).getFullYear()},this.endDate={day:new Date(sessionStorage.getItem("e")).getDate(),month:new Date(sessionStorage.getItem("e")).getMonth()+1,year:new Date(sessionStorage.getItem("e")).getFullYear()},this.type=[{id:0,description:"In"},{id:1,description:"Out"}],this.dtOptions={},this.dtTrigger=new b.a,this.uploadFinished=function(e){d.uploadedList=[];for(var t=0;t<e.length;t++){var n=d.employeeList.filter(function(n){return n.bio_id==e[t].bio_id})[0];d.uploadedList.push({employeeCode:n.employee_code,displayName:n.display_name,logs:e[t].date_time,type:0===e[t].in_out?"In":"Out"})}$("#modalTable").DataTable({data:d.uploadedList,columns:[{data:"employeeCode"},{data:"displayName"},{data:"logs"},{data:"type"}]})}}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.dtOptions={pagingType:"full_numbers",pageLength:5,lengthMenu:[5,10,25],processing:!0},this.attendanceForm=this.fb.group({dateFrom:this.startDate,dateTo:this.endDate,selectedEmployee:null}),this.userManagementService.employeeList().subscribe(function(t){e.employeeList=t,e.isLoading=!1,setTimeout(function(){e.dtTrigger.next()},100)},function(e){console.log(e.error)})}},{key:"exportTemplate",value:function(){var e=this;this.dataUploadManagementService.templateAttendance().subscribe(function(t){window.location.href=e.uri+t.response},function(e){console.log(e.error)})}},{key:"openLogModal",value:function(e,t){this.attendanceDate={day:new Date(this.attendanceList[t].logs).getDate(),month:new Date(this.attendanceList[t].logs).getMonth()+1,year:new Date(this.attendanceList[t].logs).getFullYear()},this.attendandeDateTime=this.pipe.transform(this.attendanceDate.year+"/"+this.attendanceDate.month+"/"+this.attendanceDate.day+" "+new Date(this.attendanceList[t].logs).getHours()+":"+new Date(this.attendanceList[t].logs).getMinutes(),"MM/dd/yyyy hh:mm a"),this.selectedIndex=t,this.selectedType=this.attendanceList[t].inOut,this.modalService.open(e)}},{key:"submitAttendance",value:function(){var e=this;s.a.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showLoaderOnConfirm:!0}).then(function(t){t.isConfirmed&&s.a.fire({title:"Please Wait !",allowOutsideClick:!1,onBeforeOpen:function(){s.a.showLoading();var t={bio_id:e.attendanceList[e.selectedIndex].bioId,date_time:e.attendanceList[e.selectedIndex].logs,in_out:e.attendanceList[e.selectedIndex].inOut,terminal_id:e.attendanceList[e.selectedIndex].terminalId,created_by:e.attendanceList[e.selectedIndex].createdBy,date_created:e.attendanceList[e.selectedIndex].dateCreated,date_time_new:e.attendandeDateTime,in_out_new:e.selectedType,created_by_new:sessionStorage.getItem("u"),series_code:sessionStorage.getItem("sc")};e.attendanceManagementService.attendanceIU(t).subscribe(function(t){0===t?s.a.fire("Failed!","Transaction failed!","error"):(s.a.fire("Ok!","Transaction successful!","success"),e.modalService.dismissAll(),e.search())},function(e){console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}})})}},{key:"deleteAttendance",value:function(){var e=this;s.a.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showLoaderOnConfirm:!0}).then(function(t){t.isConfirmed&&s.a.fire({title:"Please Wait !",allowOutsideClick:!1,onBeforeOpen:function(){s.a.showLoading();var t={bio_id:e.attendanceList[e.selectedIndex].bioId,date_time:e.attendanceList[e.selectedIndex].logs,in_out:e.attendanceList[e.selectedIndex].inOut,terminal_id:e.attendanceList[e.selectedIndex].terminalId,created_by:e.attendanceList[e.selectedIndex].createdBy,date_created:e.attendanceList[e.selectedIndex].dateCreated,date_time_new:e.attendandeDateTime,in_out_new:e.selectedType,created_by_new:sessionStorage.getItem("u"),series_code:sessionStorage.getItem("sc")};e.attendanceManagementService.attendanceD(t).subscribe(function(t){0===t?s.a.fire("Failed!","Transaction failed!","error"):(s.a.fire("Ok!","Transaction successful!","success"),e.modalService.dismissAll(),e.search())},function(e){console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}})})}},{key:"setDateTime",value:function(){null!==this.pipe.transform(this.attendanceTime,"hh:mm a")&&(this.attendandeDateTime=this.pipe.transform(this.attendanceDate.year+"/"+this.attendanceDate.month+"/"+this.attendanceDate.day,"MM/dd/yyyy")+" "+this.pipe.transform(this.attendanceTime,"hh:mm a"))}},{key:"openUploadModal",value:function(){this.modalService.open(this.uploadModal,{size:"lg"})}},{key:"search",value:function(){var e=this;this.isSearch=!0,this.attendanceList=[],this.attendanceManagementService.attendanceView(this.pipe.transform(this.attendanceForm.get("dateFrom").value.year+"/"+this.attendanceForm.get("dateFrom").value.month+"/"+this.attendanceForm.get("dateFrom").value.day,"MM/dd/yyyy"),this.pipe.transform(this.attendanceForm.get("dateTo").value.year+"/"+this.attendanceForm.get("dateTo").value.month+"/"+this.attendanceForm.get("dateTo").value.day,"MM/dd/yyyy"),null===this.attendanceForm.get("selectedEmployee").value?"":this.attendanceForm.get("selectedEmployee").value).subscribe(function(t){for(var n=0;n<t.length;n++){var i=e.employeeList.filter(function(e){return e.bio_id==t[n].bio_id})[0];e.attendanceList.push({bioId:i.bio_id,employeeCode:i.employee_code,displayName:i.display_name,logs:t[n].date_time,type:0===t[n].in_out?"In":"Out",inOut:t[n].in_out,terminalId:t[n].terminal_id,dateCreated:t[n].date_created,createdBy:t[n].created_by})}e.rerender(),e.isSearch=!1},function(e){console.log(e.error)})}},{key:"rerender",value:function(){var e=this;this.dtElement.dtInstance.then(function(t){t.clear().draw(),t.destroy(),e.dtTrigger.next()})}},{key:"ngOnDestroy",value:function(){this.dtTrigger.unsubscribe()}},{key:"openFileBrowser",value:function(e){e.preventDefault(),document.querySelector("#fileUploadInputExample").click(),e.target.files&&e.target.files[0]&&(new FileReader).readAsDataURL(e.target.files[0])}},{key:"handleFileInput",value:function(e){e.target.files.length&&document.querySelector("#fileUploadInputExample + .input-group .file-upload-info").setAttribute("value",e.target.files[0].name)}},{key:"submitUpload",value:function(){var e=this;s.a.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showLoaderOnConfirm:!0}).then(function(t){t.isConfirmed&&s.a.fire({title:"Please Wait !",allowOutsideClick:!1,onBeforeOpen:function(){s.a.showLoading();var t={created_by:sessionStorage.getItem("u"),series_code:sessionStorage.getItem("sc")};e.attendanceManagementService.attendanceI(t).subscribe(function(t){0===t?s.a.fire("Failed!","Transaction failed!","error"):(s.a.fire("Ok!","Transaction successful!","success"),e.modalService.dismissAll())},function(e){console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}})})}}]),t}()).\u0275fac=function(e){return new(e||N)(m.Lb(p.j),m.Lb(h.a),m.Lb(g.c),m.Lb(f.a),m.Lb(y.a))},N.\u0275cmp=m.Fb({type:N,selectors:[["app-attendance-log"]],viewQuery:function(e,t){var n;1&e&&(m.Nc(M,!0),m.Nc(F,!0),m.Nc(d.a,!0)),2&e&&(m.uc(n=m.cc())&&(t.uploadModal=n.first),m.uc(n=m.cc())&&(t.attendanceModal=n.first),m.uc(n=m.cc())&&(t.dtElement=n.first))},decls:2,vars:2,consts:[["class","spinner-wrapper",4,"ngIf"],["class","animate__animated animate__fadeInUp",4,"ngIf"],[1,"spinner-wrapper"],[1,"spinner"],[1,"animate__animated","animate__fadeInUp"],[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"col-md-6"],[3,"formGroup"],[1,"form-group"],[1,"control-label"],["name","Employee","bindLabel","display_name","bindValue","bio_id","placeholder","Select Employee","formControlName","selectedEmployee",3,"items"],[1,"col-md-3"],[1,"input-group"],["placeholder","mm/dd/yyyy","name","dp","formControlName","dateFrom","ngbDatepicker","",1,"form-control",3,"click"],["d","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-light","btn-icon","calendar",3,"click"],["data-feather","calendar","appFeatherIcon","",1,"text-secondary"],["placeholder","mm/dd/yyyy","name","dp","formControlName","dateTo","ngbDatepicker","",1,"form-control",3,"click"],["d2","ngbDatepicker"],[1,"col-md-12"],[1,"text-right"],["class","btn btn-primary","type","button","disabled","",4,"ngIf"],["type","button","class","btn btn-primary btn-icon-text",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary","btn-icon-text",3,"click"],["data-feather","upload-cloud","appFeatherIcon","",1,"btn-icon-prepend"],["type","button",1,"btn","btn-primary","btn-icon-text"],["data-feather","download-cloud","appFeatherIcon","",1,"btn-icon-prepend"],[1,"table-responsive"],["datatable","",1,"row-border","hover",3,"dtOptions","dtTrigger"],[4,"ngFor","ngForOf"],["attendanceModal",""],["uploadModal",""],["type","button","disabled","",1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["data-feather","search","appFeatherIcon","",1,"btn-icon-prepend"],["type","button","title","Edit",1,"btn","btn-sm","btn-primary","btn-icon",3,"click"],[1,"feather","icon-edit-2"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-md-8"],["popDate",""],["name","dp",1,"form-control",3,"ngModel","popover","outsideClick","value","ngModelChange"],[1,"input-group-prepend"],["type","button",1,"btn","btn-outline-light","btn-icon","calendar"],[1,"col-md-4"],["name","Employee","bindLabel","description","bindValue","id","placeholder","Select Type",3,"items","ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[3,"ngModel","ngModelChange"],[3,"ngModel","showMeridian","ngModelChange"],[3,"onUploadFinished"],["id","modalTable",1,"table"]],template:function(e,t){1&e&&(m.Gc(0,L,3,0,"div",0),m.Gc(1,j,81,7,"div",1)),2&e&&(m.jc("ngIf",t.isLoading),m.yb(1),m.jc("ngIf",!t.isLoading))},directives:[o.n,c.f,g.s,g.j,g.e,v.a,g.i,g.d,g.b,p.i,R.a,d.a,o.m,g.l,Q.a,p.c,I.a,D],styles:[""]}),N),P=a("EVdn");function B(e,t){1&e&&(m.Rb(0,"div",2),m.Rb(1,"div",3),m.Ic(2,"Loading..."),m.Qb(),m.Qb())}function H(e,t){1&e&&(m.Rb(0,"button",42),m.Mb(1,"span",43),m.Ic(2," Loading... "),m.Qb())}function U(e,t){if(1&e){var n=m.Sb();m.Rb(0,"button",44),m.bc("click",function(){return m.xc(n),m.dc(2).search()}),m.Mb(1,"i",45),m.Ic(2," Search "),m.Qb()}}function A(e,t){if(1&e){var n=m.Sb();m.Rb(0,"button",47),m.bc("click",function(){m.xc(n);var e=m.dc().index;m.dc();var t=m.vc(85);return m.dc().openLogModal(t,e)}),m.Mb(1,"i",48),m.Qb()}}function V(e,t){if(1&e&&(m.Rb(0,"tr"),m.Rb(1,"td"),m.Ic(2),m.Qb(),m.Rb(3,"td"),m.Ic(4),m.Qb(),m.Rb(5,"td"),m.Ic(6),m.ec(7,"date"),m.Qb(),m.Rb(8,"td"),m.Ic(9),m.Qb(),m.Rb(10,"td"),m.Ic(11),m.Qb(),m.Rb(12,"td"),m.Ic(13),m.Qb(),m.Rb(14,"td"),m.Ic(15),m.Qb(),m.Rb(16,"td"),m.Ic(17),m.Qb(),m.Rb(18,"td"),m.Gc(19,A,2,0,"button",46),m.Qb(),m.Qb()),2&e){var n=t.$implicit;m.yb(2),m.Jc(n.employee_code),m.yb(2),m.Jc(n.display_name),m.yb(2),m.Jc(m.gc(7,9,n.date,"MM/dd/yyyy")),m.yb(3),m.Jc(n.sked_in),m.yb(2),m.Jc(n.sked_out),m.yb(2),m.Jc(n.time_in),m.yb(2),m.Jc(n.time_out),m.yb(2),m.Jc(n.remarks),m.yb(2),m.jc("ngIf",!n.is_add)}}var J=function(){return{standalone:!0}};function Y(e,t){if(1&e){var n=m.Sb();m.Rb(0,"ngb-datepicker",65),m.bc("ngModelChange",function(e){return m.xc(n),m.dc(3).dfPopDate=e})("ngModelChange",function(){return m.xc(n),m.dc(3).setDateFrom()}),m.Qb(),m.Rb(1,"timepicker",66),m.bc("ngModelChange",function(e){return m.xc(n),m.dc(3).dfPopTime=e})("ngModelChange",function(){return m.xc(n),m.dc(3).setDateFrom()}),m.Qb()}if(2&e){var i=m.dc(3);m.jc("ngModel",i.dfPopDate)("ngModelOptions",m.mc(5,J)),m.yb(1),m.jc("ngModel",i.dfPopTime)("ngModelOptions",m.mc(6,J))("showMeridian",!0)}}function W(e,t){if(1&e){var n=m.Sb();m.Rb(0,"ngb-datepicker",65),m.bc("ngModelChange",function(e){return m.xc(n),m.dc(3).dtPopDate=e})("ngModelChange",function(){return m.xc(n),m.dc(3).setDateTo()}),m.Qb(),m.Rb(1,"timepicker",66),m.bc("ngModelChange",function(e){return m.xc(n),m.dc(3).dtPopTime=e})("ngModelChange",function(){return m.xc(n),m.dc(3).setDateTo()}),m.Qb()}if(2&e){var i=m.dc(3);m.jc("ngModel",i.dtPopDate)("ngModelOptions",m.mc(5,J)),m.yb(1),m.jc("ngModel",i.dtPopTime)("ngModelOptions",m.mc(6,J))("showMeridian",!0)}}function z(e,t){if(1&e){var n=m.Sb();m.Rb(0,"div",49),m.Rb(1,"h5",50),m.Ic(2,"Attendance Log"),m.Qb(),m.Rb(3,"button",51),m.bc("click",function(){return t.$implicit.close("by: close icon")}),m.Rb(4,"span",52),m.Ic(5,"\xd7"),m.Qb(),m.Qb(),m.Qb(),m.Rb(6,"div",53),m.Rb(7,"form",16),m.Rb(8,"div",10),m.Rb(9,"div",15),m.Rb(10,"div",18),m.Rb(11,"label",19),m.Ic(12,"Schedule In"),m.Qb(),m.Mb(13,"input",54),m.Qb(),m.Qb(),m.Rb(14,"div",15),m.Rb(15,"div",18),m.Rb(16,"label",19),m.Ic(17,"Schedule Out"),m.Qb(),m.Mb(18,"input",55),m.Qb(),m.Qb(),m.Qb(),m.Rb(19,"div",10),m.Rb(20,"div",15),m.Rb(21,"div",18),m.Rb(22,"label",19),m.Ic(23,"Time In"),m.Qb(),m.Rb(24,"div",20),m.Gc(25,Y,2,7,"ng-template",null,56,m.Hc),m.Mb(27,"input",57),m.Rb(28,"div",58),m.Rb(29,"button",59),m.Mb(30,"i",25),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Rb(31,"div",15),m.Rb(32,"div",18),m.Rb(33,"label",19),m.Ic(34,"Time Out"),m.Qb(),m.Rb(35,"div",20),m.Gc(36,W,2,7,"ng-template",null,60,m.Hc),m.Mb(38,"input",61),m.Rb(39,"div",58),m.Rb(40,"button",59),m.Mb(41,"i",25),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Rb(42,"div",62),m.Rb(43,"button",63),m.bc("click",function(){return t.$implicit.close("by: close button")}),m.Ic(44,"Close"),m.Qb(),m.Rb(45,"button",64),m.bc("click",function(){return m.xc(n),m.dc(2).updateAttendance()}),m.Ic(46,"Save changes"),m.Qb(),m.Qb()}if(2&e){var i=m.vc(26),a=m.vc(37),o=m.dc(2);m.yb(7),m.jc("formGroup",o.editForm),m.yb(20),m.jc("popover",i)("outsideClick",!0),m.yb(11),m.jc("popover",a)("outsideClick",!0)}}function K(e,t){if(1&e){var n=m.Sb();m.Rb(0,"div",4),m.Rb(1,"nav",5),m.Rb(2,"ol",6),m.Rb(3,"li",7),m.Rb(4,"a",8),m.Ic(5,"Timekeeping"),m.Qb(),m.Qb(),m.Rb(6,"li",9),m.Ic(7,"Employee Attendance"),m.Qb(),m.Qb(),m.Qb(),m.Rb(8,"div",10),m.Rb(9,"div",11),m.Rb(10,"div",12),m.Rb(11,"div",13),m.Rb(12,"div",14),m.Rb(13,"div",10),m.Rb(14,"div",15),m.Rb(15,"h6"),m.Ic(16,"Employee Attendance"),m.Qb(),m.Qb(),m.Qb(),m.Mb(17,"hr"),m.Qb(),m.Rb(18,"form",16),m.Rb(19,"div",10),m.Rb(20,"div",17),m.Rb(21,"div",18),m.Rb(22,"label",19),m.Ic(23,"Date From"),m.Qb(),m.Rb(24,"div",20),m.Rb(25,"input",21,22),m.bc("click",function(){return m.xc(n),m.vc(26).toggle()}),m.Qb(),m.Rb(27,"div",23),m.Rb(28,"button",24),m.bc("click",function(){return m.xc(n),m.vc(26).toggle()}),m.Mb(29,"i",25),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Rb(30,"div",17),m.Rb(31,"div",18),m.Rb(32,"label",19),m.Ic(33,"Date To"),m.Qb(),m.Rb(34,"div",20),m.Rb(35,"input",26,27),m.bc("click",function(){return m.xc(n),m.vc(36).toggle()}),m.Qb(),m.Rb(37,"div",23),m.Rb(38,"button",24),m.bc("click",function(){return m.xc(n),m.vc(36).toggle()}),m.Mb(39,"i",25),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Rb(40,"div",28),m.Rb(41,"div",18),m.Rb(42,"label",19),m.Ic(43,"Employee"),m.Qb(),m.Mb(44,"ng-select",29),m.Qb(),m.Qb(),m.Rb(45,"div",30),m.Rb(46,"div",18),m.Rb(47,"label",19),m.Ic(48,"Missing Logs Only?"),m.Qb(),m.Rb(49,"div",31),m.Mb(50,"input",32),m.Mb(51,"label",33),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Rb(52,"div",10),m.Rb(53,"div",34),m.Rb(54,"div",35),m.Gc(55,H,3,0,"button",36),m.Gc(56,U,3,0,"button",37),m.Qb(),m.Qb(),m.Qb(),m.Mb(57,"hr"),m.Rb(58,"div",10),m.Rb(59,"div",34),m.Rb(60,"div",38),m.Rb(61,"table",39),m.Rb(62,"thead"),m.Rb(63,"tr"),m.Rb(64,"th"),m.Ic(65,"Employee Code"),m.Qb(),m.Rb(66,"th"),m.Ic(67,"Employee Name"),m.Qb(),m.Rb(68,"th"),m.Ic(69,"Date"),m.Qb(),m.Rb(70,"th"),m.Ic(71,"Schedule In"),m.Qb(),m.Rb(72,"th"),m.Ic(73,"Schedule Out"),m.Qb(),m.Rb(74,"th"),m.Ic(75,"Time In"),m.Qb(),m.Rb(76,"th"),m.Ic(77,"Time Out"),m.Qb(),m.Rb(78,"th"),m.Ic(79,"Remarks"),m.Qb(),m.Rb(80,"th"),m.Ic(81,"Action"),m.Qb(),m.Qb(),m.Qb(),m.Rb(82,"tbody"),m.Gc(83,V,20,12,"tr",40),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Gc(84,z,47,5,"ng-template",null,41,m.Hc),m.Qb()}if(2&e){var i=m.dc();m.yb(18),m.jc("formGroup",i.attendanceForm),m.yb(26),m.jc("items",i.employeeList),m.yb(11),m.jc("ngIf",i.isSearch),m.yb(1),m.jc("ngIf",!i.isSearch),m.yb(5),m.jc("dtOptions",i.dtOptions)("dtTrigger",i.dtTrigger),m.yb(22),m.jc("ngForOf",i.attendanceList)}}var q,X=((q=function(){function t(n,i,a,r){e(this,t),this.modalService=n,this.attendanceManagementService=i,this.fb=a,this.userManagementService=r,this.isLoading=!0,this.isSearch=!1,this.attendanceList=[],this.employeeList=[],this.pipe=new o.e("en-US"),this.startDate={day:new Date(sessionStorage.getItem("s")).getDate(),month:new Date(sessionStorage.getItem("s")).getMonth()+1,year:new Date(sessionStorage.getItem("s")).getFullYear()},this.endDate={day:new Date(sessionStorage.getItem("e")).getDate(),month:new Date(sessionStorage.getItem("e")).getMonth()+1,year:new Date(sessionStorage.getItem("e")).getFullYear()},this.dtOptions={},this.dtTrigger=new b.a}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.dtOptions={pagingType:"full_numbers",pageLength:10,lengthMenu:[5,10,25],processing:!0},this.attendanceForm=this.fb.group({dateFrom:this.startDate,dateTo:this.endDate,selectedEmployee:null,missingLogs:!1}),this.editForm=this.fb.group({index:0,scheduleIn:"",scheduleOut:"",timeIn:"",timeOut:""}),this.userManagementService.employeeSupervisor(!1,0).subscribe(function(t){e.employeeList=Object(P.merge)([{encrypt_employee_id:0,display_name:"All"}],t),e.isLoading=!1,setTimeout(function(){e.dtTrigger.next()},100)},function(e){console.log(e.error)})}},{key:"search",value:function(){var e=this;this.isSearch=!0;var t=this.pipe.transform(this.attendanceForm.get("dateFrom").value.year+"/"+this.attendanceForm.get("dateFrom").value.month+"/"+this.attendanceForm.get("dateFrom").value.day,"MM/dd/yyyy"),n=this.pipe.transform(this.attendanceForm.get("dateTo").value.year+"/"+this.attendanceForm.get("dateTo").value.month+"/"+this.attendanceForm.get("dateTo").value.day,"MM/dd/yyyy"),i=this.attendanceForm.get("selectedEmployee").value;null===i&&(i="0");var a=this.attendanceForm.get("missingLogs").value;this.attendanceManagementService.logView(t,n,i,a,!1).subscribe(function(t){e.attendanceList=t,console.log(t),e.rerender(),e.isSearch=!1},function(t){console.log(t.error),e.isSearch=!1})}},{key:"rerender",value:function(){var e=this;this.dtElement.dtInstance.then(function(t){t.clear().draw(),t.destroy(),e.dtTrigger.next()})}},{key:"openLogModal",value:function(e,t){this.editForm.setValue({index:t,scheduleIn:this.attendanceList[t].sked_in,scheduleOut:this.attendanceList[t].sked_out,timeIn:""===this.attendanceList[t].time_in?this.attendanceList[t].sked_in:this.attendanceList[t].time_in,timeOut:""===this.attendanceList[t].time_out?this.attendanceList[t].sked_out:this.attendanceList[t].time_out}),this.modalService.open(e)}},{key:"setDateFrom",value:function(){var e,t;e=this.pipe.transform(null==this.dfPopDate?this.startDate.year+"/"+this.startDate.month+"/"+this.startDate.day:this.dfPopDate.year+"/"+this.dfPopDate.month+"/"+this.dfPopDate.day,"MM/dd/yyyy"),t=null===this.pipe.transform(this.dfPopTime,"hh:mm a")||void 0===this.pipe.transform(this.dfPopTime,"hh:mm a")?this.pipe.transform(this.pipe.transform(this.startDate.year+"/"+this.startDate.month+"/"+this.startDate.day+" 00:00","MM/dd/yyyy hh:mm a"),"hh:mm a"):this.pipe.transform(this.dfPopTime,"hh:mm a"),this.editForm.get("timeIn").setValue(e+" "+t)}},{key:"setDateTo",value:function(){var e,t;e=this.pipe.transform(null==this.dtPopDate?this.endDate.year+"/"+this.endDate.month+"/"+this.endDate.day:this.dtPopDate.year+"/"+this.dtPopDate.month+"/"+this.dtPopDate.day,"MM/dd/yyyy"),t=null===this.pipe.transform(this.dtPopTime,"hh:mm a")||void 0===this.pipe.transform(this.dtPopTime,"hh:mm a")?this.pipe.transform(this.pipe.transform(this.endDate.year+"/"+this.endDate.month+"/"+this.endDate.day+" 00:00","MM/dd/yyyy hh:mm a"),"hh:mm a"):this.pipe.transform(this.dtPopTime,"hh:mm a"),this.editForm.get("timeOut").setValue(e+" "+t)}},{key:"updateAttendance",value:function(){var e=this;s.a.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showLoaderOnConfirm:!0}).then(function(t){t.isConfirmed&&s.a.fire({title:"Please Wait !",allowOutsideClick:!1,onBeforeOpen:function(){s.a.showLoading();var t=e.attendanceList[e.editForm.get("index").value],n={employee_id:t.encrypt_employee_id,date:t.date,time_in:e.editForm.get("timeIn").value,time_out:e.editForm.get("timeOut").value,sked_time_in:t.sked_in,sked_time_out:t.sked_out,series_code:sessionStorage.getItem("sc"),created_by:sessionStorage.getItem("u")};e.attendanceManagementService.updateAttendance(n).subscribe(function(t){0===t?s.a.fire("Failed!","Transaction failed!","error"):(e.modalService.dismissAll(),s.a.fire("Ok!","Transaction successful!","success"),e.search())},function(e){console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}})})}}]),t}()).\u0275fac=function(e){return new(e||q)(m.Lb(p.j),m.Lb(f.a),m.Lb(g.c),m.Lb(h.a))},q.\u0275cmp=m.Fb({type:q,selectors:[["app-employee-attendance"]],viewQuery:function(e,t){var n;1&e&&m.Nc(d.a,!0),2&e&&m.uc(n=m.cc())&&(t.dtElement=n.first)},decls:2,vars:2,consts:[["class","spinner-wrapper",4,"ngIf"],["class","animate__animated animate__fadeInUp",4,"ngIf"],[1,"spinner-wrapper"],[1,"spinner"],[1,"animate__animated","animate__fadeInUp"],[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"col-md-6"],[3,"formGroup"],[1,"col-md-3"],[1,"form-group"],[1,"control-label"],[1,"input-group"],["placeholder","mm/dd/yyyy","name","dp","formControlName","dateFrom","value","dateFrom","ngbDatepicker","",1,"form-control",3,"click"],["d","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-light","btn-icon","calendar",3,"click"],["data-feather","calendar","appFeatherIcon","",1,"text-secondary"],["placeholder","mm/dd/yyyy","name","dp","formControlName","dateTo","ngbDatepicker","",1,"form-control",3,"click"],["dt","ngbDatepicker"],[1,"col-md-4"],["name","Employee","bindLabel","display_name","bindValue","encrypt_employee_id","placeholder","Select Employee","formControlName","selectedEmployee",3,"items"],[1,"col-md-2"],[1,"custom-control","custom-switch"],["type","checkbox","formControlName","missingLogs","id","customSwitch1",1,"custom-control-input"],["for","customSwitch1",1,"custom-control-label"],[1,"col-md-12"],[1,"text-right"],["class","btn btn-primary","type","button","disabled","",4,"ngIf"],["type","button","class","btn btn-primary btn-icon-text",3,"click",4,"ngIf"],[1,"table-responsive"],["datatable","","id","dataTableExample",1,"table",3,"dtOptions","dtTrigger"],[4,"ngFor","ngForOf"],["attendanceModal",""],["type","button","disabled","",1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["type","button",1,"btn","btn-primary","btn-icon-text",3,"click"],["data-feather","search","appFeatherIcon","",1,"btn-icon-prepend"],["type","button","title","Edit","class","btn btn-sm btn-primary btn-icon",3,"click",4,"ngIf"],["type","button","title","Edit",1,"btn","btn-sm","btn-primary","btn-icon",3,"click"],[1,"feather","icon-edit-2"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["type","text","formControlName","scheduleIn","readonly","","placeholder","Overtime Code",1,"form-control"],["type","text","formControlName","scheduleOut","readonly","","placeholder","Balance",1,"form-control"],["popDateFrom",""],["formControlName","timeIn","name","dp",1,"form-control",3,"popover","outsideClick"],[1,"input-group-prepend"],["type","button",1,"btn","btn-outline-light","btn-icon","calendar"],["popDateTo",""],["formControlName","timeOut","name","dp",1,"form-control",3,"popover","outsideClick"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngModel","ngModelOptions","showMeridian","ngModelChange"]],template:function(e,t){1&e&&(m.Gc(0,B,3,0,"div",0),m.Gc(1,K,86,7,"div",1)),2&e&&(m.jc("ngIf",t.isLoading),m.yb(1),m.jc("ngIf",!t.isLoading))},directives:[o.n,c.f,g.s,g.j,g.e,g.b,p.i,g.i,g.d,R.a,v.a,g.a,d.a,o.m,Q.a,p.c,g.l,I.a],pipes:[o.e],styles:[""]}),q),Z=a("xNm2");function ee(e,t){1&e&&(m.Rb(0,"div",2),m.Rb(1,"div",3),m.Ic(2,"Loading..."),m.Qb(),m.Qb())}function te(e,t){1&e&&(m.Rb(0,"p",43),m.Ic(1,"Please select employee!"),m.Qb())}function ne(e,t){1&e&&(m.Rb(0,"button",44),m.Mb(1,"span",45),m.Ic(2," Loading... "),m.Qb())}function ie(e,t){if(1&e){var n=m.Sb();m.Rb(0,"button",35),m.bc("click",function(){return m.xc(n),m.dc(2).search()}),m.Mb(1,"i",46),m.Ic(2," Search "),m.Qb()}}function ae(e,t){if(1&e){var n=m.Sb();m.Rb(0,"tr"),m.Rb(1,"td"),m.Rb(2,"div",39),m.Rb(3,"input",47),m.bc("change",function(e){m.xc(n);var i=t.index;return m.dc(2).checkTrans(i,e)}),m.Qb(),m.Mb(4,"label",48),m.Qb(),m.Qb(),m.Rb(5,"td"),m.Ic(6),m.Qb(),m.Rb(7,"td"),m.Ic(8),m.Qb(),m.Rb(9,"td"),m.Ic(10),m.Qb(),m.Rb(11,"td"),m.Ic(12),m.Qb(),m.Rb(13,"td"),m.Ic(14),m.Qb(),m.Rb(15,"td"),m.Ic(16),m.Qb(),m.Rb(17,"td"),m.Ic(18),m.Qb(),m.Rb(19,"td"),m.Ic(20),m.Qb(),m.Rb(21,"td"),m.Ic(22),m.Qb(),m.Rb(23,"td"),m.Ic(24),m.Qb(),m.Qb()}if(2&e){var i=t.$implicit,a=m.dc(2);m.yb(3),m.kc("id",i.overtime_code),m.jc("checked",a.isChecked),m.yb(1),m.kc("for",i.overtime_code),m.yb(2),m.Jc(i.employee_code),m.yb(2),m.Jc(i.display_name),m.yb(2),m.Jc(i.schedule_in),m.yb(2),m.Jc(i.schedule_out),m.yb(2),m.Jc(i.time_in),m.yb(2),m.Jc(i.time_out),m.yb(2),m.Jc(i.file_ot_in),m.yb(2),m.Jc(i.file_ot_out),m.yb(2),m.Jc(i.final_in),m.yb(2),m.Jc(i.final_out)}}function oe(e,t){if(1&e){var n=m.Sb();m.Rb(0,"div",4),m.Rb(1,"nav",5),m.Rb(2,"ol",6),m.Rb(3,"li",7),m.Rb(4,"a",8),m.Ic(5,"Timekeeping"),m.Qb(),m.Qb(),m.Rb(6,"li",9),m.Ic(7,"Overtime Render"),m.Qb(),m.Qb(),m.Qb(),m.Rb(8,"div",10),m.Rb(9,"div",11),m.Rb(10,"div",12),m.Rb(11,"div",13),m.Rb(12,"div",14),m.Rb(13,"div",10),m.Rb(14,"div",15),m.Rb(15,"h6"),m.Ic(16,"Overtime Render"),m.Qb(),m.Qb(),m.Qb(),m.Mb(17,"hr"),m.Qb(),m.Rb(18,"form",16),m.Rb(19,"div",10),m.Rb(20,"div",17),m.Rb(21,"div",18),m.Rb(22,"label",19),m.Ic(23,"Date From"),m.Qb(),m.Rb(24,"div",20),m.Rb(25,"input",21,22),m.bc("click",function(){return m.xc(n),m.vc(26).toggle()}),m.Qb(),m.Rb(27,"div",23),m.Rb(28,"button",24),m.bc("click",function(){return m.xc(n),m.vc(26).toggle()}),m.Mb(29,"i",25),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Rb(30,"div",17),m.Rb(31,"div",18),m.Rb(32,"label",19),m.Ic(33,"Date To"),m.Qb(),m.Rb(34,"div",20),m.Rb(35,"input",26,27),m.bc("click",function(){return m.xc(n),m.vc(36).toggle()}),m.Qb(),m.Rb(37,"div",23),m.Rb(38,"button",24),m.bc("click",function(){return m.xc(n),m.vc(36).toggle()}),m.Mb(39,"i",25),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Rb(40,"div",28),m.Rb(41,"div",18),m.Rb(42,"label",19),m.Ic(43,"Employee"),m.Qb(),m.Mb(44,"ng-select",29),m.Gc(45,te,2,0,"p",30),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Rb(46,"div",10),m.Rb(47,"div",31),m.Rb(48,"div",32),m.Gc(49,ne,3,0,"button",33),m.Gc(50,ie,3,0,"button",34),m.Ic(51," \xa0 "),m.Rb(52,"button",35),m.bc("click",function(){return m.xc(n),m.dc().submit()}),m.Mb(53,"i",36),m.Ic(54," Save Changes "),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Mb(55,"hr"),m.Rb(56,"div",10),m.Rb(57,"div",31),m.Rb(58,"div",37),m.Rb(59,"table",38),m.Rb(60,"thead"),m.Rb(61,"tr"),m.Rb(62,"th"),m.Rb(63,"div",39),m.Rb(64,"input",40),m.bc("change",function(e){return m.xc(n),m.dc().checkAll(e)}),m.Qb(),m.Mb(65,"label",41),m.Qb(),m.Qb(),m.Rb(66,"th"),m.Ic(67,"Employee Code"),m.Qb(),m.Rb(68,"th"),m.Ic(69,"Employee Name"),m.Qb(),m.Rb(70,"th"),m.Ic(71,"Schedule In"),m.Qb(),m.Rb(72,"th"),m.Ic(73,"Schedule Out"),m.Qb(),m.Rb(74,"th"),m.Ic(75,"Time In"),m.Qb(),m.Rb(76,"th"),m.Ic(77,"Time Out"),m.Qb(),m.Rb(78,"th"),m.Ic(79,"Filed OT In"),m.Qb(),m.Rb(80,"th"),m.Ic(81,"Filed OT Out"),m.Qb(),m.Rb(82,"th"),m.Ic(83,"Final In"),m.Qb(),m.Rb(84,"th"),m.Ic(85,"Final Out"),m.Qb(),m.Qb(),m.Qb(),m.Rb(86,"tbody"),m.Gc(87,ae,25,13,"tr",42),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb()}if(2&e){var i=m.dc();m.yb(18),m.jc("formGroup",i.renderForm),m.yb(26),m.jc("items",i.employeeList),m.yb(1),m.jc("ngIf",i.errEmployee),m.yb(4),m.jc("ngIf",i.isSearch),m.yb(1),m.jc("ngIf",!i.isSearch),m.yb(9),m.jc("dtOptions",i.dtOptions)("dtTrigger",i.dtTrigger),m.yb(28),m.jc("ngForOf",i.renderList)}}var re,ce,de=((ce=function(){function t(n,i,a){e(this,t),this.filingManagementService=n,this.userManagementService=i,this.fb=a,this.isLoading=!0,this.isSearch=!1,this.errEmployee=!1,this.isChecked=!1,this.employeeList=[],this.renderList=[],this.dtOptions={},this.dtTrigger=new b.a,this.startDate={day:new Date(sessionStorage.getItem("s")).getDate(),month:new Date(sessionStorage.getItem("s")).getMonth()+1,year:new Date(sessionStorage.getItem("s")).getFullYear()},this.endDate={day:new Date(sessionStorage.getItem("e")).getDate(),month:new Date(sessionStorage.getItem("e")).getMonth()+1,year:new Date(sessionStorage.getItem("e")).getFullYear()},this.pipe=new o.e("en-US")}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.dtOptions={pagingType:"full_numbers",pageLength:10,lengthMenu:[5,10,25],processing:!0},this.renderForm=this.fb.group({dateFrom:this.startDate,dateTo:this.endDate,selectedEmployee:null}),this.userManagementService.employeeList().subscribe(function(t){e.employeeList=Object(P.merge)([{encrypt_employee_id:0,display_name:"All"}],t),e.isLoading=!1,setTimeout(function(){e.dtTrigger.next()},100)},function(e){console.log(e.error)})}},{key:"validation",value:function(){var e=!0;return this.errEmployee=!1,""!==this.renderForm.get("selectedEmployee").value&&null!==this.renderForm.get("selectedEmployee").value||(e=!1,this.errEmployee=!0),e}},{key:"search",value:function(){var e=this;if(this.validation()){this.isSearch=!0;var t=this.pipe.transform(this.renderForm.get("dateFrom").value.year+"/"+this.renderForm.get("dateFrom").value.month+"/"+this.renderForm.get("dateFrom").value.day,"MM/dd/yyyy"),n=this.pipe.transform(this.renderForm.get("dateTo").value.year+"/"+this.renderForm.get("dateTo").value.month+"/"+this.renderForm.get("dateTo").value.day,"MM/dd/yyyy"),i=this.renderForm.get("selectedEmployee").value;this.filingManagementService.renderView(i,t,n).subscribe(function(t){e.renderList=t,console.log(t),e.rerender(),e.isSearch=!1},function(t){console.log(t.error),e.isSearch=!1})}}},{key:"rerender",value:function(){var e=this;this.dtElement.dtInstance.then(function(t){t.clear().draw(),t.destroy(),e.dtTrigger.next()})}},{key:"checkAll",value:function(e){1==this.isChecked?(this.isChecked=!1,this.renderList.map(function(e){return e.is_edit=!1})):(this.isChecked=!0,this.renderList.map(function(e){return e.is_edit=!0}))}},{key:"checkTrans",value:function(e,t){this.renderList[e].is_edit=t.currentTarget.checked}},{key:"submit",value:function(){var e=this;s.a.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showLoaderOnConfirm:!0}).then(function(t){t.isConfirmed&&s.a.fire({title:"Please Wait !",allowOutsideClick:!1,onBeforeOpen:function(){s.a.showLoading();var t=e.renderList.filter(function(e){return!0===e.is_edit}).map(function(e){return{overtime_id:e.overtime_id,final_in:e.final_in,final_out:e.final_out,created_by:sessionStorage.getItem("u"),series_code:sessionStorage.getItem("sc")}});e.filingManagementService.renderI(t).subscribe(function(t){console.log(t),0===t.id?s.a.fire("Failed!","Transaction failed!","error"):(s.a.fire("Ok!","Transaction successful!","success"),e.search())},function(e){console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}})})}}]),t}()).\u0275fac=function(e){return new(e||ce)(m.Lb(Z.a),m.Lb(h.a),m.Lb(g.c))},ce.\u0275cmp=m.Fb({type:ce,selectors:[["app-overtime-render"]],viewQuery:function(e,t){var n;1&e&&m.Nc(d.a,!0),2&e&&m.uc(n=m.cc())&&(t.dtElement=n.first)},decls:2,vars:2,consts:[["class","spinner-wrapper",4,"ngIf"],["class","animate__animated animate__fadeInUp",4,"ngIf"],[1,"spinner-wrapper"],[1,"spinner"],[1,"animate__animated","animate__fadeInUp"],[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"col-md-6"],[3,"formGroup"],[1,"col-md-3"],[1,"form-group"],[1,"control-label"],[1,"input-group"],["placeholder","mm/dd/yyyy","name","dp","formControlName","dateFrom","value","dateFrom","ngbDatepicker","",1,"form-control",3,"click"],["d","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-light","btn-icon","calendar",3,"click"],["data-feather","calendar","appFeatherIcon","",1,"text-secondary"],["placeholder","mm/dd/yyyy","name","dp","formControlName","dateTo","ngbDatepicker","",1,"form-control",3,"click"],["dt","ngbDatepicker"],[1,"col-md-4"],["name","Employee","bindLabel","display_name","bindValue","encrypt_employee_id","placeholder","Select Employee","formControlName","selectedEmployee",3,"items"],["class","text-danger mt-1",4,"ngIf"],[1,"col-md-12"],[1,"text-right"],["class","btn btn-primary","type","button","disabled","",4,"ngIf"],["type","button","class","btn btn-primary btn-icon-text",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary","btn-icon-text",3,"click"],["data-feather","save","appFeatherIcon","",1,"btn-icon-prepend"],[1,"table-responsive"],["datatable","","id","dataTableExample",1,"table",3,"dtOptions","dtTrigger"],[1,"custom-control","custom-switch"],["type","checkbox","id","check-all",1,"custom-control-input",3,"change"],["for","check-all",1,"custom-control-label"],[4,"ngFor","ngForOf"],[1,"text-danger","mt-1"],["type","button","disabled","",1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["data-feather","search","appFeatherIcon","",1,"btn-icon-prepend"],["type","checkbox",1,"custom-control-input",3,"checked","id","change"],[1,"custom-control-label",3,"for"]],template:function(e,t){1&e&&(m.Gc(0,ee,3,0,"div",0),m.Gc(1,oe,88,8,"div",1)),2&e&&(m.jc("ngIf",t.isLoading),m.yb(1),m.jc("ngIf",!t.isLoading))},directives:[o.n,c.f,g.s,g.j,g.e,g.b,p.i,g.i,g.d,R.a,v.a,d.a,o.m],styles:[""]}),ce),be=((re=function(){function t(){e(this,t)}return n(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(e){return new(e||re)},re.\u0275cmp=m.Fb({type:re,selectors:[["app-leave-entitlement"]],decls:2,vars:0,template:function(e,t){1&e&&(m.Rb(0,"p"),m.Ic(1," leave-entitlement works!\n"),m.Qb())},styles:[""]}),re),le=a("Jfpn"),se=a("tyVc"),ue=a("mkVx"),me=a("Kdsb"),pe=a("mWvJ");function he(e,t){1&e&&(m.Rb(0,"div",2),m.Rb(1,"div",3),m.Ic(2,"Loading..."),m.Qb(),m.Qb())}function ge(e,t){if(1&e){var n=m.Sb();m.Rb(0,"tr"),m.Rb(1,"td"),m.Ic(2),m.Qb(),m.Rb(3,"td"),m.Ic(4),m.Qb(),m.Rb(5,"td"),m.Ic(6),m.Qb(),m.Rb(7,"td"),m.Ic(8),m.Qb(),m.Rb(9,"td"),m.Ic(10),m.Qb(),m.Rb(11,"td"),m.Ic(12),m.Qb(),m.Rb(13,"td"),m.Ic(14),m.Qb(),m.Rb(15,"td"),m.Ic(16),m.Qb(),m.Rb(17,"td"),m.Ic(18),m.Qb(),m.Rb(19,"td"),m.Ic(20),m.Qb(),m.Rb(21,"td"),m.Rb(22,"button",22),m.bc("click",function(){m.xc(n);var e=t.$implicit;return m.dc(2).viewTimekeeping(e.encrypttimekeepingId)}),m.Mb(23,"i",23),m.Qb(),m.Qb(),m.Qb()}if(2&e){var i=t.$implicit;m.yb(2),m.Jc(i.timekeepingCode),m.yb(2),m.Jc(i.payrollType),m.yb(2),m.Jc(i.dateFrom),m.yb(2),m.Jc(i.dateTo),m.yb(2),m.Jc(i.category),m.yb(2),m.Jc(i.branch),m.yb(2),m.Jc(i.confidentiality),m.yb(2),m.Jc(i.createdDesc),m.yb(2),m.Jc(i.dateCreated),m.yb(2),m.Jc(i.generatedCount)}}var fe=function(){return["/layout/timekeeping/timekeeping-generation-detail"]};function ye(e,t){if(1&e&&(m.Rb(0,"div",4),m.Rb(1,"nav",5),m.Rb(2,"ol",6),m.Rb(3,"li",7),m.Rb(4,"a",8),m.Ic(5,"Timekeeping"),m.Qb(),m.Qb(),m.Rb(6,"li",9),m.Ic(7,"Timekeeping Generation"),m.Qb(),m.Qb(),m.Qb(),m.Rb(8,"div",10),m.Rb(9,"div",11),m.Rb(10,"div",12),m.Rb(11,"div",13),m.Rb(12,"div",14),m.Rb(13,"div",10),m.Rb(14,"div",15),m.Rb(15,"h6"),m.Ic(16,"Timekeeping Generation"),m.Qb(),m.Qb(),m.Rb(17,"div",15),m.Rb(18,"ul",16),m.Rb(19,"button",17),m.Mb(20,"i",18),m.Ic(21," Add Timekeeping "),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Mb(22,"hr"),m.Rb(23,"div",19),m.Rb(24,"table",20),m.Rb(25,"thead"),m.Rb(26,"tr"),m.Rb(27,"th"),m.Ic(28,"Timekeeping Code"),m.Qb(),m.Rb(29,"th"),m.Ic(30,"Payroll Type"),m.Qb(),m.Rb(31,"th"),m.Ic(32,"Date From"),m.Qb(),m.Rb(33,"th"),m.Ic(34,"Date To"),m.Qb(),m.Rb(35,"th"),m.Ic(36,"Category"),m.Qb(),m.Rb(37,"th"),m.Ic(38,"Branch"),m.Qb(),m.Rb(39,"th"),m.Ic(40,"Confidential"),m.Qb(),m.Rb(41,"th"),m.Ic(42,"Created By"),m.Qb(),m.Rb(43,"th"),m.Ic(44,"Date Created"),m.Qb(),m.Rb(45,"th"),m.Ic(46,"Generated"),m.Qb(),m.Mb(47,"th"),m.Qb(),m.Qb(),m.Rb(48,"tbody"),m.Gc(49,ge,24,10,"tr",21),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb()),2&e){var n=m.dc();m.yb(19),m.jc("routerLink",m.mc(4,fe)),m.yb(5),m.jc("dtOptions",n.dtOptions)("dtTrigger",n.dtTrigger),m.yb(25),m.jc("ngForOf",n.table)}}var ve,Re=((ve=function(){function t(n,i,a){e(this,t),this.userManagementService=n,this.timekeepingManagementService=i,this.router=a,this.isLoading=!0,this.dtOptions={},this.dtTrigger=new b.a,this.table=[],this.pipe=new o.e("en-US")}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.dtOptions={pagingType:"full_numbers",pageLength:5,lengthMenu:[5,10,25],processing:!0,order:[0,"desc"]},this.timekeepingManagementService.timekeepingView(0).subscribe(function(t){e.table=t.map(function(t){return{active:t.active,status:t.status,createdBy:t.created_by,createdDesc:t.created_by_name,dateCreated:e.pipe.transform(t.date_created,"MM/dd/yyyy"),timekeepingCode:t.timekeeping_header_code,dateFrom:e.pipe.transform(t.date_from,"MM/dd/yyyy"),dateTo:e.pipe.transform(t.date_to,"MM/dd/yyyy"),payrollType:t.payroll_type,month:t.month,cutoff:t.cutoff,confidentiality:t.confidentiality,branch:t.branch,category:t.category,generatedCount:t.tk_count,encrypttimekeepingId:t.encrypt_timekeeping_header_id}}),e.isLoading=!1,setTimeout(function(){e.dtTrigger.next()},100)},function(e){console.log(e.error)})}},{key:"viewTimekeeping",value:function(e){this.router.navigate(["/layout/timekeeping/timekeeping-generation-detail",e])}}]),t}()).\u0275fac=function(e){return new(e||ve)(m.Lb(h.a),m.Lb(pe.a),m.Lb(c.c))},ve.\u0275cmp=m.Fb({type:ve,selectors:[["app-timekeeping-generation-view"]],decls:2,vars:2,consts:[["class","spinner-wrapper",4,"ngIf"],["class","animate__animated animate__fadeInUp",4,"ngIf"],[1,"spinner-wrapper"],[1,"spinner"],[1,"animate__animated","animate__fadeInUp"],[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"col-md-6"],[1,"nav","justify-content-end"],[1,"btn","btn-primary","btn-icon-text",3,"routerLink"],["data-feather","edit","appFeatherIcon","",1,"btn-icon-prepend"],[1,"table-responsive"],["datatable","",1,"row-border","hover",3,"dtOptions","dtTrigger"],[4,"ngFor","ngForOf"],["type","button","title","Edit",1,"btn","btn-sm","btn-primary","btn-icon",3,"click"],[1,"feather","icon-edit-2"]],template:function(e,t){1&e&&(m.Gc(0,he,3,0,"div",0),m.Gc(1,ye,50,5,"div",1)),2&e&&(m.jc("ngIf",t.isLoading),m.yb(1),m.jc("ngIf",!t.isLoading))},directives:[o.n,c.f,c.d,R.a,d.a,o.m],styles:[""]}),ve),Qe=a("/oZC"),Ie=a("wVlD"),ke=a("tinS"),_e=["generatedModal"];function Te(e,t){1&e&&(m.Rb(0,"div",3),m.Rb(1,"div",4),m.Ic(2,"Loading..."),m.Qb(),m.Qb())}function De(e,t){1&e&&(m.Rb(0,"p",50),m.Ic(1,"Payroll Type is needed!"),m.Qb())}function Me(e,t){1&e&&(m.Rb(0,"p",50),m.Ic(1,"Payroll Cutoff is needed!"),m.Qb())}function Fe(e,t){if(1&e){var n=m.Sb();m.Rb(0,"div",18),m.Rb(1,"div",19),m.Rb(2,"label",20),m.Ic(3,"Payroll Cutoff"),m.Qb(),m.Rb(4,"ng-select",51),m.bc("change",function(){return m.xc(n),m.dc(2).changePayrollType()}),m.Qb(),m.Gc(5,Me,2,0,"p",22),m.Qb(),m.Qb()}if(2&e){var i=m.dc(2);m.yb(4),m.jc("items",i.cutoffList),m.yb(1),m.jc("ngIf",i.errCutoff)}}function Le(e,t){1&e&&(m.Rb(0,"p",50),m.Ic(1,"Month is needed!"),m.Qb())}function we(e,t){1&e&&(m.Rb(0,"p",50),m.Ic(1,"Date From is needed!"),m.Qb())}function Se(e,t){1&e&&(m.Rb(0,"p",50),m.Ic(1,"Date To is needed!"),m.Qb())}function Ce(e,t){1&e&&(m.Rb(0,"p",50),m.Ic(1,"Category is needed!"),m.Qb())}function Oe(e,t){1&e&&(m.Rb(0,"p",50),m.Ic(1,"Branch is needed!"),m.Qb())}function xe(e,t){1&e&&(m.Rb(0,"p",50),m.Ic(1,"Confidential is needed!"),m.Qb())}function Ee(e,t){if(1&e){var n=m.Sb();m.Rb(0,"button",52),m.bc("click",function(){return m.xc(n),m.dc(2).submitHeader()}),m.Mb(1,"i",53),m.Ic(2," Save Changes "),m.Qb()}}function je(e,t){1&e&&(m.Rb(0,"button",47),m.Ic(1,"Continue"),m.Qb())}function Ne(e,t){1&e&&(m.Rb(0,"button",54),m.Mb(1,"span",55),m.Ic(2," Loading... "),m.Qb())}function Ge(e,t){if(1&e){var n=m.Sb();m.Rb(0,"button",56),m.bc("click",function(){return m.xc(n),m.dc(2).generate()}),m.Mb(1,"i",57),m.Ic(2," Generate "),m.Qb()}}function Pe(e,t){if(1&e){var n=m.Sb();m.Rb(0,"div",5),m.Rb(1,"nav",6),m.Rb(2,"ol",7),m.Rb(3,"li",8),m.Rb(4,"a",9),m.Ic(5,"Timekeeping"),m.Qb(),m.Qb(),m.Rb(6,"li",8),m.Rb(7,"a",10),m.Ic(8,"Timekeeping Generation"),m.Qb(),m.Qb(),m.Rb(9,"li",11),m.Ic(10,"Detail"),m.Qb(),m.Qb(),m.Qb(),m.Rb(11,"div",12),m.Rb(12,"div",13),m.Rb(13,"div",14),m.Rb(14,"div",15),m.Rb(15,"form",16),m.Rb(16,"aw-wizard"),m.Rb(17,"aw-wizard-step",17),m.Mb(18,"hr"),m.Rb(19,"div",12),m.Rb(20,"div",18),m.Rb(21,"div",19),m.Rb(22,"label",20),m.Ic(23,"Payroll Type"),m.Qb(),m.Rb(24,"ng-select",21),m.bc("change",function(){return m.xc(n),m.dc().changePayrollType()}),m.Qb(),m.Gc(25,De,2,0,"p",22),m.Qb(),m.Qb(),m.Gc(26,Fe,6,2,"div",23),m.Rb(27,"div",18),m.Rb(28,"div",19),m.Rb(29,"label",20),m.Ic(30,"Month"),m.Qb(),m.Rb(31,"ng-select",24),m.bc("change",function(){return m.xc(n),m.dc().changePayrollType()}),m.Qb(),m.Gc(32,Le,2,0,"p",22),m.Qb(),m.Qb(),m.Qb(),m.Rb(33,"div",12),m.Rb(34,"div",18),m.Rb(35,"div",19),m.Rb(36,"label",20),m.Ic(37,"Date From"),m.Qb(),m.Rb(38,"div",25),m.Rb(39,"input",26,27),m.bc("click",function(){return m.xc(n),m.vc(40).toggle()}),m.Qb(),m.Rb(41,"div",28),m.Rb(42,"button",29),m.bc("click",function(){return m.xc(n),m.vc(40).toggle()}),m.Mb(43,"i",30),m.Qb(),m.Qb(),m.Qb(),m.Gc(44,we,2,0,"p",22),m.Qb(),m.Qb(),m.Rb(45,"div",18),m.Rb(46,"div",19),m.Rb(47,"label",20),m.Ic(48,"Date To"),m.Qb(),m.Rb(49,"div",25),m.Rb(50,"input",31,32),m.bc("click",function(){return m.xc(n),m.vc(51).toggle()}),m.Qb(),m.Rb(52,"div",28),m.Rb(53,"button",29),m.bc("click",function(){return m.xc(n),m.vc(51).toggle()}),m.Mb(54,"i",30),m.Qb(),m.Qb(),m.Qb(),m.Gc(55,Se,2,0,"p",22),m.Qb(),m.Qb(),m.Rb(56,"div",18),m.Rb(57,"div",19),m.Rb(58,"label",20),m.Ic(59,"Category"),m.Qb(),m.Mb(60,"ng-select",33),m.Gc(61,Ce,2,0,"p",22),m.Qb(),m.Qb(),m.Qb(),m.Rb(62,"div",12),m.Rb(63,"div",18),m.Rb(64,"div",19),m.Rb(65,"label",20),m.Ic(66,"Branch"),m.Qb(),m.Mb(67,"ng-select",34),m.Gc(68,Oe,2,0,"p",22),m.Qb(),m.Qb(),m.Rb(69,"div",18),m.Rb(70,"div",19),m.Rb(71,"label",20),m.Ic(72,"Confidential"),m.Qb(),m.Mb(73,"ng-select",35),m.Gc(74,xe,2,0,"p",22),m.Qb(),m.Qb(),m.Qb(),m.Rb(75,"div",36),m.Gc(76,Ee,3,0,"button",37),m.Gc(77,je,2,0,"button",38),m.Qb(),m.Qb(),m.Rb(78,"aw-wizard-step",39),m.Mb(79,"hr"),m.Rb(80,"div",12),m.Rb(81,"div",40),m.Rb(82,"div",41),m.Gc(83,Ne,3,0,"button",42),m.Gc(84,Ge,3,0,"button",43),m.Qb(),m.Qb(),m.Qb(),m.Rb(85,"div",12),m.Rb(86,"div",40),m.Rb(87,"div",44),m.Rb(88,"table",45),m.Rb(89,"thead"),m.Rb(90,"tr"),m.Rb(91,"th"),m.Ic(92,"Timekeeping Code"),m.Qb(),m.Rb(93,"th"),m.Ic(94,"Date From"),m.Qb(),m.Rb(95,"th"),m.Ic(96,"Date To"),m.Qb(),m.Rb(97,"th"),m.Ic(98,"Created By"),m.Qb(),m.Rb(99,"th"),m.Ic(100,"Date Created"),m.Qb(),m.Rb(101,"th"),m.Ic(102,"Action"),m.Qb(),m.Qb(),m.Qb(),m.Mb(103,"tbody"),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Rb(104,"div",36),m.Rb(105,"button",46),m.Ic(106,"Back"),m.Qb(),m.Rb(107,"button",47),m.Ic(108,"Continue"),m.Qb(),m.Qb(),m.Qb(),m.Rb(109,"aw-wizard-step",48),m.Rb(110,"div",12),m.Rb(111,"div",40),m.Rb(112,"div",12),m.Rb(113,"div",40),m.Rb(114,"div",44),m.Rb(115,"table",49),m.Rb(116,"thead"),m.Rb(117,"tr"),m.Rb(118,"th"),m.Ic(119,"EMPLOYEE CODE"),m.Qb(),m.Rb(120,"th"),m.Ic(121,"EMPLOYEE"),m.Qb(),m.Rb(122,"th"),m.Ic(123,"DATE"),m.Qb(),m.Rb(124,"th"),m.Ic(125,"RESTDAY"),m.Qb(),m.Rb(126,"th"),m.Ic(127,"SCHEDULE IN"),m.Qb(),m.Rb(128,"th"),m.Ic(129,"SCHEDULE OUT"),m.Qb(),m.Rb(130,"th"),m.Ic(131,"TIME IN"),m.Qb(),m.Rb(132,"th"),m.Ic(133,"TIME OUT"),m.Qb(),m.Rb(134,"th"),m.Ic(135,"RG"),m.Qb(),m.Rb(136,"th"),m.Ic(137,"TARDY"),m.Qb(),m.Rb(138,"th"),m.Ic(139,"UT"),m.Qb(),m.Rb(140,"th"),m.Ic(141,"ABSNT"),m.Qb(),m.Rb(142,"th"),m.Ic(143,"LWOP"),m.Qb(),m.Rb(144,"th"),m.Ic(145,"VL"),m.Qb(),m.Rb(146,"th"),m.Ic(147,"SL"),m.Qb(),m.Rb(148,"th"),m.Ic(149,"OTLV"),m.Qb(),m.Rb(150,"th"),m.Ic(151,"ND"),m.Qb(),m.Rb(152,"th"),m.Ic(153,"RGOT"),m.Qb(),m.Rb(154,"th"),m.Ic(155,"RGOTND"),m.Qb(),m.Rb(156,"th"),m.Ic(157,"LHOT"),m.Qb(),m.Rb(158,"th"),m.Ic(159,"LHOTND"),m.Qb(),m.Rb(160,"th"),m.Ic(161,"LHOT>8"),m.Qb(),m.Rb(162,"th"),m.Ic(163,"LHOTND>8"),m.Qb(),m.Rb(164,"th"),m.Ic(165,"LHRD"),m.Qb(),m.Rb(166,"th"),m.Ic(167,"LHRDND"),m.Qb(),m.Rb(168,"th"),m.Ic(169,"LHRD>8"),m.Qb(),m.Rb(170,"th"),m.Ic(171,"LHRDND>8"),m.Qb(),m.Rb(172,"th"),m.Ic(173,"SHOT"),m.Qb(),m.Rb(174,"th"),m.Ic(175,"SHOTND"),m.Qb(),m.Rb(176,"th"),m.Ic(177,"SHOT>8"),m.Qb(),m.Rb(178,"th"),m.Ic(179,"SHOTND>8"),m.Qb(),m.Rb(180,"th"),m.Ic(181,"SHRD"),m.Qb(),m.Rb(182,"th"),m.Ic(183,"SHRDND"),m.Qb(),m.Rb(184,"th"),m.Ic(185,"SHRD>8"),m.Qb(),m.Rb(186,"th"),m.Ic(187,"SHRDND>8"),m.Qb(),m.Rb(188,"th"),m.Ic(189,"RDOT"),m.Qb(),m.Rb(190,"th"),m.Ic(191,"RDOTND"),m.Qb(),m.Rb(192,"th"),m.Ic(193,"RDOT>8"),m.Qb(),m.Rb(194,"th"),m.Ic(195,"RDOTND>8"),m.Qb(),m.Rb(196,"th"),m.Ic(197,"DHOT"),m.Qb(),m.Rb(198,"th"),m.Ic(199,"DHOTND"),m.Qb(),m.Rb(200,"th"),m.Ic(201,"DHOT>8"),m.Qb(),m.Rb(202,"th"),m.Ic(203,"DHOTND>8"),m.Qb(),m.Rb(204,"th"),m.Ic(205,"DHRD"),m.Qb(),m.Rb(206,"th"),m.Ic(207,"DHRDND"),m.Qb(),m.Rb(208,"th"),m.Ic(209,"DHRD>8"),m.Qb(),m.Rb(210,"th"),m.Ic(211,"DHRDND>8"),m.Qb(),m.Rb(212,"th"),m.Ic(213,"REMARKS"),m.Qb(),m.Qb(),m.Qb(),m.Mb(214,"tbody"),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Rb(215,"div",36),m.Rb(216,"button",46),m.Ic(217,"Back"),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb()}if(2&e){var i=m.dc();m.yb(15),m.jc("formGroup",i.timekeepingForm),m.yb(2),m.jc("awCompletedStep",i.complete),m.yb(7),m.jc("items",i.payrolltype),m.yb(1),m.jc("ngIf",i.errPayrollType),m.yb(1),m.jc("ngIf",i.isCutoff),m.yb(5),m.jc("items",i.monthList),m.yb(1),m.jc("ngIf",i.errMonth),m.yb(12),m.jc("ngIf",i.errdateFrom),m.yb(11),m.jc("ngIf",i.errdateTo),m.yb(5),m.jc("items",i.category),m.yb(1),m.jc("ngIf",i.errCategory),m.yb(6),m.jc("items",i.branch),m.yb(1),m.jc("ngIf",i.errBranch),m.yb(5),m.jc("items",i.confidential),m.yb(1),m.jc("ngIf",i.errConfidential),m.yb(2),m.jc("ngIf",!i.isView),m.yb(1),m.jc("ngIf",i.isView),m.yb(1),m.jc("awCompletedStep",i.complete),m.yb(5),m.jc("ngIf",i.isGenerate),m.yb(1),m.jc("ngIf",!i.isGenerate),m.yb(4),m.jc("dtTrigger",i.dtTriggerTkList)("dtOptions",i.dtOptions.tkList),m.yb(21),m.jc("awCompletedStep",i.complete),m.yb(6),m.jc("dtTrigger",i.dtTriggerFinal)("dtOptions",i.dtOptions.tkFinal)}}function Be(e,t){if(1&e){var n=m.Sb();m.Rb(0,"div",58),m.Rb(1,"h5",59),m.Ic(2,"Timekeeping Detail"),m.Qb(),m.Rb(3,"button",60),m.bc("click",function(){return t.$implicit.close("by: close icon")}),m.Rb(4,"span",61),m.Ic(5,"\xd7"),m.Qb(),m.Qb(),m.Qb(),m.Rb(6,"div",62),m.Rb(7,"div",12),m.Rb(8,"div",40),m.Rb(9,"div",44),m.Rb(10,"table",63),m.Rb(11,"thead"),m.Rb(12,"tr"),m.Rb(13,"th"),m.Ic(14,"EMPLOYEE CODE"),m.Qb(),m.Rb(15,"th"),m.Ic(16,"EMPLOYEE"),m.Qb(),m.Rb(17,"th"),m.Ic(18,"DATE"),m.Qb(),m.Rb(19,"th"),m.Ic(20,"RESTDAY"),m.Qb(),m.Rb(21,"th"),m.Ic(22,"SCHEDULE IN"),m.Qb(),m.Rb(23,"th"),m.Ic(24,"SCHEDULE OUT"),m.Qb(),m.Rb(25,"th"),m.Ic(26,"TIME IN"),m.Qb(),m.Rb(27,"th"),m.Ic(28,"TIME OUT"),m.Qb(),m.Rb(29,"th"),m.Ic(30,"RG"),m.Qb(),m.Rb(31,"th"),m.Ic(32,"TARDY"),m.Qb(),m.Rb(33,"th"),m.Ic(34,"UT"),m.Qb(),m.Rb(35,"th"),m.Ic(36,"ABSNT"),m.Qb(),m.Rb(37,"th"),m.Ic(38,"LWOP"),m.Qb(),m.Rb(39,"th"),m.Ic(40,"VL"),m.Qb(),m.Rb(41,"th"),m.Ic(42,"SL"),m.Qb(),m.Rb(43,"th"),m.Ic(44,"OTLV"),m.Qb(),m.Rb(45,"th"),m.Ic(46,"ND"),m.Qb(),m.Rb(47,"th"),m.Ic(48,"RGOT"),m.Qb(),m.Rb(49,"th"),m.Ic(50,"RGOTND"),m.Qb(),m.Rb(51,"th"),m.Ic(52,"LHOT"),m.Qb(),m.Rb(53,"th"),m.Ic(54,"LHOTND"),m.Qb(),m.Rb(55,"th"),m.Ic(56,"LHOT>8"),m.Qb(),m.Rb(57,"th"),m.Ic(58,"LHOTND>8"),m.Qb(),m.Rb(59,"th"),m.Ic(60,"LHRD"),m.Qb(),m.Rb(61,"th"),m.Ic(62,"LHRDND"),m.Qb(),m.Rb(63,"th"),m.Ic(64,"LHRD>8"),m.Qb(),m.Rb(65,"th"),m.Ic(66,"LHRDND>8"),m.Qb(),m.Rb(67,"th"),m.Ic(68,"SHOT"),m.Qb(),m.Rb(69,"th"),m.Ic(70,"SHOTND"),m.Qb(),m.Rb(71,"th"),m.Ic(72,"SHOT>8"),m.Qb(),m.Rb(73,"th"),m.Ic(74,"SHOTND>8"),m.Qb(),m.Rb(75,"th"),m.Ic(76,"SHRD"),m.Qb(),m.Rb(77,"th"),m.Ic(78,"SHRDND"),m.Qb(),m.Rb(79,"th"),m.Ic(80,"SHRD>8"),m.Qb(),m.Rb(81,"th"),m.Ic(82,"SHRDND>8"),m.Qb(),m.Rb(83,"th"),m.Ic(84,"RDOT"),m.Qb(),m.Rb(85,"th"),m.Ic(86,"RDOTND"),m.Qb(),m.Rb(87,"th"),m.Ic(88,"RDOT>8"),m.Qb(),m.Rb(89,"th"),m.Ic(90,"RDOTND>8"),m.Qb(),m.Rb(91,"th"),m.Ic(92,"DHOT"),m.Qb(),m.Rb(93,"th"),m.Ic(94,"DHOTND"),m.Qb(),m.Rb(95,"th"),m.Ic(96,"DHOT>8"),m.Qb(),m.Rb(97,"th"),m.Ic(98,"DHOTND>8"),m.Qb(),m.Rb(99,"th"),m.Ic(100,"DHRD"),m.Qb(),m.Rb(101,"th"),m.Ic(102,"DHRDND"),m.Qb(),m.Rb(103,"th"),m.Ic(104,"DHRD>8"),m.Qb(),m.Rb(105,"th"),m.Ic(106,"DHRDND>8"),m.Qb(),m.Rb(107,"th"),m.Ic(108,"REMARKS"),m.Qb(),m.Qb(),m.Qb(),m.Mb(109,"tbody"),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Qb(),m.Rb(110,"div",64),m.Rb(111,"button",65),m.bc("click",function(){return t.$implicit.close("by: close button")}),m.Ic(112,"Close"),m.Qb(),m.Rb(113,"button",66),m.bc("click",function(){return m.xc(n),m.dc().saveTimekeeping()}),m.Ic(114,"Save changes"),m.Qb(),m.Qb()}if(2&e){var i=m.dc();m.yb(10),m.jc("dtOptions",i.dtOptions.generated)}}var He,Ue,Ae=[{path:"",component:r.a,children:[{path:"attendance-log",component:G,children:[{path:"file-upload",component:D}]},{path:"employee-attendance",component:X},{path:"leave-entitlement",component:be},{path:"overtime-render",component:de},{path:"timekeeping-generation-view",component:Re},{path:"timekeeping-generation-detail",redirectTo:"timekeeping-generation-detail/",pathMatch:"full"},{path:"timekeeping-generation-detail/:id",component:(He=function(){function t(n,i,a,r,c,d,l,s){e(this,t),this.fb=n,this.route=i,this.modalService=a,this.tenantMasterService=r,this.employeeCategory=c,this.branchManagement=d,this.timekeepingManagementService=l,this.renderer=s,this.isLoading=!0,this.isGenerate=!1,this.isDate=!0,this.isView=!1,this.isCutoff=!0,this.complete=!0,this.payrolltype=[],this.confidential=[],this.branch=[],this.category=[],this.cutoffList=[],this.monthList=[],this.generatedTimekeeping=[],this.finalTimekeeping=[],this.dateToday={day:new Date(new Date).getDate(),month:new Date(new Date).getMonth()+1,year:new Date(new Date).getFullYear()},this.pipe=new o.e("en-US"),this.dtOptions=[],this.dtTriggerFinal=new b.a,this.dtTriggerTkList=new b.a}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.id=this.route.snapshot.paramMap.get("id"),this.timekeepingForm=this.fb.group({timekeepingCode:"",selectedPayrollType:null,selectedCutoff:null,selectedMonth:null,dateFrom:{value:this.dateToday,disabled:this.isDate},dateTo:{value:this.dateToday,disabled:this.isDate},selectedCategory:0,selectedBranch:0,selectedConfidential:0}),this.resetError(!1),this.tenantMasterService.dropdownList("41, 42, 53, 54,").subscribe(function(t){e.payrolltype=t.filter(function(e){return 41===e.type_id}),e.cutoffList=t.filter(function(e){return 53===e.type_id}),e.monthList=t.filter(function(e){return 54===e.type_id}),e.confidential=Object(P.merge)([{id:0,description:"All"}],t.filter(function(e){return 42===e.type_id})),e.employeeCategory.categoryList(0).subscribe(function(t){e.category=Object(P.merge)([{category_id:0,category_name:"All"}],t),e.branchManagement.branchList().subscribe(function(t){e.branch=Object(P.merge)([{branch_id:0,branch_name:"All"}],t),""!==e.id?e.timekeepingManagementService.timekeepingView(e.id).subscribe(function(t){e.timekeepingForm.setValue({timekeepingCode:t[0].timekeeping_header_code,selectedPayrollType:t[0].payroll_type_id,selectedCutoff:t[0].cutoff_id,selectedMonth:t[0].month_id,selectedCategory:t[0].category_id,selectedBranch:t[0].branch_id,selectedConfidential:t[0].confidentiality_id,dateFrom:{year:new Date(t[0].date_from).getFullYear(),month:new Date(t[0].date_from).getMonth()+1,day:new Date(t[0].date_from).getDate()},dateTo:{year:new Date(t[0].date_to).getFullYear(),month:new Date(t[0].date_to).getMonth()+1,day:new Date(t[0].date_to).getDate()}}),e.isView=!0,e.isLoading=!1,e.reloadTimekeeping()},function(e){console.log(e.error)}):(e.id="0",e.isLoading=!1)},function(e){console.log(e.error)})},function(e){console.log(e.error)})},function(e){console.log(e.error)})}},{key:"ngAfterViewInit",value:function(){this.renderButton()}},{key:"renderButton",value:function(){var e=this;this.renderer.listen("document","click",function(t){t.target.classList.contains("viewTimekeeping")&&e.viewTimekeeping(t.target.id)})}},{key:"changePayrollType",value:function(){var e=this,t=!0,n=0;switch(this.timekeepingForm.get("selectedPayrollType").value){case 68:this.isCutoff=!1,n=0,""!==this.timekeepingForm.get("selectedPayrollType").value&&null!==this.timekeepingForm.get("selectedPayrollType").value||(t=!1),""!==this.timekeepingForm.get("selectedMonth").value&&null!==this.timekeepingForm.get("selectedMonth").value||(t=!1);break;case 67:this.isCutoff=!0,n=this.timekeepingForm.get("selectedCutoff").value,""!==this.timekeepingForm.get("selectedPayrollType").value&&null!==this.timekeepingForm.get("selectedPayrollType").value||(t=!1),""!==this.timekeepingForm.get("selectedCutoff").value&&null!==this.timekeepingForm.get("selectedCutoff").value||(t=!1),""!==this.timekeepingForm.get("selectedMonth").value&&null!==this.timekeepingForm.get("selectedMonth").value||(t=!1)}if(t){var i=this.timekeepingForm.get("selectedMonth").value;this.timekeepingManagementService.cutoffView(n,i).subscribe(function(t){e.timekeepingForm.get("dateFrom").setValue({year:new Date(t[0].date_from).getFullYear(),month:new Date(t[0].date_from).getMonth()+1,day:new Date(t[0].date_from).getDate()}),e.timekeepingForm.get("dateTo").setValue({year:new Date(t[0].date_to).getFullYear(),month:new Date(t[0].date_to).getMonth()+1,day:new Date(t[0].date_to).getDate()})},function(e){console.log(e.error)})}}},{key:"validationHeader",value:function(){this.resetError(!1);var e=!0;return""!==this.timekeepingForm.get("selectedPayrollType").value&&null!==this.timekeepingForm.get("selectedPayrollType").value||(e=!1,this.errPayrollType=!0),""!==this.timekeepingForm.get("selectedCutoff").value&&null!==this.timekeepingForm.get("selectedCutoff").value||(e=!1,this.errCutoff=!0),""!==this.timekeepingForm.get("selectedMonth").value&&null!==this.timekeepingForm.get("selectedMonth").value||(e=!1,this.errMonth=!0),""!==this.timekeepingForm.get("dateFrom").value&&null!==this.timekeepingForm.get("dateFrom").value||(e=!1,this.errdateFrom=!0),""!==this.timekeepingForm.get("dateTo").value&&null!==this.timekeepingForm.get("dateTo").value||(e=!1,this.errdateTo=!0),""!==this.timekeepingForm.get("selectedCategory").value&&null!==this.timekeepingForm.get("selectedCategory").value||(e=!1,this.errCategory=!0),""!==this.timekeepingForm.get("selectedBranch").value&&null!==this.timekeepingForm.get("selectedBranch").value||(e=!1,this.errBranch=!0),""!==this.timekeepingForm.get("selectedConfidential").value&&null!==this.timekeepingForm.get("selectedConfidential").value||(e=!1,this.errConfidential=!0),e}},{key:"reloadTimekeeping",value:function(){var e=this;this.timekeepingManagementService.generatedView(this.id,"0").subscribe(function(t){e.generatedTimekeeping=t,e.dtOptions.tkList={data:e.generatedTimekeeping,columns:[{data:"timekeeping_code"},{data:"date_from",render:function(e){var t=new Date(e),n=t.getMonth()+1;return(n.toString().length>1?n:"0"+n)+"/"+("0"+t.getDate()).slice(-2)+"/"+t.getFullYear()}},{data:"date_to",render:function(e){var t=new Date(e),n=t.getMonth()+1;return(n.toString().length>1?n:"0"+n)+"/"+("0"+t.getDate()).slice(-2)+"/"+t.getFullYear()}},{data:"display_name"},{data:"date_created",render:function(e){var t=new Date(e),n=t.getMonth()+1;return(n.toString().length>1?n:"0"+n)+"/"+("0"+t.getDate()).slice(-2)+"/"+t.getFullYear()}},{data:"encrypt_timekeeping_id",render:function(e,t,n,i){return'<button type="button" id="'+e+'" class="btn btn-sm btn-primary btn-icon viewTimekeeping"><i class="feather icon-search viewTimekeeping" id="'+e+'" ></i></button>'}}],order:[0,"desc"]},setTimeout(function(){e.dtTriggerTkList.next()},100),e.timekeepingManagementService.finalView(e.id,"0","","").subscribe(function(t){e.finalTimekeeping=t,e.dtOptions.tkFinal={data:e.finalTimekeeping,dom:"Bfrtip",buttons:["copy","csv","excel","print"],columns:[{data:"employee_code"},{data:"display_name"},{data:"date",render:function(e){var t=new Date(e),n=t.getMonth()+1;return(n.toString().length>1?n:"0"+n)+"/"+("0"+t.getDate()).slice(-2)+"/"+t.getFullYear()}},{data:"rest_day"},{data:"schedule_time_in"},{data:"schedule_time_out"},{data:"actual_time_in"},{data:"actual_time_out"},{data:"reg"},{data:"late"},{data:"undertime"},{data:"is_absent"},{data:"lwop_hour"},{data:"vl_hour"},{data:"sl_hour"},{data:"otherl_hour"},{data:"regnd"},{data:"ot"},{data:"otnd"},{data:"lhot"},{data:"lhotnd"},{data:"lhot_e8"},{data:"lhotnd_e8"},{data:"lhrdot"},{data:"lhrdotnd"},{data:"lhrdot_e8"},{data:"lhrdotnd_e8"},{data:"shot"},{data:"shotnd"},{data:"shot_e8"},{data:"shotnd_e8"},{data:"shrdot"},{data:"shrdotnd"},{data:"shrdot_e8"},{data:"shrdotnd_e8"},{data:"otrd"},{data:"otrdnd"},{data:"otrd_e8"},{data:"otrdnd_e8"},{data:"dhot"},{data:"dhotnd"},{data:"dhot_e8"},{data:"dhotnd_e8"},{data:"dhrdot"},{data:"dhrdotnd"},{data:"dhrdot_e8"},{data:"dhrdotnd_e8"},{data:"remarks"}],order:[[0,"desc"],[2,"asc"]]},setTimeout(function(){e.dtTriggerFinal.next()},100)},function(e){console.log(e.error)})},function(e){console.log(e.error)})}},{key:"submitHeader",value:function(){var e=this;this.validationHeader()&&s.a.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showLoaderOnConfirm:!0}).then(function(t){t.isConfirmed&&s.a.fire({title:"Please Wait !",allowOutsideClick:!1,onBeforeOpen:function(){s.a.showLoading();var t={timekeeping_header_id:e.id,timekeeping_header_code:e.timekeepingForm.get("timekeepingCode").value,date_from:e.pipe.transform(e.timekeepingForm.get("dateFrom").value.year+"/"+e.timekeepingForm.get("dateFrom").value.month+"/"+e.timekeepingForm.get("dateFrom").value.day,"MM/dd/yyyy"),date_to:e.pipe.transform(e.timekeepingForm.get("dateTo").value.year+"/"+e.timekeepingForm.get("dateTo").value.month+"/"+e.timekeepingForm.get("dateTo").value.day,"MM/dd/yyyy"),payroll_type_id:e.timekeepingForm.get("selectedPayrollType").value,cutoff_id:68===e.timekeepingForm.get("selectedPayrollType").value?0:e.timekeepingForm.get("selectedCutoff").value,month_id:e.timekeepingForm.get("selectedMonth").value,category_id:e.timekeepingForm.get("selectedCategory").value,branch_id:e.timekeepingForm.get("selectedBranch").value,confidentiality_id:e.timekeepingForm.get("selectedConfidential").value,active:!0,approval_level_id:sessionStorage.getItem("apl"),series_code:sessionStorage.getItem("sc"),created_by:sessionStorage.getItem("u")};e.timekeepingManagementService.timekeepingIU(t).subscribe(function(t){0===t.id?s.a.fire("Failed!","Transaction failed!","error"):(s.a.fire("Ok!","Transaction successful!","success"),e.id=t.encrypted_id,e.isView=!0)},function(e){console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}})})}},{key:"generate",value:function(){var e=this;this.isGenerate=!0,this.generatedTimekeeping=[],this.timekeepingManagementService.generationView(this.id).subscribe(function(t){e.generatedTimekeeping=t,e.isGenerate=!1,e.modalService.open(e.generatedModal,{size:"xl"}),e.dtOptions.generated={data:e.generatedTimekeeping,dom:"Bfrtip",buttons:["copy","csv","excel","print"],columns:[{data:"employee_code"},{data:"display_name"},{data:"date",render:function(e){var t=new Date(e),n=t.getMonth()+1;return(n.toString().length>1?n:"0"+n)+"/"+("0"+t.getDate()).slice(-2)+"/"+t.getFullYear()}},{data:"rest_day"},{data:"schedule_time_in"},{data:"schedule_time_out"},{data:"actual_time_in"},{data:"actual_time_out"},{data:"reg"},{data:"late"},{data:"undertime"},{data:"is_absent"},{data:"lwop_hour"},{data:"vl_hour"},{data:"sl_hour"},{data:"otherl_hour"},{data:"regnd"},{data:"ot"},{data:"otnd"},{data:"lhot"},{data:"lhotnd"},{data:"lhot_e8"},{data:"lhotnd_e8"},{data:"lhrdot"},{data:"lhrdotnd"},{data:"lhrdot_e8"},{data:"lhrdotnd_e8"},{data:"shot"},{data:"shotnd"},{data:"shot_e8"},{data:"shotnd_e8"},{data:"shrdot"},{data:"shrdotnd"},{data:"shrdot_e8"},{data:"shrdotnd_e8"},{data:"otrd"},{data:"otrdnd"},{data:"otrd_e8"},{data:"otrdnd_e8"},{data:"dhot"},{data:"dhotnd"},{data:"dhot_e8"},{data:"dhotnd_e8"},{data:"dhrdot"},{data:"dhrdotnd"},{data:"dhrdot_e8"},{data:"dhrdotnd_e8"},{data:"remarks"}]}},function(e){console.log(e.error)})}},{key:"saveTimekeeping",value:function(){var e=this,t=!0;this.generatedTimekeeping.length<=0&&(t=!1),t&&s.a.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes",showLoaderOnConfirm:!0}).then(function(t){t.isConfirmed&&s.a.fire({title:"Please Wait !",allowOutsideClick:!1,onBeforeOpen:function(){s.a.showLoading();var t={timekeeping_header_id:e.id,timekeeping_header_code:e.timekeepingForm.get("timekeepingCode").value,active:!0,series_code:sessionStorage.getItem("sc"),created_by:sessionStorage.getItem("u")};e.timekeepingManagementService.generationIU(t).subscribe(function(t){0===t.id?s.a.fire("Failed!","Transaction failed!","error"):(s.a.fire("Ok!","Transaction successful!","success"),e.timekeepingManagementService.generatedView(e.id,"0").subscribe(function(t){e.dtElements.forEach(function(e){e.dtInstance&&e.dtInstance.then(function(e){e.destroy()})}),e.reloadTimekeeping(),e.modalService.dismissAll()},function(e){console.log(e.error)}))},function(e){console.log(e.error),s.a.fire("Failed!","Transaction failed!","error")})}})})}},{key:"viewTimekeeping",value:function(e){var t=this;this.timekeepingManagementService.generatedDetailView(this.id,e).subscribe(function(e){t.generatedTimekeeping=e,t.modalService.open(t.generatedModal,{size:"xl"}),t.dtOptions.generated={data:t.generatedTimekeeping,dom:"Bfrtip",buttons:["copy","csv","excel","print"],columns:[{data:"employee_code"},{data:"display_name"},{data:"date",render:function(e){var t=new Date(e),n=t.getMonth()+1;return(n.toString().length>1?n:"0"+n)+"/"+("0"+t.getDate()).slice(-2)+"/"+t.getFullYear()}},{data:"rest_day"},{data:"schedule_time_in"},{data:"schedule_time_out"},{data:"actual_time_in"},{data:"actual_time_out"},{data:"reg"},{data:"late"},{data:"undertime"},{data:"is_absent"},{data:"lwop_hour"},{data:"vl_hour"},{data:"sl_hour"},{data:"otherl_hour"},{data:"regnd"},{data:"ot"},{data:"otnd"},{data:"lhot"},{data:"lhotnd"},{data:"lhot_e8"},{data:"lhotnd_e8"},{data:"lhrdot"},{data:"lhrdotnd"},{data:"lhrdot_e8"},{data:"lhrdotnd_e8"},{data:"shot"},{data:"shotnd"},{data:"shot_e8"},{data:"shotnd_e8"},{data:"shrdot"},{data:"shrdotnd"},{data:"shrdot_e8"},{data:"shrdotnd_e8"},{data:"otrd"},{data:"otrdnd"},{data:"otrd_e8"},{data:"otrdnd_e8"},{data:"dhot"},{data:"dhotnd"},{data:"dhot_e8"},{data:"dhotnd_e8"},{data:"dhrdot"},{data:"dhrdotnd"},{data:"dhrdot_e8"},{data:"dhrdotnd_e8"},{data:"remarks"}]}},function(e){console.log(e.error)})}},{key:"resetError",value:function(e){this.errPayrollType=e,this.errCutoff=e,this.errMonth=e,this.errdateFrom=e,this.errdateTo=e,this.errCategory=e,this.errBranch=e,this.errConfidential=e}}]),t}(),He.\u0275fac=function(e){return new(e||He)(m.Lb(g.c),m.Lb(c.a),m.Lb(p.j),m.Lb(Qe.a),m.Lb(Ie.a),m.Lb(ke.a),m.Lb(pe.a),m.Lb(m.E))},He.\u0275cmp=m.Fb({type:He,selectors:[["app-timekeeping-generation-detail"]],viewQuery:function(e,t){var n;1&e&&(m.Nc(_e,!0),m.Nc(d.a,!0)),2&e&&(m.uc(n=m.cc())&&(t.generatedModal=n.first),m.uc(n=m.cc())&&(t.dtElements=n))},decls:4,vars:2,consts:[["class","spinner-wrapper",4,"ngIf"],["class","animate__animated animate__fadeInUp",4,"ngIf"],["generatedModal",""],[1,"spinner-wrapper"],[1,"spinner"],[1,"animate__animated","animate__fadeInUp"],[1,"page-breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","."],["routerLink","/layout/timekeeping/timekeeping-generation-view"],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body"],[3,"formGroup"],["stepTitle","Details",3,"awCompletedStep"],[1,"col-md-4"],[1,"form-group"],[1,"control-label"],["formControlName","selectedPayrollType","name","Payroll Type","bindLabel","description","bindValue","id","placeholder","Select Payroll Type",3,"items","change"],["class","text-danger mt-1",4,"ngIf"],["class","col-md-4",4,"ngIf"],["formControlName","selectedMonth","name","Payroll Month","bindLabel","description","bindValue","id","placeholder","Select Month",3,"items","change"],[1,"input-group"],["placeholder","mm/dd/yyyy","name","dp","formControlName","dateFrom","ngbDatepicker","",1,"form-control",3,"click"],["df","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-light","btn-icon","calendar",3,"click"],["data-feather","calendar","appFeatherIcon","",1,"text-secondary"],["placeholder","mm/dd/yyyy","name","dp","formControlName","dateTo","ngbDatepicker","",1,"form-control",3,"click"],["dt","ngbDatepicker"],["formControlName","selectedCategory","name","Category","bindLabel","category_name","bindValue","category_id","placeholder","Select Category",3,"items"],["formControlName","selectedBranch","name","Department","bindLabel","branch_name","bindValue","branch_id","placeholder","Select Department",3,"items"],["formControlName","selectedConfidential","name","Confidential","bindLabel","description","bindValue","id","placeholder","Select Confidential",3,"items"],[1,"d-flex","justify-content-center","mt-2"],["class","btn btn-primary btn-icon-text",3,"click",4,"ngIf"],["class","btn btn-primary","type","button","awNextStep","",4,"ngIf"],["stepTitle","Timekeeping Generation",3,"awCompletedStep"],[1,"col-md-12"],[1,"text-right"],["class","btn btn-primary","type","button","disabled","",4,"ngIf"],["type","button","class","btn btn-primary btn-icon-text",3,"click",4,"ngIf"],[1,"table-responsive"],["id","tkList","datatable","",1,"table",2,"width","100%",3,"dtTrigger","dtOptions"],["type","button","awPreviousStep","",1,"btn","btn-light","mr-2"],["type","button","awNextStep","",1,"btn","btn-primary"],["stepTitle","Final Timekeeping",3,"awCompletedStep"],["id","tkFinal","datatable","",1,"table",3,"dtTrigger","dtOptions"],[1,"text-danger","mt-1"],["formControlName","selectedCutoff","name","Payroll Type","bindLabel","description","bindValue","id","placeholder","Select Payroll Type",3,"items","change"],[1,"btn","btn-primary","btn-icon-text",3,"click"],["data-feather","save","appFeatherIcon","",1,"btn-icon-prepend"],["type","button","disabled","",1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["type","button",1,"btn","btn-primary","btn-icon-text",3,"click"],["data-feather","clock","appFeatherIcon","",1,"btn-icon-prepend"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["id","modalTable","datatable","",1,"table",3,"dtOptions"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(m.Gc(0,Te,3,0,"div",0),m.Gc(1,Pe,218,25,"div",1),m.Gc(2,Be,115,1,"ng-template",null,2,m.Hc)),2&e&&(m.jc("ngIf",t.isLoading),m.yb(1),m.jc("ngIf",!t.isLoading))},directives:[o.n,c.f,g.s,g.j,g.e,ue.f,ue.g,ue.b,v.a,g.i,g.d,g.b,p.i,R.a,d.a,ue.e,ue.d],styles:[""]}),He)}]}],Ve=((Ue=function t(){e(this,t)}).\u0275mod=m.Jb({type:Ue}),Ue.\u0275inj=m.Ib({factory:function(e){return new(e||Ue)},providers:[o.f,{provide:p.b,useClass:le.a}],imports:[[o.c,g.f,g.p,c.g.forChild(Ae),se.a,v.b,Q.b.forRoot(),p.k,se.a,ue.a,d.b,me.c,I.b.forRoot()]]}),Ue)}}])}();