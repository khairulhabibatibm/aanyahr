(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{cCha:function(e,t,r){"use strict";r.r(t),r.d(t,"ReportsModule",function(){return F});var n=r("ofXK"),i=r("EVdn"),o=r("fXoL"),s=r("EAui"),a=r("HG93"),c=r("3Pt+"),p=r("ltvU"),d=r("ZOsW"),l=r("1kSV"),b=r("IYwT"),u=r("njyG"),h=r("XNiG");let m=(()=>{class e{constructor(){this.dtOptions=[],this.dtTrigger=new h.a}ngOnInit(){console.log(this.headerList)}searchReport(e){console.log(e),void 0!==this.dtElement.dtInstance?($("#reportTable").DataTable().clear(),$("#reportTable").DataTable().destroy(),this.dtOptions.reports={data:e,dom:"Bfrtip",destroy:!0,buttons:["copy","csv","excel","print"],columns:this.headerList},setTimeout(()=>{this.dtTrigger.next()},100)):(this.dtOptions.reports={data:e,dom:"Bfrtip",buttons:["copy","csv","excel","print"],columns:this.headerList},setTimeout(()=>{this.dtTrigger.next()},100))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Fb({type:e,selectors:[["app-child-report"]],viewQuery:function(e,t){if(1&e&&o.Nc(u.a,!0),2&e){let e;o.uc(e=o.cc())&&(t.dtElement=e.first)}},inputs:{headerList:"headerList"},decls:2,vars:2,consts:[[1,"table-responsive"],["id","reportTable","datatable","",3,"dtTrigger","dtOptions"]],template:function(e,t){1&e&&(o.Rb(0,"div",0),o.Mb(1,"table",1),o.Qb()),2&e&&(o.yb(1),o.jc("dtTrigger",t.dtTrigger)("dtOptions",t.dtOptions.reports))},directives:[u.a],styles:[""]}),e})();const g=["appChild"];function f(e,t){1&e&&(o.Rb(0,"div",2),o.Rb(1,"div",3),o.Ic(2,"Loading..."),o.Qb(),o.Qb())}function y(e,t){1&e&&(o.Rb(0,"p",29),o.Ic(1,"Please select report type!"),o.Qb())}function v(e,t){1&e&&(o.Rb(0,"button",30),o.Mb(1,"span",31),o.Ic(2," Loading... "),o.Qb())}function R(e,t){if(1&e){const e=o.Sb();o.Rb(0,"button",32),o.bc("click",function(){return o.xc(e),o.dc(2).search()}),o.Mb(1,"i",33),o.Ic(2," Search "),o.Qb()}}function I(e,t){if(1&e&&o.Mb(0,"app-child-report",34,35),2&e){const e=o.dc(2);o.jc("headerList",e.headerList)}}function Q(e,t){if(1&e){const e=o.Sb();o.Rb(0,"div",4),o.Rb(1,"div",5),o.Rb(2,"div",6),o.Rb(3,"h6"),o.Ic(4,"Report"),o.Qb(),o.Qb(),o.Rb(5,"div",7),o.Rb(6,"form",8),o.Rb(7,"div",9),o.Rb(8,"div",10),o.Rb(9,"div",11),o.Rb(10,"label",12),o.Ic(11,"Report Type"),o.Qb(),o.Rb(12,"ng-select",13),o.bc("change",function(){return o.xc(e),o.dc().onChange()}),o.Qb(),o.Gc(13,y,2,0,"p",14),o.Qb(),o.Qb(),o.Rb(14,"div",10),o.Rb(15,"div",11),o.Rb(16,"label",12),o.Ic(17,"Date From"),o.Qb(),o.Rb(18,"div",15),o.Rb(19,"input",16,17),o.bc("click",function(){return o.xc(e),o.vc(20).toggle()}),o.Qb(),o.Rb(21,"div",18),o.Rb(22,"button",19),o.bc("click",function(){return o.xc(e),o.vc(20).toggle()}),o.Mb(23,"i",20),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(24,"div",10),o.Rb(25,"div",11),o.Rb(26,"label",12),o.Ic(27,"Date To"),o.Qb(),o.Rb(28,"div",15),o.Rb(29,"input",21,22),o.bc("click",function(){return o.xc(e),o.vc(30).toggle()}),o.Qb(),o.Rb(31,"div",18),o.Rb(32,"button",19),o.bc("click",function(){return o.xc(e),o.vc(30).toggle()}),o.Mb(33,"i",20),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(34,"div",9),o.Rb(35,"div",23),o.Rb(36,"div",11),o.Rb(37,"label",12),o.Ic(38,"Employee"),o.Qb(),o.Rb(39,"div",9),o.Rb(40,"div",23),o.Mb(41,"ng-select",24),o.Qb(),o.Rb(42,"div",25),o.Gc(43,v,3,0,"button",26),o.Gc(44,R,3,0,"button",27),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Mb(45,"hr"),o.Gc(46,I,2,1,"app-child-report",28),o.Qb(),o.Qb(),o.Qb()}if(2&e){const e=o.dc();o.yb(6),o.jc("formGroup",e.reportForm),o.yb(6),o.jc("items",e.reportList),o.yb(1),o.jc("ngIf",e.errReports),o.yb(28),o.jc("items",e.employeeList),o.yb(2),o.jc("ngIf",e.isSearch),o.yb(1),o.jc("ngIf",!e.isSearch),o.yb(2),o.jc("ngIf",e.isReport)}}let T=(()=>{class e{constructor(e,t,r,i){this.permissionManagementService=e,this.reportManagementService=t,this.fb=r,this.userManagementService=i,this.reportList=[],this.headerList=[],this.employeeList=[],this.isLoading=!0,this.isSearch=!1,this.isReport=!1,this.errReports=!1,this.startDate={day:new Date(sessionStorage.getItem("s")).getDate(),month:new Date(sessionStorage.getItem("s")).getMonth()+1,year:new Date(sessionStorage.getItem("s")).getFullYear()},this.endDate={day:new Date(sessionStorage.getItem("e")).getDate(),month:new Date(sessionStorage.getItem("e")).getMonth()+1,year:new Date(sessionStorage.getItem("e")).getFullYear()},this.pipe=new n.e("en-US")}ngOnInit(){this.reportForm=this.fb.group({reportID:null,dateFrom:this.startDate,dateTo:this.endDate,selectedEmployee:null}),this.permissionManagementService.reportAccess(sessionStorage.getItem("al")).subscribe(e=>{this.reportList=e,this.userManagementService.employeeView(0).subscribe(e=>{this.employeeList=Object(i.merge)([{encrypt_employee_id:0,display_name:"All"}],e),this.isLoading=!1},e=>{console.log(e.error)})},e=>{console.log(e.error)})}onChange(){this.headerList=[],this.isReport=!1,this.reportManagementService.reportHeader(this.reportForm.get("reportID").value).subscribe(e=>{for(var t=0;t<e.filter(e=>!0===e.is_view).length;t++)this.headerList.push({data:e[t].columns,sTitle:e[t].colname});this.isReport=!0},e=>{console.log(e.error)})}search(){var e=!0;this.errReports=!1;let t=0;""!==this.reportForm.get("reportID").value&&null!==this.reportForm.get("reportID").value||(e=!1,this.errReports=!0),t=""===this.reportForm.get("selectedEmployee").value||null===this.reportForm.get("selectedEmployee").value?0:this.reportForm.get("selectedEmployee").value,e&&(this.isSearch=!0,this.reportManagementService.reportView(this.reportForm.get("reportID").value,this.pipe.transform(this.reportForm.get("dateFrom").value.year+"/"+this.reportForm.get("dateFrom").value.month+"/"+this.reportForm.get("dateFrom").value.day,"MM/dd/yyyy"),this.pipe.transform(this.reportForm.get("dateTo").value.year+"/"+this.reportForm.get("dateTo").value.month+"/"+this.reportForm.get("dateTo").value.day,"MM/dd/yyyy"),t).subscribe(e=>{this.childReport.searchReport(JSON.parse(e.toString())),this.isSearch=!1},e=>{console.log(e.error)}))}}return e.\u0275fac=function(t){return new(t||e)(o.Lb(s.a),o.Lb(a.a),o.Lb(c.c),o.Lb(p.a))},e.\u0275cmp=o.Fb({type:e,selectors:[["app-report"]],viewQuery:function(e,t){if(1&e&&o.Nc(g,!0),2&e){let e;o.uc(e=o.cc())&&(t.childReport=e.first)}},decls:2,vars:2,consts:[["class","spinner-wrapper",4,"ngIf"],["class","animate__animated animate__fadeInUp",4,"ngIf"],[1,"spinner-wrapper"],[1,"spinner"],[1,"animate__animated","animate__fadeInUp"],[1,"card"],[1,"card-header"],[1,"card-body"],[3,"formGroup"],[1,"row"],[1,"col-md-4"],[1,"form-group"],[1,"control-label"],["name","industry","bindLabel","report_name","bindValue","report_id","placeholder","Select Reports","formControlName","reportID",3,"items","change"],["class","text-danger mt-1",4,"ngIf"],[1,"input-group"],["placeholder","mm/dd/yyyy","name","dp","formControlName","dateFrom","value","dateFrom","ngbDatepicker","",1,"form-control",3,"click"],["d","ngbDatepicker"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-light","btn-icon","calendar",3,"click"],["data-feather","calendar","appFeatherIcon","",1,"text-secondary"],["placeholder","mm/dd/yyyy","name","dp","formControlName","dateTo","ngbDatepicker","",1,"form-control",3,"click"],["dt","ngbDatepicker"],[1,"col-md-8"],["name","Employee","bindLabel","display_name","bindValue","employee_id","placeholder","Select Employee","formControlName","selectedEmployee",3,"items"],[1,"col-md-3"],["class","btn btn-primary","type","button","disabled","",4,"ngIf"],["type","button","class","btn btn-primary btn-icon-text ",3,"click",4,"ngIf"],[3,"headerList",4,"ngIf"],[1,"text-danger","mt-1"],["type","button","disabled","",1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["type","button",1,"btn","btn-primary","btn-icon-text",3,"click"],["data-feather","search","appFeatherIcon","",1,"btn-icon-prepend"],[3,"headerList"],["appChild",""]],template:function(e,t){1&e&&(o.Gc(0,f,3,0,"div",0),o.Gc(1,Q,47,7,"div",1)),2&e&&(o.jc("ngIf",t.isLoading),o.yb(1),o.jc("ngIf",!t.isLoading))},directives:[n.n,c.s,c.j,c.e,d.a,c.i,c.d,c.b,l.i,b.a,m],styles:[""]}),e})();var L=r("tyNb"),w=r("tyVc");const D=[{path:"",component:T,children:[{path:"",redirectTo:"report",pathMatch:"full"},{path:"report",component:T},{path:"child-report",component:m}]}];let F=(()=>{class e{}return e.\u0275mod=o.Jb({type:e}),e.\u0275inj=o.Ib({factory:function(t){return new(t||e)},imports:[[n.c,c.f,c.p,L.g.forChild(D),w.a,d.b,l.k,u.b]]}),e})()},njyG:function(e,t,r){"use strict";r.d(t,"a",function(){return i}),r.d(t,"b",function(){return s});var n=r("fXoL"),i=function(){function e(e){this.el=e,this.dtOptions={}}return e.prototype.ngOnInit=function(){var e=this;this.dtTrigger?this.dtTrigger.subscribe(function(){e.displayTable()}):this.displayTable()},e.prototype.ngOnDestroy=function(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.dt&&this.dt.destroy(!0)},e.prototype.displayTable=function(){var e=this;this.dtInstance=new Promise(function(t,r){Promise.resolve(e.dtOptions).then(function(r){setTimeout(function(){var n={rowCallback:function(t,n,i){if(r.columns){var o=r.columns;o.filter(function(e){return e.ngPipeInstance}).forEach(function(e){var r=e.ngPipeInstance,n=o.findIndex(function(t){return t.data==e.data}),i=t.childNodes.item(n),s=$(i).text(),a=r.transform(s);$(i).text(a)})}e.dtOptions.rowCallback&&e.dtOptions.rowCallback(t,n,i)}};n=Object.assign({},r,n),e.dt=$(e.el.nativeElement).DataTable(n),t(e.dt)})})})},e.\u0275fac=function(t){return new(t||e)(n.Lb(n.l))},e.\u0275dir=n.Gb({type:e,selectors:[["","datatable",""]],inputs:{dtOptions:"dtOptions",dtTrigger:"dtTrigger"}}),e}(),o=r("ofXK"),s=function(){function e(){}return e.forRoot=function(){return{ngModule:e}},e.\u0275mod=n.Jb({type:e}),e.\u0275inj=n.Ib({factory:function(t){return new(t||e)},imports:[[o.c]]}),e}()}}]);